import{$ as pa,$a as Pa,A as Qi,Aa as Or,B as Wt,Ba as so,C as sa,Ca as Ar,D as Er,Da as xa,E as ct,Ea as Ia,F as Zi,Fa as ao,G as aa,Ga as dt,H as ua,Ha as uo,I as ca,Ia as co,J as qe,Ja as lo,K as la,Ka as _e,L as be,La as Te,M as ce,Ma as Dr,N as re,Na as ho,O as da,Oa as Ke,P as we,Pa as ht,Q as Xi,Qa as At,R as ue,Ra as Oa,S as H,Sa as fo,T as Rn,Ta as po,U as ha,Ua as Aa,V as xr,Va as go,W as Ze,Wa as Da,X as fa,Xa as mo,Y as kn,Ya as Ta,Z as En,Za as vo,_ as Ji,_a as Ma,a as K,aa as ga,ab as Me,b as Se,ba as ma,bb as Tr,ca as Ot,cb as ja,d as Sc,da as lt,db as Na,e as _c,ea as eo,eb as Ua,f as Qe,fa as va,fb as yo,g as ta,ga as to,gb as La,h as na,ha as ya,hb as bo,i as Vi,ia as no,ib as Fa,j as Wi,ja as ba,k as It,ka as xn,l as Ae,la as wa,lb as $a,m as ut,ma as ro,mb as wo,n as je,na as Ca,o as G,oa as In,ob as Mr,p as Sn,pa as Sa,pb as Co,q as ra,qa as On,r as ia,ra as Ne,s as ne,sa as io,t as Gi,ta as oo,u as De,ua as Ir,v as oa,va as _a,w as Yi,wa as Ra,x as Ht,xa as ka,y as Vt,ya as Ea,z as _n,za as Gt}from"./chunk-S2HBJRW5.js";var Pu=Sc((ps,gs)=>{"use strict";(function(i,n){typeof ps=="object"&&typeof gs<"u"?gs.exports=n():typeof define=="function"&&define.amd?define(n):(i=typeof globalThis<"u"?globalThis:i||self).Dexie=n()})(ps,function(){"use strict";var i=function(e,r){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,u){s.__proto__=u}||function(s,u){for(var c in u)Object.prototype.hasOwnProperty.call(u,c)&&(s[c]=u[c])})(e,r)},n=function(){return(n=Object.assign||function(e){for(var r,s=1,u=arguments.length;s<u;s++)for(var c in r=arguments[s])Object.prototype.hasOwnProperty.call(r,c)&&(e[c]=r[c]);return e}).apply(this,arguments)};function t(e,r,s){if(s||arguments.length===2)for(var u,c=0,d=r.length;c<d;c++)!u&&c in r||((u=u||Array.prototype.slice.call(r,0,c))[c]=r[c]);return e.concat(u||Array.prototype.slice.call(r))}var o=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,a=Object.keys,l=Array.isArray;function f(e,r){return typeof r!="object"||a(r).forEach(function(s){e[s]=r[s]}),e}typeof Promise>"u"||o.Promise||(o.Promise=Promise);var k=Object.getPrototypeOf,b={}.hasOwnProperty;function A(e,r){return b.call(e,r)}function F(e,r){typeof r=="function"&&(r=r(k(e))),(typeof Reflect>"u"?a:Reflect.ownKeys)(r).forEach(function(s){W(e,s,r[s])})}var B=Object.defineProperty;function W(e,r,s,u){B(e,r,f(s&&A(s,"get")&&typeof s.get=="function"?{get:s.get,set:s.set,configurable:!0}:{value:s,configurable:!0,writable:!0},u))}function he(e){return{from:function(r){return e.prototype=Object.create(r.prototype),W(e.prototype,"constructor",e),{extend:F.bind(null,e.prototype)}}}}var fe=Object.getOwnPropertyDescriptor,Le=[].slice;function ge(e,r,s){return Le.call(e,r,s)}function et(e,r){return r(e)}function pt(e){if(!e)throw new Error("Assertion Failed")}function gt(e){o.setImmediate?setImmediate(e):setTimeout(e,0)}function He(e,r){if(typeof r=="string"&&A(e,r))return e[r];if(!r)return e;if(typeof r!="string"){for(var s=[],u=0,c=r.length;u<c;++u){var d=He(e,r[u]);s.push(d)}return s}var h=r.indexOf(".");if(h!==-1){var p=e[r.substr(0,h)];return p==null?void 0:He(p,r.substr(h+1))}}function Re(e,r,s){if(e&&r!==void 0&&!("isFrozen"in Object&&Object.isFrozen(e)))if(typeof r!="string"&&"length"in r){pt(typeof s!="string"&&"length"in s);for(var u=0,c=r.length;u<c;++u)Re(e,r[u],s[u])}else{var d,h,p=r.indexOf(".");p!==-1?(d=r.substr(0,p),(h=r.substr(p+1))===""?s===void 0?l(e)&&!isNaN(parseInt(d))?e.splice(d,1):delete e[d]:e[d]=s:Re(p=!(p=e[d])||!A(e,d)?e[d]={}:p,h,s)):s===void 0?l(e)&&!isNaN(parseInt(r))?e.splice(r,1):delete e[r]:e[r]=s}}function vs(e){var r,s={};for(r in e)A(e,r)&&(s[r]=e[r]);return s}var Bu=[].concat;function ys(e){return Bu.apply([],e)}var Ge="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(ys([8,16,32,64].map(function(e){return["Int","Uint","Float"].map(function(r){return r+e+"Array"})}))).filter(function(e){return o[e]}),bs=new Set(Ge.map(function(e){return o[e]})),an=null;function mt(e){return an=new WeakMap,e=function r(s){if(!s||typeof s!="object")return s;var u=an.get(s);if(u)return u;if(l(s)){u=[],an.set(s,u);for(var c=0,d=s.length;c<d;++c)u.push(r(s[c]))}else if(bs.has(s.constructor))u=s;else{var h,p=k(s);for(h in u=p===Object.prototype?{}:Object.create(p),an.set(s,u),s)A(s,h)&&(u[h]=r(s[h]))}return u}(e),an=null,e}var qu={}.toString;function si(e){return qu.call(e).slice(8,-1)}var ai=typeof Symbol<"u"?Symbol.iterator:"@@iterator",Ku=typeof ai=="symbol"?function(e){var r;return e!=null&&(r=e[ai])&&r.apply(e)}:function(){return null};function vt(e,r){return r=e.indexOf(r),0<=r&&e.splice(r,1),0<=r}var jt={};function Ve(e){var r,s,u,c;if(arguments.length===1){if(l(e))return e.slice();if(this===jt&&typeof e=="string")return[e];if(c=Ku(e)){for(s=[];!(u=c.next()).done;)s.push(u.value);return s}if(e==null)return[e];if(typeof(r=e.length)!="number")return[e];for(s=new Array(r);r--;)s[r]=e[r];return s}for(r=arguments.length,s=new Array(r);r--;)s[r]=arguments[r];return s}var ui=typeof Symbol<"u"?function(e){return e[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},ln=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],Oe=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(ln),zu={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function Nt(e,r){this.name=e,this.message=r}function ws(e,r){return e+". Errors: "+Object.keys(r).map(function(s){return r[s].toString()}).filter(function(s,u,c){return c.indexOf(s)===u}).join(`
`)}function Xn(e,r,s,u){this.failures=r,this.failedKeys=u,this.successCount=s,this.message=ws(e,r)}function Ut(e,r){this.name="BulkError",this.failures=Object.keys(r).map(function(s){return r[s]}),this.failuresByPos=r,this.message=ws(e,this.failures)}he(Nt).from(Error).extend({toString:function(){return this.name+": "+this.message}}),he(Xn).from(Nt),he(Ut).from(Nt);var ci=Oe.reduce(function(e,r){return e[r]=r+"Error",e},{}),Hu=Nt,q=Oe.reduce(function(e,r){var s=r+"Error";function u(c,d){this.name=s,c?typeof c=="string"?(this.message="".concat(c).concat(d?`
 `+d:""),this.inner=d||null):typeof c=="object"&&(this.message="".concat(c.name," ").concat(c.message),this.inner=c):(this.message=zu[r]||s,this.inner=null)}return he(u).from(Hu),e[r]=u,e},{});q.Syntax=SyntaxError,q.Type=TypeError,q.Range=RangeError;var Cs=ln.reduce(function(e,r){return e[r+"Error"]=q[r],e},{}),Jn=Oe.reduce(function(e,r){return["Syntax","Type","Range"].indexOf(r)===-1&&(e[r+"Error"]=q[r]),e},{});function te(){}function un(e){return e}function Vu(e,r){return e==null||e===un?r:function(s){return r(e(s))}}function yt(e,r){return function(){e.apply(this,arguments),r.apply(this,arguments)}}function Wu(e,r){return e===te?r:function(){var s=e.apply(this,arguments);s!==void 0&&(arguments[0]=s);var u=this.onsuccess,c=this.onerror;this.onsuccess=null,this.onerror=null;var d=r.apply(this,arguments);return u&&(this.onsuccess=this.onsuccess?yt(u,this.onsuccess):u),c&&(this.onerror=this.onerror?yt(c,this.onerror):c),d!==void 0?d:s}}function Gu(e,r){return e===te?r:function(){e.apply(this,arguments);var s=this.onsuccess,u=this.onerror;this.onsuccess=this.onerror=null,r.apply(this,arguments),s&&(this.onsuccess=this.onsuccess?yt(s,this.onsuccess):s),u&&(this.onerror=this.onerror?yt(u,this.onerror):u)}}function Yu(e,r){return e===te?r:function(s){var u=e.apply(this,arguments);f(s,u);var c=this.onsuccess,d=this.onerror;return this.onsuccess=null,this.onerror=null,s=r.apply(this,arguments),c&&(this.onsuccess=this.onsuccess?yt(c,this.onsuccess):c),d&&(this.onerror=this.onerror?yt(d,this.onerror):d),u===void 0?s===void 0?void 0:s:f(u,s)}}function Qu(e,r){return e===te?r:function(){return r.apply(this,arguments)!==!1&&e.apply(this,arguments)}}function li(e,r){return e===te?r:function(){var s=e.apply(this,arguments);if(s&&typeof s.then=="function"){for(var u=this,c=arguments.length,d=new Array(c);c--;)d[c]=arguments[c];return s.then(function(){return r.apply(u,d)})}return r.apply(this,arguments)}}Jn.ModifyError=Xn,Jn.DexieError=Nt,Jn.BulkError=Ut;var Fe=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function Ss(e){Fe=e}var cn={},_s=100,Ge=typeof Promise>"u"?[]:function(){var e=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[e,k(e),e];var r=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[r,k(r),e]}(),ln=Ge[0],Oe=Ge[1],Ge=Ge[2],Oe=Oe&&Oe.then,bt=ln&&ln.constructor,di=!!Ge,dn=function(e,r){hn.push([e,r]),er&&(queueMicrotask(Xu),er=!1)},hi=!0,er=!0,wt=[],tr=[],fi=un,tt={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:te,pgp:!1,env:{},finalize:te},$=tt,hn=[],Ct=0,nr=[];function U(e){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var r=this._PSD=$;if(typeof e!="function"){if(e!==cn)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&gi(this,this._value))}this._state=null,this._value=null,++r.ref,function s(u,c){try{c(function(d){if(u._state===null){if(d===u)throw new TypeError("A promise cannot be resolved with itself.");var h=u._lib&&Lt();d&&typeof d.then=="function"?s(u,function(p,m){d instanceof U?d._then(p,m):d.then(p,m)}):(u._state=!0,u._value=d,ks(u)),h&&Ft()}},gi.bind(null,u))}catch(d){gi(u,d)}}(this,e)}var pi={get:function(){var e=$,r=sr;function s(u,c){var d=this,h=!e.global&&(e!==$||r!==sr),p=h&&!rt(),m=new U(function(y,S){mi(d,new Rs(xs(u,e,h,p),xs(c,e,h,p),y,S,e))});return this._consoleTask&&(m._consoleTask=this._consoleTask),m}return s.prototype=cn,s},set:function(e){W(this,"then",e&&e.prototype===cn?pi:{get:function(){return e},set:pi.set})}};function Rs(e,r,s,u,c){this.onFulfilled=typeof e=="function"?e:null,this.onRejected=typeof r=="function"?r:null,this.resolve=s,this.reject=u,this.psd=c}function gi(e,r){var s,u;tr.push(r),e._state===null&&(s=e._lib&&Lt(),r=fi(r),e._state=!1,e._value=r,u=e,wt.some(function(c){return c._value===u._value})||wt.push(u),ks(e),s&&Ft())}function ks(e){var r=e._listeners;e._listeners=[];for(var s=0,u=r.length;s<u;++s)mi(e,r[s]);var c=e._PSD;--c.ref||c.finalize(),Ct===0&&(++Ct,dn(function(){--Ct==0&&vi()},[]))}function mi(e,r){if(e._state!==null){var s=e._state?r.onFulfilled:r.onRejected;if(s===null)return(e._state?r.resolve:r.reject)(e._value);++r.psd.ref,++Ct,dn(Zu,[s,e,r])}else e._listeners.push(r)}function Zu(e,r,s){try{var u,c=r._value;!r._state&&tr.length&&(tr=[]),u=Fe&&r._consoleTask?r._consoleTask.run(function(){return e(c)}):e(c),r._state||tr.indexOf(c)!==-1||function(d){for(var h=wt.length;h;)if(wt[--h]._value===d._value)return wt.splice(h,1)}(r),s.resolve(u)}catch(d){s.reject(d)}finally{--Ct==0&&vi(),--s.psd.ref||s.psd.finalize()}}function Xu(){St(tt,function(){Lt()&&Ft()})}function Lt(){var e=hi;return er=hi=!1,e}function Ft(){var e,r,s;do for(;0<hn.length;)for(e=hn,hn=[],s=e.length,r=0;r<s;++r){var u=e[r];u[0].apply(null,u[1])}while(0<hn.length);er=hi=!0}function vi(){var e=wt;wt=[],e.forEach(function(u){u._PSD.onunhandled.call(null,u._value,u)});for(var r=nr.slice(0),s=r.length;s;)r[--s]()}function rr(e){return new U(cn,!1,e)}function oe(e,r){var s=$;return function(){var u=Lt(),c=$;try{return it(s,!0),e.apply(this,arguments)}catch(d){r&&r(d)}finally{it(c,!1),u&&Ft()}}}F(U.prototype,{then:pi,_then:function(e,r){mi(this,new Rs(null,null,e,r,$))},catch:function(e){if(arguments.length===1)return this.then(null,e);var r=e,s=arguments[1];return typeof r=="function"?this.then(null,function(u){return(u instanceof r?s:rr)(u)}):this.then(null,function(u){return(u&&u.name===r?s:rr)(u)})},finally:function(e){return this.then(function(r){return U.resolve(e()).then(function(){return r})},function(r){return U.resolve(e()).then(function(){return rr(r)})})},timeout:function(e,r){var s=this;return e<1/0?new U(function(u,c){var d=setTimeout(function(){return c(new q.Timeout(r))},e);s.then(u,c).finally(clearTimeout.bind(null,d))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&W(U.prototype,Symbol.toStringTag,"Dexie.Promise"),tt.env=Es(),F(U,{all:function(){var e=Ve.apply(null,arguments).map(ar);return new U(function(r,s){e.length===0&&r([]);var u=e.length;e.forEach(function(c,d){return U.resolve(c).then(function(h){e[d]=h,--u||r(e)},s)})})},resolve:function(e){return e instanceof U?e:e&&typeof e.then=="function"?new U(function(r,s){e.then(r,s)}):new U(cn,!0,e)},reject:rr,race:function(){var e=Ve.apply(null,arguments).map(ar);return new U(function(r,s){e.map(function(u){return U.resolve(u).then(r,s)})})},PSD:{get:function(){return $},set:function(e){return $=e}},totalEchoes:{get:function(){return sr}},newPSD:nt,usePSD:St,scheduler:{get:function(){return dn},set:function(e){dn=e}},rejectionMapper:{get:function(){return fi},set:function(e){fi=e}},follow:function(e,r){return new U(function(s,u){return nt(function(c,d){var h=$;h.unhandleds=[],h.onunhandled=d,h.finalize=yt(function(){var p,m=this;p=function(){m.unhandleds.length===0?c():d(m.unhandleds[0])},nr.push(function y(){p(),nr.splice(nr.indexOf(y),1)}),++Ct,dn(function(){--Ct==0&&vi()},[])},h.finalize),e()},r,s,u)})}}),bt&&(bt.allSettled&&W(U,"allSettled",function(){var e=Ve.apply(null,arguments).map(ar);return new U(function(r){e.length===0&&r([]);var s=e.length,u=new Array(s);e.forEach(function(c,d){return U.resolve(c).then(function(h){return u[d]={status:"fulfilled",value:h}},function(h){return u[d]={status:"rejected",reason:h}}).then(function(){return--s||r(u)})})})}),bt.any&&typeof AggregateError<"u"&&W(U,"any",function(){var e=Ve.apply(null,arguments).map(ar);return new U(function(r,s){e.length===0&&s(new AggregateError([]));var u=e.length,c=new Array(u);e.forEach(function(d,h){return U.resolve(d).then(function(p){return r(p)},function(p){c[h]=p,--u||s(new AggregateError(c))})})})}),bt.withResolvers&&(U.withResolvers=bt.withResolvers));var le={awaits:0,echoes:0,id:0},Ju=0,ir=[],or=0,sr=0,ec=0;function nt(e,r,s,u){var c=$,d=Object.create(c);return d.parent=c,d.ref=0,d.global=!1,d.id=++ec,tt.env,d.env=di?{Promise:U,PromiseProp:{value:U,configurable:!0,writable:!0},all:U.all,race:U.race,allSettled:U.allSettled,any:U.any,resolve:U.resolve,reject:U.reject}:{},r&&f(d,r),++c.ref,d.finalize=function(){--this.parent.ref||this.parent.finalize()},u=St(d,e,s,u),d.ref===0&&d.finalize(),u}function $t(){return le.id||(le.id=++Ju),++le.awaits,le.echoes+=_s,le.id}function rt(){return!!le.awaits&&(--le.awaits==0&&(le.id=0),le.echoes=le.awaits*_s,!0)}function ar(e){return le.echoes&&e&&e.constructor===bt?($t(),e.then(function(r){return rt(),r},function(r){return rt(),se(r)})):e}function tc(){var e=ir[ir.length-1];ir.pop(),it(e,!1)}function it(e,r){var s,u=$;(r?!le.echoes||or++&&e===$:!or||--or&&e===$)||queueMicrotask(r?function(c){++sr,le.echoes&&--le.echoes!=0||(le.echoes=le.awaits=le.id=0),ir.push($),it(c,!0)}.bind(null,e):tc),e!==$&&($=e,u===tt&&(tt.env=Es()),di&&(s=tt.env.Promise,r=e.env,(u.global||e.global)&&(Object.defineProperty(o,"Promise",r.PromiseProp),s.all=r.all,s.race=r.race,s.resolve=r.resolve,s.reject=r.reject,r.allSettled&&(s.allSettled=r.allSettled),r.any&&(s.any=r.any))))}function Es(){var e=o.Promise;return di?{Promise:e,PromiseProp:Object.getOwnPropertyDescriptor(o,"Promise"),all:e.all,race:e.race,allSettled:e.allSettled,any:e.any,resolve:e.resolve,reject:e.reject}:{}}function St(e,r,s,u,c){var d=$;try{return it(e,!0),r(s,u,c)}finally{it(d,!1)}}function xs(e,r,s,u){return typeof e!="function"?e:function(){var c=$;s&&$t(),it(r,!0);try{return e.apply(this,arguments)}finally{it(c,!1),u&&queueMicrotask(rt)}}}function yi(e){Promise===bt&&le.echoes===0?or===0?e():enqueueNativeMicroTask(e):setTimeout(e,0)}(""+Oe).indexOf("[native code]")===-1&&($t=rt=te);var se=U.reject,_t="\uFFFF",We="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",Is="String expected.",Bt=[],ur="__dbnames",bi="readonly",wi="readwrite";function Rt(e,r){return e?r?function(){return e.apply(this,arguments)&&r.apply(this,arguments)}:e:r}var Os={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function cr(e){return typeof e!="string"||/\./.test(e)?function(r){return r}:function(r){return r[e]===void 0&&e in r&&delete(r=mt(r))[e],r}}function As(){throw q.Type()}function X(e,r){try{var s=Ds(e),u=Ds(r);if(s!==u)return s==="Array"?1:u==="Array"?-1:s==="binary"?1:u==="binary"?-1:s==="string"?1:u==="string"?-1:s==="Date"?1:u!=="Date"?NaN:-1;switch(s){case"number":case"Date":case"string":return r<e?1:e<r?-1:0;case"binary":return function(c,d){for(var h=c.length,p=d.length,m=h<p?h:p,y=0;y<m;++y)if(c[y]!==d[y])return c[y]<d[y]?-1:1;return h===p?0:h<p?-1:1}(Ts(e),Ts(r));case"Array":return function(c,d){for(var h=c.length,p=d.length,m=h<p?h:p,y=0;y<m;++y){var S=X(c[y],d[y]);if(S!==0)return S}return h===p?0:h<p?-1:1}(e,r)}}catch{}return NaN}function Ds(e){var r=typeof e;return r!="object"?r:ArrayBuffer.isView(e)?"binary":(e=si(e),e==="ArrayBuffer"?"binary":e)}function Ts(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(e)}var Ms=(ie.prototype._trans=function(e,r,s){var u=this._tx||$.trans,c=this.name,d=Fe&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(e==="readonly"?"read":"write"," ").concat(this.name));function h(y,S,g){if(!g.schema[c])throw new q.NotFound("Table "+c+" not part of transaction");return r(g.idbtrans,g)}var p=Lt();try{var m=u&&u.db._novip===this.db._novip?u===$.trans?u._promise(e,h,s):nt(function(){return u._promise(e,h,s)},{trans:u,transless:$.transless||$}):function y(S,g,R,v){if(S.idbdb&&(S._state.openComplete||$.letThrough||S._vip)){var C=S._createTransaction(g,R,S._dbSchema);try{C.create(),S._state.PR1398_maxLoop=3}catch(_){return _.name===ci.InvalidState&&S.isOpen()&&0<--S._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),S.close({disableAutoOpen:!1}),S.open().then(function(){return y(S,g,R,v)})):se(_)}return C._promise(g,function(_,w){return nt(function(){return $.trans=C,v(_,w,C)})}).then(function(_){if(g==="readwrite")try{C.idbtrans.commit()}catch{}return g==="readonly"?_:C._completion.then(function(){return _})})}if(S._state.openComplete)return se(new q.DatabaseClosed(S._state.dbOpenError));if(!S._state.isBeingOpened){if(!S._state.autoOpen)return se(new q.DatabaseClosed);S.open().catch(te)}return S._state.dbReadyPromise.then(function(){return y(S,g,R,v)})}(this.db,e,[this.name],h);return d&&(m._consoleTask=d,m=m.catch(function(y){return console.trace(y),se(y)})),m}finally{p&&Ft()}},ie.prototype.get=function(e,r){var s=this;return e&&e.constructor===Object?this.where(e).first(r):e==null?se(new q.Type("Invalid argument to Table.get()")):this._trans("readonly",function(u){return s.core.get({trans:u,key:e}).then(function(c){return s.hook.reading.fire(c)})}).then(r)},ie.prototype.where=function(e){if(typeof e=="string")return new this.db.WhereClause(this,e);if(l(e))return new this.db.WhereClause(this,"[".concat(e.join("+"),"]"));var r=a(e);if(r.length===1)return this.where(r[0]).equals(e[r[0]]);var s=this.schema.indexes.concat(this.schema.primKey).filter(function(p){if(p.compound&&r.every(function(y){return 0<=p.keyPath.indexOf(y)})){for(var m=0;m<r.length;++m)if(r.indexOf(p.keyPath[m])===-1)return!1;return!0}return!1}).sort(function(p,m){return p.keyPath.length-m.keyPath.length})[0];if(s&&this.db._maxKey!==_t){var d=s.keyPath.slice(0,r.length);return this.where(d).equals(d.map(function(m){return e[m]}))}!s&&Fe&&console.warn("The query ".concat(JSON.stringify(e)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(r.join("+"),"]"));var u=this.schema.idxByName;function c(p,m){return X(p,m)===0}var h=r.reduce(function(g,m){var y=g[0],S=g[1],g=u[m],R=e[m];return[y||g,y||!g?Rt(S,g&&g.multi?function(v){return v=He(v,m),l(v)&&v.some(function(C){return c(R,C)})}:function(v){return c(R,He(v,m))}):S]},[null,null]),d=h[0],h=h[1];return d?this.where(d.name).equals(e[d.keyPath]).filter(h):s?this.filter(h):this.where(r).equals("")},ie.prototype.filter=function(e){return this.toCollection().and(e)},ie.prototype.count=function(e){return this.toCollection().count(e)},ie.prototype.offset=function(e){return this.toCollection().offset(e)},ie.prototype.limit=function(e){return this.toCollection().limit(e)},ie.prototype.each=function(e){return this.toCollection().each(e)},ie.prototype.toArray=function(e){return this.toCollection().toArray(e)},ie.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},ie.prototype.orderBy=function(e){return new this.db.Collection(new this.db.WhereClause(this,l(e)?"[".concat(e.join("+"),"]"):e))},ie.prototype.reverse=function(){return this.toCollection().reverse()},ie.prototype.mapToClass=function(e){var r,s=this.db,u=this.name;function c(){return r!==null&&r.apply(this,arguments)||this}(this.schema.mappedClass=e).prototype instanceof As&&(function(m,y){if(typeof y!="function"&&y!==null)throw new TypeError("Class extends value "+String(y)+" is not a constructor or null");function S(){this.constructor=m}i(m,y),m.prototype=y===null?Object.create(y):(S.prototype=y.prototype,new S)}(c,r=e),Object.defineProperty(c.prototype,"db",{get:function(){return s},enumerable:!1,configurable:!0}),c.prototype.table=function(){return u},e=c);for(var d=new Set,h=e.prototype;h;h=k(h))Object.getOwnPropertyNames(h).forEach(function(m){return d.add(m)});function p(m){if(!m)return m;var y,S=Object.create(e.prototype);for(y in m)if(!d.has(y))try{S[y]=m[y]}catch{}return S}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=p,this.hook("reading",p),e},ie.prototype.defineClass=function(){return this.mapToClass(function(e){f(this,e)})},ie.prototype.add=function(e,r){var s=this,u=this.schema.primKey,c=u.auto,d=u.keyPath,h=e;return d&&c&&(h=cr(d)(e)),this._trans("readwrite",function(p){return s.core.mutate({trans:p,type:"add",keys:r!=null?[r]:null,values:[h]})}).then(function(p){return p.numFailures?U.reject(p.failures[0]):p.lastResult}).then(function(p){if(d)try{Re(e,d,p)}catch{}return p})},ie.prototype.update=function(e,r){return typeof e!="object"||l(e)?this.where(":id").equals(e).modify(r):(e=He(e,this.schema.primKey.keyPath),e===void 0?se(new q.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(e).modify(r))},ie.prototype.put=function(e,r){var s=this,u=this.schema.primKey,c=u.auto,d=u.keyPath,h=e;return d&&c&&(h=cr(d)(e)),this._trans("readwrite",function(p){return s.core.mutate({trans:p,type:"put",values:[h],keys:r!=null?[r]:null})}).then(function(p){return p.numFailures?U.reject(p.failures[0]):p.lastResult}).then(function(p){if(d)try{Re(e,d,p)}catch{}return p})},ie.prototype.delete=function(e){var r=this;return this._trans("readwrite",function(s){return r.core.mutate({trans:s,type:"delete",keys:[e]})}).then(function(s){return s.numFailures?U.reject(s.failures[0]):void 0})},ie.prototype.clear=function(){var e=this;return this._trans("readwrite",function(r){return e.core.mutate({trans:r,type:"deleteRange",range:Os})}).then(function(r){return r.numFailures?U.reject(r.failures[0]):void 0})},ie.prototype.bulkGet=function(e){var r=this;return this._trans("readonly",function(s){return r.core.getMany({keys:e,trans:s}).then(function(u){return u.map(function(c){return r.hook.reading.fire(c)})})})},ie.prototype.bulkAdd=function(e,r,s){var u=this,c=Array.isArray(r)?r:void 0,d=(s=s||(c?void 0:r))?s.allKeys:void 0;return this._trans("readwrite",function(h){var y=u.schema.primKey,p=y.auto,y=y.keyPath;if(y&&c)throw new q.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(c&&c.length!==e.length)throw new q.InvalidArgument("Arguments objects and keys must have the same length");var m=e.length,y=y&&p?e.map(cr(y)):e;return u.core.mutate({trans:h,type:"add",keys:c,values:y,wantResults:d}).then(function(C){var g=C.numFailures,R=C.results,v=C.lastResult,C=C.failures;if(g===0)return d?R:v;throw new Ut("".concat(u.name,".bulkAdd(): ").concat(g," of ").concat(m," operations failed"),C)})})},ie.prototype.bulkPut=function(e,r,s){var u=this,c=Array.isArray(r)?r:void 0,d=(s=s||(c?void 0:r))?s.allKeys:void 0;return this._trans("readwrite",function(h){var y=u.schema.primKey,p=y.auto,y=y.keyPath;if(y&&c)throw new q.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(c&&c.length!==e.length)throw new q.InvalidArgument("Arguments objects and keys must have the same length");var m=e.length,y=y&&p?e.map(cr(y)):e;return u.core.mutate({trans:h,type:"put",keys:c,values:y,wantResults:d}).then(function(C){var g=C.numFailures,R=C.results,v=C.lastResult,C=C.failures;if(g===0)return d?R:v;throw new Ut("".concat(u.name,".bulkPut(): ").concat(g," of ").concat(m," operations failed"),C)})})},ie.prototype.bulkUpdate=function(e){var r=this,s=this.core,u=e.map(function(h){return h.key}),c=e.map(function(h){return h.changes}),d=[];return this._trans("readwrite",function(h){return s.getMany({trans:h,keys:u,cache:"clone"}).then(function(p){var m=[],y=[];e.forEach(function(g,R){var v=g.key,C=g.changes,_=p[R];if(_){for(var w=0,E=Object.keys(C);w<E.length;w++){var x=E[w],I=C[x];if(x===r.schema.primKey.keyPath){if(X(I,v)!==0)throw new q.Constraint("Cannot update primary key in bulkUpdate()")}else Re(_,x,I)}d.push(R),m.push(v),y.push(_)}});var S=m.length;return s.mutate({trans:h,type:"put",keys:m,values:y,updates:{keys:u,changeSpecs:c}}).then(function(g){var R=g.numFailures,v=g.failures;if(R===0)return S;for(var C=0,_=Object.keys(v);C<_.length;C++){var w,E=_[C],x=d[Number(E)];x!=null&&(w=v[E],delete v[E],v[x]=w)}throw new Ut("".concat(r.name,".bulkUpdate(): ").concat(R," of ").concat(S," operations failed"),v)})})})},ie.prototype.bulkDelete=function(e){var r=this,s=e.length;return this._trans("readwrite",function(u){return r.core.mutate({trans:u,type:"delete",keys:e})}).then(function(h){var c=h.numFailures,d=h.lastResult,h=h.failures;if(c===0)return d;throw new Ut("".concat(r.name,".bulkDelete(): ").concat(c," of ").concat(s," operations failed"),h)})},ie);function ie(){}function fn(e){function r(h,p){if(p){for(var m=arguments.length,y=new Array(m-1);--m;)y[m-1]=arguments[m];return s[h].subscribe.apply(null,y),e}if(typeof h=="string")return s[h]}var s={};r.addEventType=d;for(var u=1,c=arguments.length;u<c;++u)d(arguments[u]);return r;function d(h,p,m){if(typeof h!="object"){var y;p=p||Qu;var S={subscribers:[],fire:m=m||te,subscribe:function(g){S.subscribers.indexOf(g)===-1&&(S.subscribers.push(g),S.fire=p(S.fire,g))},unsubscribe:function(g){S.subscribers=S.subscribers.filter(function(R){return R!==g}),S.fire=S.subscribers.reduce(p,m)}};return s[h]=r[h]=S}a(y=h).forEach(function(g){var R=y[g];if(l(R))d(g,y[g][0],y[g][1]);else{if(R!=="asap")throw new q.InvalidArgument("Invalid event config");var v=d(g,un,function(){for(var C=arguments.length,_=new Array(C);C--;)_[C]=arguments[C];v.subscribers.forEach(function(w){gt(function(){w.apply(null,_)})})})}})}}function pn(e,r){return he(r).from({prototype:e}),r}function qt(e,r){return!(e.filter||e.algorithm||e.or)&&(r?e.justLimit:!e.replayFilter)}function Ci(e,r){e.filter=Rt(e.filter,r)}function Si(e,r,s){var u=e.replayFilter;e.replayFilter=u?function(){return Rt(u(),r())}:r,e.justLimit=s&&!u}function lr(e,r){if(e.isPrimKey)return r.primaryKey;var s=r.getIndexByKeyPath(e.index);if(!s)throw new q.Schema("KeyPath "+e.index+" on object store "+r.name+" is not indexed");return s}function Ps(e,r,s){var u=lr(e,r.schema);return r.openCursor({trans:s,values:!e.keysOnly,reverse:e.dir==="prev",unique:!!e.unique,query:{index:u,range:e.range}})}function dr(e,r,s,u){var c=e.replayFilter?Rt(e.filter,e.replayFilter()):e.filter;if(e.or){var d={},h=function(p,m,y){var S,g;c&&!c(m,y,function(R){return m.stop(R)},function(R){return m.fail(R)})||((g=""+(S=m.primaryKey))=="[object ArrayBuffer]"&&(g=""+new Uint8Array(S)),A(d,g)||(d[g]=!0,r(p,m,y)))};return Promise.all([e.or._iterate(h,s),js(Ps(e,u,s),e.algorithm,h,!e.keysOnly&&e.valueMapper)])}return js(Ps(e,u,s),Rt(e.algorithm,c),r,!e.keysOnly&&e.valueMapper)}function js(e,r,s,u){var c=oe(u?function(d,h,p){return s(u(d),h,p)}:s);return e.then(function(d){if(d)return d.start(function(){var h=function(){return d.continue()};r&&!r(d,function(p){return h=p},function(p){d.stop(p),h=te},function(p){d.fail(p),h=te})||c(d.value,d,function(p){return h=p}),h()})})}var Ge=Symbol(),gn=(Ns.prototype.execute=function(e){if(this.add!==void 0){var r=this.add;if(l(r))return t(t([],l(e)?e:[],!0),r,!0).sort();if(typeof r=="number")return(Number(e)||0)+r;if(typeof r=="bigint")try{return BigInt(e)+r}catch{return BigInt(0)+r}throw new TypeError("Invalid term ".concat(r))}if(this.remove!==void 0){var s=this.remove;if(l(s))return l(e)?e.filter(function(u){return!s.includes(u)}).sort():[];if(typeof s=="number")return Number(e)-s;if(typeof s=="bigint")try{return BigInt(e)-s}catch{return BigInt(0)-s}throw new TypeError("Invalid subtrahend ".concat(s))}return r=(r=this.replacePrefix)===null||r===void 0?void 0:r[0],r&&typeof e=="string"&&e.startsWith(r)?this.replacePrefix[1]+e.substring(r.length):e},Ns);function Ns(e){Object.assign(this,e)}var nc=(J.prototype._read=function(e,r){var s=this._ctx;return s.error?s.table._trans(null,se.bind(null,s.error)):s.table._trans("readonly",e).then(r)},J.prototype._write=function(e){var r=this._ctx;return r.error?r.table._trans(null,se.bind(null,r.error)):r.table._trans("readwrite",e,"locked")},J.prototype._addAlgorithm=function(e){var r=this._ctx;r.algorithm=Rt(r.algorithm,e)},J.prototype._iterate=function(e,r){return dr(this._ctx,e,r,this._ctx.table.core)},J.prototype.clone=function(e){var r=Object.create(this.constructor.prototype),s=Object.create(this._ctx);return e&&f(s,e),r._ctx=s,r},J.prototype.raw=function(){return this._ctx.valueMapper=null,this},J.prototype.each=function(e){var r=this._ctx;return this._read(function(s){return dr(r,e,s,r.table.core)})},J.prototype.count=function(e){var r=this;return this._read(function(s){var u=r._ctx,c=u.table.core;if(qt(u,!0))return c.count({trans:s,query:{index:lr(u,c.schema),range:u.range}}).then(function(h){return Math.min(h,u.limit)});var d=0;return dr(u,function(){return++d,!1},s,c).then(function(){return d})}).then(e)},J.prototype.sortBy=function(e,r){var s=e.split(".").reverse(),u=s[0],c=s.length-1;function d(m,y){return y?d(m[s[y]],y-1):m[u]}var h=this._ctx.dir==="next"?1:-1;function p(m,y){return X(d(m,c),d(y,c))*h}return this.toArray(function(m){return m.sort(p)}).then(r)},J.prototype.toArray=function(e){var r=this;return this._read(function(s){var u=r._ctx;if(u.dir==="next"&&qt(u,!0)&&0<u.limit){var c=u.valueMapper,d=lr(u,u.table.core.schema);return u.table.core.query({trans:s,limit:u.limit,values:!0,query:{index:d,range:u.range}}).then(function(p){return p=p.result,c?p.map(c):p})}var h=[];return dr(u,function(p){return h.push(p)},s,u.table.core).then(function(){return h})},e)},J.prototype.offset=function(e){var r=this._ctx;return e<=0||(r.offset+=e,qt(r)?Si(r,function(){var s=e;return function(u,c){return s===0||(s===1?--s:c(function(){u.advance(s),s=0}),!1)}}):Si(r,function(){var s=e;return function(){return--s<0}})),this},J.prototype.limit=function(e){return this._ctx.limit=Math.min(this._ctx.limit,e),Si(this._ctx,function(){var r=e;return function(s,u,c){return--r<=0&&u(c),0<=r}},!0),this},J.prototype.until=function(e,r){return Ci(this._ctx,function(s,u,c){return!e(s.value)||(u(c),r)}),this},J.prototype.first=function(e){return this.limit(1).toArray(function(r){return r[0]}).then(e)},J.prototype.last=function(e){return this.reverse().first(e)},J.prototype.filter=function(e){var r;return Ci(this._ctx,function(s){return e(s.value)}),(r=this._ctx).isMatch=Rt(r.isMatch,e),this},J.prototype.and=function(e){return this.filter(e)},J.prototype.or=function(e){return new this.db.WhereClause(this._ctx.table,e,this)},J.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},J.prototype.desc=function(){return this.reverse()},J.prototype.eachKey=function(e){var r=this._ctx;return r.keysOnly=!r.isMatch,this.each(function(s,u){e(u.key,u)})},J.prototype.eachUniqueKey=function(e){return this._ctx.unique="unique",this.eachKey(e)},J.prototype.eachPrimaryKey=function(e){var r=this._ctx;return r.keysOnly=!r.isMatch,this.each(function(s,u){e(u.primaryKey,u)})},J.prototype.keys=function(e){var r=this._ctx;r.keysOnly=!r.isMatch;var s=[];return this.each(function(u,c){s.push(c.key)}).then(function(){return s}).then(e)},J.prototype.primaryKeys=function(e){var r=this._ctx;if(r.dir==="next"&&qt(r,!0)&&0<r.limit)return this._read(function(u){var c=lr(r,r.table.core.schema);return r.table.core.query({trans:u,values:!1,limit:r.limit,query:{index:c,range:r.range}})}).then(function(u){return u.result}).then(e);r.keysOnly=!r.isMatch;var s=[];return this.each(function(u,c){s.push(c.primaryKey)}).then(function(){return s}).then(e)},J.prototype.uniqueKeys=function(e){return this._ctx.unique="unique",this.keys(e)},J.prototype.firstKey=function(e){return this.limit(1).keys(function(r){return r[0]}).then(e)},J.prototype.lastKey=function(e){return this.reverse().firstKey(e)},J.prototype.distinct=function(){var e=this._ctx,e=e.index&&e.table.schema.idxByName[e.index];if(!e||!e.multi)return this;var r={};return Ci(this._ctx,function(c){var u=c.primaryKey.toString(),c=A(r,u);return r[u]=!0,!c}),this},J.prototype.modify=function(e){var r=this,s=this._ctx;return this._write(function(u){var c,d,h;h=typeof e=="function"?e:(c=a(e),d=c.length,function(w){for(var E=!1,x=0;x<d;++x){var I=c[x],O=e[I],D=He(w,I);O instanceof gn?(Re(w,I,O.execute(D)),E=!0):D!==O&&(Re(w,I,O),E=!0)}return E});var p=s.table.core,g=p.schema.primaryKey,m=g.outbound,y=g.extractKey,S=200,g=r.db._options.modifyChunkSize;g&&(S=typeof g=="object"?g[p.name]||g["*"]||200:g);function R(w,I){var x=I.failures,I=I.numFailures;C+=w-I;for(var O=0,D=a(x);O<D.length;O++){var j=D[O];v.push(x[j])}}var v=[],C=0,_=[];return r.clone().primaryKeys().then(function(w){function E(I){var O=Math.min(S,w.length-I);return p.getMany({trans:u,keys:w.slice(I,I+O),cache:"immutable"}).then(function(D){for(var j=[],T=[],M=m?[]:null,N=[],P=0;P<O;++P){var L=D[P],V={value:mt(L),primKey:w[I+P]};h.call(V,V.value,V)!==!1&&(V.value==null?N.push(w[I+P]):m||X(y(L),y(V.value))===0?(T.push(V.value),m&&M.push(w[I+P])):(N.push(w[I+P]),j.push(V.value)))}return Promise.resolve(0<j.length&&p.mutate({trans:u,type:"add",values:j}).then(function(Q){for(var Z in Q.failures)N.splice(parseInt(Z),1);R(j.length,Q)})).then(function(){return(0<T.length||x&&typeof e=="object")&&p.mutate({trans:u,type:"put",keys:M,values:T,criteria:x,changeSpec:typeof e!="function"&&e,isAdditionalChunk:0<I}).then(function(Q){return R(T.length,Q)})}).then(function(){return(0<N.length||x&&e===_i)&&p.mutate({trans:u,type:"delete",keys:N,criteria:x,isAdditionalChunk:0<I}).then(function(Q){return R(N.length,Q)})}).then(function(){return w.length>I+O&&E(I+S)})})}var x=qt(s)&&s.limit===1/0&&(typeof e!="function"||e===_i)&&{index:s.index,range:s.range};return E(0).then(function(){if(0<v.length)throw new Xn("Error modifying one or more objects",v,C,_);return w.length})})})},J.prototype.delete=function(){var e=this._ctx,r=e.range;return qt(e)&&(e.isPrimKey||r.type===3)?this._write(function(s){var u=e.table.core.schema.primaryKey,c=r;return e.table.core.count({trans:s,query:{index:u,range:c}}).then(function(d){return e.table.core.mutate({trans:s,type:"deleteRange",range:c}).then(function(h){var p=h.failures;if(h.lastResult,h.results,h=h.numFailures,h)throw new Xn("Could not delete some values",Object.keys(p).map(function(m){return p[m]}),d-h);return d-h})})}):this.modify(_i)},J);function J(){}var _i=function(e,r){return r.value=null};function rc(e,r){return e<r?-1:e===r?0:1}function ic(e,r){return r<e?-1:e===r?0:1}function ke(e,r,s){return e=e instanceof Ls?new e.Collection(e):e,e._ctx.error=new(s||TypeError)(r),e}function Kt(e){return new e.Collection(e,function(){return Us("")}).limit(0)}function hr(e,r,s,u){var c,d,h,p,m,y,S,g=s.length;if(!s.every(function(C){return typeof C=="string"}))return ke(e,Is);function R(C){c=C==="next"?function(w){return w.toUpperCase()}:function(w){return w.toLowerCase()},d=C==="next"?function(w){return w.toLowerCase()}:function(w){return w.toUpperCase()},h=C==="next"?rc:ic;var _=s.map(function(w){return{lower:d(w),upper:c(w)}}).sort(function(w,E){return h(w.lower,E.lower)});p=_.map(function(w){return w.upper}),m=_.map(function(w){return w.lower}),S=(y=C)==="next"?"":u}R("next"),e=new e.Collection(e,function(){return ot(p[0],m[g-1]+u)}),e._ondirectionchange=function(C){R(C)};var v=0;return e._addAlgorithm(function(C,_,w){var E=C.key;if(typeof E!="string")return!1;var x=d(E);if(r(x,m,v))return!0;for(var I=null,O=v;O<g;++O){var D=function(j,T,M,N,P,L){for(var V=Math.min(j.length,N.length),Q=-1,Z=0;Z<V;++Z){var Ee=T[Z];if(Ee!==N[Z])return P(j[Z],M[Z])<0?j.substr(0,Z)+M[Z]+M.substr(Z+1):P(j[Z],N[Z])<0?j.substr(0,Z)+N[Z]+M.substr(Z+1):0<=Q?j.substr(0,Q)+T[Q]+M.substr(Q+1):null;P(j[Z],Ee)<0&&(Q=Z)}return V<N.length&&L==="next"?j+M.substr(j.length):V<j.length&&L==="prev"?j.substr(0,M.length):Q<0?null:j.substr(0,Q)+N[Q]+M.substr(Q+1)}(E,x,p[O],m[O],h,y);D===null&&I===null?v=O+1:(I===null||0<h(I,D))&&(I=D)}return _(I!==null?function(){C.continue(I+S)}:w),!1}),e}function ot(e,r,s,u){return{type:2,lower:e,upper:r,lowerOpen:s,upperOpen:u}}function Us(e){return{type:1,lower:e,upper:e}}var Ls=(Object.defineProperty(de.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),de.prototype.between=function(e,r,s,u){s=s!==!1,u=u===!0;try{return 0<this._cmp(e,r)||this._cmp(e,r)===0&&(s||u)&&(!s||!u)?Kt(this):new this.Collection(this,function(){return ot(e,r,!s,!u)})}catch{return ke(this,We)}},de.prototype.equals=function(e){return e==null?ke(this,We):new this.Collection(this,function(){return Us(e)})},de.prototype.above=function(e){return e==null?ke(this,We):new this.Collection(this,function(){return ot(e,void 0,!0)})},de.prototype.aboveOrEqual=function(e){return e==null?ke(this,We):new this.Collection(this,function(){return ot(e,void 0,!1)})},de.prototype.below=function(e){return e==null?ke(this,We):new this.Collection(this,function(){return ot(void 0,e,!1,!0)})},de.prototype.belowOrEqual=function(e){return e==null?ke(this,We):new this.Collection(this,function(){return ot(void 0,e)})},de.prototype.startsWith=function(e){return typeof e!="string"?ke(this,Is):this.between(e,e+_t,!0,!0)},de.prototype.startsWithIgnoreCase=function(e){return e===""?this.startsWith(e):hr(this,function(r,s){return r.indexOf(s[0])===0},[e],_t)},de.prototype.equalsIgnoreCase=function(e){return hr(this,function(r,s){return r===s[0]},[e],"")},de.prototype.anyOfIgnoreCase=function(){var e=Ve.apply(jt,arguments);return e.length===0?Kt(this):hr(this,function(r,s){return s.indexOf(r)!==-1},e,"")},de.prototype.startsWithAnyOfIgnoreCase=function(){var e=Ve.apply(jt,arguments);return e.length===0?Kt(this):hr(this,function(r,s){return s.some(function(u){return r.indexOf(u)===0})},e,_t)},de.prototype.anyOf=function(){var e=this,r=Ve.apply(jt,arguments),s=this._cmp;try{r.sort(s)}catch{return ke(this,We)}if(r.length===0)return Kt(this);var u=new this.Collection(this,function(){return ot(r[0],r[r.length-1])});u._ondirectionchange=function(d){s=d==="next"?e._ascending:e._descending,r.sort(s)};var c=0;return u._addAlgorithm(function(d,h,p){for(var m=d.key;0<s(m,r[c]);)if(++c===r.length)return h(p),!1;return s(m,r[c])===0||(h(function(){d.continue(r[c])}),!1)}),u},de.prototype.notEqual=function(e){return this.inAnyRange([[-1/0,e],[e,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},de.prototype.noneOf=function(){var e=Ve.apply(jt,arguments);if(e.length===0)return new this.Collection(this);try{e.sort(this._ascending)}catch{return ke(this,We)}var r=e.reduce(function(s,u){return s?s.concat([[s[s.length-1][1],u]]):[[-1/0,u]]},null);return r.push([e[e.length-1],this.db._maxKey]),this.inAnyRange(r,{includeLowers:!1,includeUppers:!1})},de.prototype.inAnyRange=function(E,r){var s=this,u=this._cmp,c=this._ascending,d=this._descending,h=this._min,p=this._max;if(E.length===0)return Kt(this);if(!E.every(function(x){return x[0]!==void 0&&x[1]!==void 0&&c(x[0],x[1])<=0}))return ke(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",q.InvalidArgument);var m=!r||r.includeLowers!==!1,y=r&&r.includeUppers===!0,S,g=c;function R(x,I){return g(x[0],I[0])}try{(S=E.reduce(function(x,I){for(var O=0,D=x.length;O<D;++O){var j=x[O];if(u(I[0],j[1])<0&&0<u(I[1],j[0])){j[0]=h(j[0],I[0]),j[1]=p(j[1],I[1]);break}}return O===D&&x.push(I),x},[])).sort(R)}catch{return ke(this,We)}var v=0,C=y?function(x){return 0<c(x,S[v][1])}:function(x){return 0<=c(x,S[v][1])},_=m?function(x){return 0<d(x,S[v][0])}:function(x){return 0<=d(x,S[v][0])},w=C,E=new this.Collection(this,function(){return ot(S[0][0],S[S.length-1][1],!m,!y)});return E._ondirectionchange=function(x){g=x==="next"?(w=C,c):(w=_,d),S.sort(R)},E._addAlgorithm(function(x,I,O){for(var D,j=x.key;w(j);)if(++v===S.length)return I(O),!1;return!C(D=j)&&!_(D)||(s._cmp(j,S[v][1])===0||s._cmp(j,S[v][0])===0||I(function(){g===c?x.continue(S[v][0]):x.continue(S[v][1])}),!1)}),E},de.prototype.startsWithAnyOf=function(){var e=Ve.apply(jt,arguments);return e.every(function(r){return typeof r=="string"})?e.length===0?Kt(this):this.inAnyRange(e.map(function(r){return[r,r+_t]})):ke(this,"startsWithAnyOf() only works with strings")},de);function de(){}function $e(e){return oe(function(r){return mn(r),e(r.target.error),!1})}function mn(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault()}var vn="storagemutated",Ri="x-storagemutated-1",st=fn(null,vn),oc=(Be.prototype._lock=function(){return pt(!$.global),++this._reculock,this._reculock!==1||$.global||($.lockOwnerFor=this),this},Be.prototype._unlock=function(){if(pt(!$.global),--this._reculock==0)for($.global||($.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var e=this._blockedFuncs.shift();try{St(e[1],e[0])}catch{}}return this},Be.prototype._locked=function(){return this._reculock&&$.lockOwnerFor!==this},Be.prototype.create=function(e){var r=this;if(!this.mode)return this;var s=this.db.idbdb,u=this.db._state.dbOpenError;if(pt(!this.idbtrans),!e&&!s)switch(u&&u.name){case"DatabaseClosedError":throw new q.DatabaseClosed(u);case"MissingAPIError":throw new q.MissingAPI(u.message,u);default:throw new q.OpenFailed(u)}if(!this.active)throw new q.TransactionInactive;return pt(this._completion._state===null),(e=this.idbtrans=e||(this.db.core||s).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=oe(function(c){mn(c),r._reject(e.error)}),e.onabort=oe(function(c){mn(c),r.active&&r._reject(new q.Abort(e.error)),r.active=!1,r.on("abort").fire(c)}),e.oncomplete=oe(function(){r.active=!1,r._resolve(),"mutatedParts"in e&&st.storagemutated.fire(e.mutatedParts)}),this},Be.prototype._promise=function(e,r,s){var u=this;if(e==="readwrite"&&this.mode!=="readwrite")return se(new q.ReadOnly("Transaction is readonly"));if(!this.active)return se(new q.TransactionInactive);if(this._locked())return new U(function(d,h){u._blockedFuncs.push([function(){u._promise(e,r,s).then(d,h)},$])});if(s)return nt(function(){var d=new U(function(h,p){u._lock();var m=r(h,p,u);m&&m.then&&m.then(h,p)});return d.finally(function(){return u._unlock()}),d._lib=!0,d});var c=new U(function(d,h){var p=r(d,h,u);p&&p.then&&p.then(d,h)});return c._lib=!0,c},Be.prototype._root=function(){return this.parent?this.parent._root():this},Be.prototype.waitFor=function(e){var r,s=this._root(),u=U.resolve(e);s._waitingFor?s._waitingFor=s._waitingFor.then(function(){return u}):(s._waitingFor=u,s._waitingQueue=[],r=s.idbtrans.objectStore(s.storeNames[0]),function d(){for(++s._spinCount;s._waitingQueue.length;)s._waitingQueue.shift()();s._waitingFor&&(r.get(-1/0).onsuccess=d)}());var c=s._waitingFor;return new U(function(d,h){u.then(function(p){return s._waitingQueue.push(oe(d.bind(null,p)))},function(p){return s._waitingQueue.push(oe(h.bind(null,p)))}).finally(function(){s._waitingFor===c&&(s._waitingFor=null)})})},Be.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new q.Abort))},Be.prototype.table=function(e){var r=this._memoizedTables||(this._memoizedTables={});if(A(r,e))return r[e];var s=this.schema[e];if(!s)throw new q.NotFound("Table "+e+" not part of transaction");return s=new this.db.Table(e,s,this),s.core=this.db.core.table(e),r[e]=s},Be);function Be(){}function ki(e,r,s,u,c,d,h){return{name:e,keyPath:r,unique:s,multi:u,auto:c,compound:d,src:(s&&!h?"&":"")+(u?"*":"")+(c?"++":"")+Fs(r)}}function Fs(e){return typeof e=="string"?e:e?"["+[].join.call(e,"+")+"]":""}function Ei(e,r,s){return{name:e,primKey:r,indexes:s,mappedClass:null,idxByName:(u=function(c){return[c.name,c]},s.reduce(function(c,d,h){return h=u(d,h),h&&(c[h[0]]=h[1]),c},{}))};var u}var yn=function(e){try{return e.only([[]]),yn=function(){return[[]]},[[]]}catch{return yn=function(){return _t},_t}};function xi(e){return e==null?function(){}:typeof e=="string"?(r=e).split(".").length===1?function(s){return s[r]}:function(s){return He(s,r)}:function(s){return He(s,e)};var r}function $s(e){return[].slice.call(e)}var sc=0;function bn(e){return e==null?":id":typeof e=="string"?e:"[".concat(e.join("+"),"]")}function ac(e,r,m){function u(w){if(w.type===3)return null;if(w.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var v=w.lower,C=w.upper,_=w.lowerOpen,w=w.upperOpen;return v===void 0?C===void 0?null:r.upperBound(C,!!w):C===void 0?r.lowerBound(v,!!_):r.bound(v,C,!!_,!!w)}function c(R){var v,C=R.name;return{name:C,schema:R,mutate:function(_){var w=_.trans,E=_.type,x=_.keys,I=_.values,O=_.range;return new Promise(function(D,j){D=oe(D);var T=w.objectStore(C),M=T.keyPath==null,N=E==="put"||E==="add";if(!N&&E!=="delete"&&E!=="deleteRange")throw new Error("Invalid operation type: "+E);var P,L=(x||I||{length:1}).length;if(x&&I&&x.length!==I.length)throw new Error("Given keys array must have same length as given values array.");if(L===0)return D({numFailures:0,failures:{},results:[],lastResult:void 0});function V(Ce){++Ee,mn(Ce)}var Q=[],Z=[],Ee=0;if(E==="deleteRange"){if(O.type===4)return D({numFailures:Ee,failures:Z,results:[],lastResult:void 0});O.type===3?Q.push(P=T.clear()):Q.push(P=T.delete(u(O)))}else{var M=N?M?[I,x]:[I,null]:[x,null],z=M[0],ve=M[1];if(N)for(var ye=0;ye<L;++ye)Q.push(P=ve&&ve[ye]!==void 0?T[E](z[ye],ve[ye]):T[E](z[ye])),P.onerror=V;else for(ye=0;ye<L;++ye)Q.push(P=T[E](z[ye])),P.onerror=V}function kr(Ce){Ce=Ce.target.result,Q.forEach(function(xt,Hi){return xt.error!=null&&(Z[Hi]=xt.error)}),D({numFailures:Ee,failures:Z,results:E==="delete"?x:Q.map(function(xt){return xt.result}),lastResult:Ce})}P.onerror=function(Ce){V(Ce),kr(Ce)},P.onsuccess=kr})},getMany:function(_){var w=_.trans,E=_.keys;return new Promise(function(x,I){x=oe(x);for(var O,D=w.objectStore(C),j=E.length,T=new Array(j),M=0,N=0,P=function(Q){Q=Q.target,T[Q._pos]=Q.result,++N===M&&x(T)},L=$e(I),V=0;V<j;++V)E[V]!=null&&((O=D.get(E[V]))._pos=V,O.onsuccess=P,O.onerror=L,++M);M===0&&x(T)})},get:function(_){var w=_.trans,E=_.key;return new Promise(function(x,I){x=oe(x);var O=w.objectStore(C).get(E);O.onsuccess=function(D){return x(D.target.result)},O.onerror=$e(I)})},query:(v=y,function(_){return new Promise(function(w,E){w=oe(w);var x,I,O,M=_.trans,D=_.values,j=_.limit,P=_.query,T=j===1/0?void 0:j,N=P.index,P=P.range,M=M.objectStore(C),N=N.isPrimaryKey?M:M.index(N.name),P=u(P);if(j===0)return w({result:[]});v?((T=D?N.getAll(P,T):N.getAllKeys(P,T)).onsuccess=function(L){return w({result:L.target.result})},T.onerror=$e(E)):(x=0,I=!D&&"openKeyCursor"in N?N.openKeyCursor(P):N.openCursor(P),O=[],I.onsuccess=function(L){var V=I.result;return V?(O.push(D?V.value:V.primaryKey),++x===j?w({result:O}):void V.continue()):w({result:O})},I.onerror=$e(E))})}),openCursor:function(_){var w=_.trans,E=_.values,x=_.query,I=_.reverse,O=_.unique;return new Promise(function(D,j){D=oe(D);var N=x.index,T=x.range,M=w.objectStore(C),M=N.isPrimaryKey?M:M.index(N.name),N=I?O?"prevunique":"prev":O?"nextunique":"next",P=!E&&"openKeyCursor"in M?M.openKeyCursor(u(T),N):M.openCursor(u(T),N);P.onerror=$e(j),P.onsuccess=oe(function(L){var V,Q,Z,Ee,z=P.result;z?(z.___id=++sc,z.done=!1,V=z.continue.bind(z),Q=(Q=z.continuePrimaryKey)&&Q.bind(z),Z=z.advance.bind(z),Ee=function(){throw new Error("Cursor not stopped")},z.trans=w,z.stop=z.continue=z.continuePrimaryKey=z.advance=function(){throw new Error("Cursor not started")},z.fail=oe(j),z.next=function(){var ve=this,ye=1;return this.start(function(){return ye--?ve.continue():ve.stop()}).then(function(){return ve})},z.start=function(ve){function ye(){if(P.result)try{ve()}catch(Ce){z.fail(Ce)}else z.done=!0,z.start=function(){throw new Error("Cursor behind last entry")},z.stop()}var kr=new Promise(function(Ce,xt){Ce=oe(Ce),P.onerror=$e(xt),z.fail=xt,z.stop=function(Hi){z.stop=z.continue=z.continuePrimaryKey=z.advance=Ee,Ce(Hi)}});return P.onsuccess=oe(function(Ce){P.onsuccess=ye,ye()}),z.continue=V,z.continuePrimaryKey=Q,z.advance=Z,ye(),kr},D(z)):D(null)},j)})},count:function(_){var w=_.query,E=_.trans,x=w.index,I=w.range;return new Promise(function(O,D){var j=E.objectStore(C),T=x.isPrimaryKey?j:j.index(x.name),j=u(I),T=j?T.count(j):T.count();T.onsuccess=oe(function(M){return O(M.target.result)}),T.onerror=$e(D)})}}}var d,h,p,S=(h=m,p=$s((d=e).objectStoreNames),{schema:{name:d.name,tables:p.map(function(R){return h.objectStore(R)}).map(function(R){var v=R.keyPath,w=R.autoIncrement,C=l(v),_={},w={name:R.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:v==null,compound:C,keyPath:v,autoIncrement:w,unique:!0,extractKey:xi(v)},indexes:$s(R.indexNames).map(function(E){return R.index(E)}).map(function(O){var x=O.name,I=O.unique,D=O.multiEntry,O=O.keyPath,D={name:x,compound:l(O),keyPath:O,unique:I,multiEntry:D,extractKey:xi(O)};return _[bn(O)]=D}),getIndexByKeyPath:function(E){return _[bn(E)]}};return _[":id"]=w.primaryKey,v!=null&&(_[bn(v)]=w.primaryKey),w})},hasGetAll:0<p.length&&"getAll"in h.objectStore(p[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),m=S.schema,y=S.hasGetAll,S=m.tables.map(c),g={};return S.forEach(function(R){return g[R.name]=R}),{stack:"dbcore",transaction:e.transaction.bind(e),table:function(R){if(!g[R])throw new Error("Table '".concat(R,"' not found"));return g[R]},MIN_KEY:-1/0,MAX_KEY:yn(r),schema:m}}function uc(e,r,s,u){var c=s.IDBKeyRange;return s.indexedDB,{dbcore:(u=ac(r,c,u),e.dbcore.reduce(function(d,h){return h=h.create,n(n({},d),h(d))},u))}}function fr(e,u){var s=u.db,u=uc(e._middlewares,s,e._deps,u);e.core=u.dbcore,e.tables.forEach(function(c){var d=c.name;e.core.schema.tables.some(function(h){return h.name===d})&&(c.core=e.core.table(d),e[d]instanceof e.Table&&(e[d].core=c.core))})}function pr(e,r,s,u){s.forEach(function(c){var d=u[c];r.forEach(function(h){var p=function m(y,S){return fe(y,S)||(y=k(y))&&m(y,S)}(h,c);(!p||"value"in p&&p.value===void 0)&&(h===e.Transaction.prototype||h instanceof e.Transaction?W(h,c,{get:function(){return this.table(c)},set:function(m){B(this,c,{value:m,writable:!0,configurable:!0,enumerable:!0})}}):h[c]=new e.Table(c,d))})})}function Ii(e,r){r.forEach(function(s){for(var u in s)s[u]instanceof e.Table&&delete s[u]})}function cc(e,r){return e._cfg.version-r._cfg.version}function lc(e,r,s,u){var c=e._dbSchema;s.objectStoreNames.contains("$meta")&&!c.$meta&&(c.$meta=Ei("$meta",qs("")[0],[]),e._storeNames.push("$meta"));var d=e._createTransaction("readwrite",e._storeNames,c);d.create(s),d._completion.catch(u);var h=d._reject.bind(d),p=$.transless||$;nt(function(){return $.trans=d,$.transless=p,r!==0?(fr(e,s),y=r,((m=d).storeNames.includes("$meta")?m.table("$meta").get("version").then(function(S){return S??y}):U.resolve(y)).then(function(S){return R=S,v=d,C=s,_=[],S=(g=e)._versions,w=g._dbSchema=mr(0,g.idbdb,C),(S=S.filter(function(E){return E._cfg.version>=R})).length!==0?(S.forEach(function(E){_.push(function(){var x=w,I=E._cfg.dbschema;vr(g,x,C),vr(g,I,C),w=g._dbSchema=I;var O=Oi(x,I);O.add.forEach(function(N){Ai(C,N[0],N[1].primKey,N[1].indexes)}),O.change.forEach(function(N){if(N.recreate)throw new q.Upgrade("Not yet support for changing primary key");var P=C.objectStore(N.name);N.add.forEach(function(L){return gr(P,L)}),N.change.forEach(function(L){P.deleteIndex(L.name),gr(P,L)}),N.del.forEach(function(L){return P.deleteIndex(L)})});var D=E._cfg.contentUpgrade;if(D&&E._cfg.version>R){fr(g,C),v._memoizedTables={};var j=vs(I);O.del.forEach(function(N){j[N]=x[N]}),Ii(g,[g.Transaction.prototype]),pr(g,[g.Transaction.prototype],a(j),j),v.schema=j;var T,M=ui(D);return M&&$t(),O=U.follow(function(){var N;(T=D(v))&&M&&(N=rt.bind(null,null),T.then(N,N))}),T&&typeof T.then=="function"?U.resolve(T):O.then(function(){return T})}}),_.push(function(x){var I,O,D=E._cfg.dbschema;I=D,O=x,[].slice.call(O.db.objectStoreNames).forEach(function(j){return I[j]==null&&O.db.deleteObjectStore(j)}),Ii(g,[g.Transaction.prototype]),pr(g,[g.Transaction.prototype],g._storeNames,g._dbSchema),v.schema=g._dbSchema}),_.push(function(x){g.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(g.idbdb.version/10)===E._cfg.version?(g.idbdb.deleteObjectStore("$meta"),delete g._dbSchema.$meta,g._storeNames=g._storeNames.filter(function(I){return I!=="$meta"})):x.objectStore("$meta").put(E._cfg.version,"version"))})}),function E(){return _.length?U.resolve(_.shift()(v.idbtrans)).then(E):U.resolve()}().then(function(){Bs(w,C)})):U.resolve();var g,R,v,C,_,w}).catch(h)):(a(c).forEach(function(S){Ai(s,S,c[S].primKey,c[S].indexes)}),fr(e,s),void U.follow(function(){return e.on.populate.fire(d)}).catch(h));var m,y})}function dc(e,r){Bs(e._dbSchema,r),r.db.version%10!=0||r.objectStoreNames.contains("$meta")||r.db.createObjectStore("$meta").add(Math.ceil(r.db.version/10-1),"version");var s=mr(0,e.idbdb,r);vr(e,e._dbSchema,r);for(var u=0,c=Oi(s,e._dbSchema).change;u<c.length;u++){var d=function(h){if(h.change.length||h.recreate)return console.warn("Unable to patch indexes of table ".concat(h.name," because it has changes on the type of index or primary key.")),{value:void 0};var p=r.objectStore(h.name);h.add.forEach(function(m){Fe&&console.debug("Dexie upgrade patch: Creating missing index ".concat(h.name,".").concat(m.src)),gr(p,m)})}(c[u]);if(typeof d=="object")return d.value}}function Oi(e,r){var s,u={del:[],add:[],change:[]};for(s in e)r[s]||u.del.push(s);for(s in r){var c=e[s],d=r[s];if(c){var h={name:s,def:d,recreate:!1,del:[],add:[],change:[]};if(""+(c.primKey.keyPath||"")!=""+(d.primKey.keyPath||"")||c.primKey.auto!==d.primKey.auto)h.recreate=!0,u.change.push(h);else{var p=c.idxByName,m=d.idxByName,y=void 0;for(y in p)m[y]||h.del.push(y);for(y in m){var S=p[y],g=m[y];S?S.src!==g.src&&h.change.push(g):h.add.push(g)}(0<h.del.length||0<h.add.length||0<h.change.length)&&u.change.push(h)}}else u.add.push([s,d])}return u}function Ai(e,r,s,u){var c=e.db.createObjectStore(r,s.keyPath?{keyPath:s.keyPath,autoIncrement:s.auto}:{autoIncrement:s.auto});return u.forEach(function(d){return gr(c,d)}),c}function Bs(e,r){a(e).forEach(function(s){r.db.objectStoreNames.contains(s)||(Fe&&console.debug("Dexie: Creating missing table",s),Ai(r,s,e[s].primKey,e[s].indexes))})}function gr(e,r){e.createIndex(r.name,r.keyPath,{unique:r.unique,multiEntry:r.multi})}function mr(e,r,s){var u={};return ge(r.objectStoreNames,0).forEach(function(c){for(var d=s.objectStore(c),h=ki(Fs(y=d.keyPath),y||"",!0,!1,!!d.autoIncrement,y&&typeof y!="string",!0),p=[],m=0;m<d.indexNames.length;++m){var S=d.index(d.indexNames[m]),y=S.keyPath,S=ki(S.name,y,!!S.unique,!!S.multiEntry,!1,y&&typeof y!="string",!1);p.push(S)}u[c]=Ei(c,h,p)}),u}function vr(e,r,s){for(var u=s.db.objectStoreNames,c=0;c<u.length;++c){var d=u[c],h=s.objectStore(d);e._hasGetAll="getAll"in h;for(var p=0;p<h.indexNames.length;++p){var m=h.indexNames[p],y=h.index(m).keyPath,S=typeof y=="string"?y:"["+ge(y).join("+")+"]";!r[d]||(y=r[d].idxByName[S])&&(y.name=m,delete r[d].idxByName[S],r[d].idxByName[m]=y)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&o.WorkerGlobalScope&&o instanceof o.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(e._hasGetAll=!1)}function qs(e){return e.split(",").map(function(r,s){var u=(r=r.trim()).replace(/([&*]|\+\+)/g,""),c=/^\[/.test(u)?u.match(/^\[(.*)\]$/)[1].split("+"):u;return ki(u,c||null,/\&/.test(r),/\*/.test(r),/\+\+/.test(r),l(c),s===0)})}var hc=(yr.prototype._parseStoresSpec=function(e,r){a(e).forEach(function(s){if(e[s]!==null){var u=qs(e[s]),c=u.shift();if(c.unique=!0,c.multi)throw new q.Schema("Primary key cannot be multi-valued");u.forEach(function(d){if(d.auto)throw new q.Schema("Only primary key can be marked as autoIncrement (++)");if(!d.keyPath)throw new q.Schema("Index must have a name and cannot be an empty string")}),r[s]=Ei(s,c,u)}})},yr.prototype.stores=function(s){var r=this.db;this._cfg.storesSource=this._cfg.storesSource?f(this._cfg.storesSource,s):s;var s=r._versions,u={},c={};return s.forEach(function(d){f(u,d._cfg.storesSource),c=d._cfg.dbschema={},d._parseStoresSpec(u,c)}),r._dbSchema=c,Ii(r,[r._allTables,r,r.Transaction.prototype]),pr(r,[r._allTables,r,r.Transaction.prototype,this._cfg.tables],a(c),c),r._storeNames=a(c),this},yr.prototype.upgrade=function(e){return this._cfg.contentUpgrade=li(this._cfg.contentUpgrade||te,e),this},yr);function yr(){}function Di(e,r){var s=e._dbNamesDB;return s||(s=e._dbNamesDB=new Ye(ur,{addons:[],indexedDB:e,IDBKeyRange:r})).version(1).stores({dbnames:"name"}),s.table("dbnames")}function Ti(e){return e&&typeof e.databases=="function"}function Mi(e){return nt(function(){return $.letThrough=!0,e()})}function Pi(e){return!("from"in e)}var me=function(e,r){if(!this){var s=new me;return e&&"d"in e&&f(s,e),s}f(this,arguments.length?{d:1,from:e,to:1<arguments.length?r:e}:{d:0})};function wn(e,r,s){var u=X(r,s);if(!isNaN(u)){if(0<u)throw RangeError();if(Pi(e))return f(e,{from:r,to:s,d:1});var c=e.l,u=e.r;if(X(s,e.from)<0)return c?wn(c,r,s):e.l={from:r,to:s,d:1,l:null,r:null},zs(e);if(0<X(r,e.to))return u?wn(u,r,s):e.r={from:r,to:s,d:1,l:null,r:null},zs(e);X(r,e.from)<0&&(e.from=r,e.l=null,e.d=u?u.d+1:1),0<X(s,e.to)&&(e.to=s,e.r=null,e.d=e.l?e.l.d+1:1),s=!e.r,c&&!e.l&&Cn(e,c),u&&s&&Cn(e,u)}}function Cn(e,r){Pi(r)||function s(u,m){var d=m.from,h=m.to,p=m.l,m=m.r;wn(u,d,h),p&&s(u,p),m&&s(u,m)}(e,r)}function Ks(e,r){var s=br(r),u=s.next();if(u.done)return!1;for(var c=u.value,d=br(e),h=d.next(c.from),p=h.value;!u.done&&!h.done;){if(X(p.from,c.to)<=0&&0<=X(p.to,c.from))return!0;X(c.from,p.from)<0?c=(u=s.next(p.from)).value:p=(h=d.next(c.from)).value}return!1}function br(e){var r=Pi(e)?null:{s:0,n:e};return{next:function(s){for(var u=0<arguments.length;r;)switch(r.s){case 0:if(r.s=1,u)for(;r.n.l&&X(s,r.n.from)<0;)r={up:r,n:r.n.l,s:1};else for(;r.n.l;)r={up:r,n:r.n.l,s:1};case 1:if(r.s=2,!u||X(s,r.n.to)<=0)return{value:r.n,done:!1};case 2:if(r.n.r){r.s=3,r={up:r,n:r.n.r,s:0};continue}case 3:r=r.up}return{done:!0}}}}function zs(e){var r,s,u=(((r=e.r)===null||r===void 0?void 0:r.d)||0)-(((s=e.l)===null||s===void 0?void 0:s.d)||0),c=1<u?"r":u<-1?"l":"";c&&(r=c=="r"?"l":"r",s=n({},e),u=e[c],e.from=u.from,e.to=u.to,e[c]=u[c],s[c]=u[r],(e[r]=s).d=Hs(s)),e.d=Hs(e)}function Hs(s){var r=s.r,s=s.l;return(r?s?Math.max(r.d,s.d):r.d:s?s.d:0)+1}function wr(e,r){return a(r).forEach(function(s){e[s]?Cn(e[s],r[s]):e[s]=function u(c){var d,h,p={};for(d in c)A(c,d)&&(h=c[d],p[d]=!h||typeof h!="object"||bs.has(h.constructor)?h:u(h));return p}(r[s])}),e}function ji(e,r){return e.all||r.all||Object.keys(e).some(function(s){return r[s]&&Ks(r[s],e[s])})}F(me.prototype,((Oe={add:function(e){return Cn(this,e),this},addKey:function(e){return wn(this,e,e),this},addKeys:function(e){var r=this;return e.forEach(function(s){return wn(r,s,s)}),this},hasKey:function(e){var r=br(this).next(e).value;return r&&X(r.from,e)<=0&&0<=X(r.to,e)}})[ai]=function(){return br(this)},Oe));var kt={},Ni={},Ui=!1;function Cr(e){wr(Ni,e),Ui||(Ui=!0,setTimeout(function(){Ui=!1,Li(Ni,!(Ni={}))},0))}function Li(e,r){r===void 0&&(r=!1);var s=new Set;if(e.all)for(var u=0,c=Object.values(kt);u<c.length;u++)Vs(h=c[u],e,s,r);else for(var d in e){var h,p=/^idb\:\/\/(.*)\/(.*)\//.exec(d);p&&(d=p[1],p=p[2],(h=kt["idb://".concat(d,"/").concat(p)])&&Vs(h,e,s,r))}s.forEach(function(m){return m()})}function Vs(e,r,s,u){for(var c=[],d=0,h=Object.entries(e.queries.query);d<h.length;d++){for(var p=h[d],m=p[0],y=[],S=0,g=p[1];S<g.length;S++){var R=g[S];ji(r,R.obsSet)?R.subscribers.forEach(function(w){return s.add(w)}):u&&y.push(R)}u&&c.push([m,y])}if(u)for(var v=0,C=c;v<C.length;v++){var _=C[v],m=_[0],y=_[1];e.queries.query[m]=y}}function fc(e){var r=e._state,s=e._deps.indexedDB;if(r.isBeingOpened||e.idbdb)return r.dbReadyPromise.then(function(){return r.dbOpenError?se(r.dbOpenError):e});r.isBeingOpened=!0,r.dbOpenError=null,r.openComplete=!1;var u=r.openCanceller,c=Math.round(10*e.verno),d=!1;function h(){if(r.openCanceller!==u)throw new q.DatabaseClosed("db.open() was cancelled")}function p(){return new U(function(R,v){if(h(),!s)throw new q.MissingAPI;var C=e.name,_=r.autoSchema||!c?s.open(C):s.open(C,c);if(!_)throw new q.MissingAPI;_.onerror=$e(v),_.onblocked=oe(e._fireOnBlocked),_.onupgradeneeded=oe(function(w){var E;S=_.transaction,r.autoSchema&&!e._options.allowEmptyDB?(_.onerror=mn,S.abort(),_.result.close(),(E=s.deleteDatabase(C)).onsuccess=E.onerror=oe(function(){v(new q.NoSuchDatabase("Database ".concat(C," doesnt exist")))})):(S.onerror=$e(v),w=w.oldVersion>Math.pow(2,62)?0:w.oldVersion,g=w<1,e.idbdb=_.result,d&&dc(e,S),lc(e,w/10,S,v))},v),_.onsuccess=oe(function(){S=null;var w,E,x,I,O,D=e.idbdb=_.result,j=ge(D.objectStoreNames);if(0<j.length)try{var T=D.transaction((I=j).length===1?I[0]:I,"readonly");if(r.autoSchema)E=D,x=T,(w=e).verno=E.version/10,x=w._dbSchema=mr(0,E,x),w._storeNames=ge(E.objectStoreNames,0),pr(w,[w._allTables],a(x),x);else if(vr(e,e._dbSchema,T),((O=Oi(mr(0,(O=e).idbdb,T),O._dbSchema)).add.length||O.change.some(function(M){return M.add.length||M.change.length}))&&!d)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),D.close(),c=D.version+1,d=!0,R(p());fr(e,T)}catch{}Bt.push(e),D.onversionchange=oe(function(M){r.vcFired=!0,e.on("versionchange").fire(M)}),D.onclose=oe(function(M){e.on("close").fire(M)}),g&&(O=e._deps,T=C,D=O.indexedDB,O=O.IDBKeyRange,Ti(D)||T===ur||Di(D,O).put({name:T}).catch(te)),R()},v)}).catch(function(R){switch(R?.name){case"UnknownError":if(0<r.PR1398_maxLoop)return r.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),p();break;case"VersionError":if(0<c)return c=0,p()}return U.reject(R)})}var m,y=r.dbReadyResolve,S=null,g=!1;return U.race([u,(typeof navigator>"u"?U.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(R){function v(){return indexedDB.databases().finally(R)}m=setInterval(v,100),v()}).finally(function(){return clearInterval(m)}):Promise.resolve()).then(p)]).then(function(){return h(),r.onReadyBeingFired=[],U.resolve(Mi(function(){return e.on.ready.fire(e.vip)})).then(function R(){if(0<r.onReadyBeingFired.length){var v=r.onReadyBeingFired.reduce(li,te);return r.onReadyBeingFired=[],U.resolve(Mi(function(){return v(e.vip)})).then(R)}})}).finally(function(){r.openCanceller===u&&(r.onReadyBeingFired=null,r.isBeingOpened=!1)}).catch(function(R){r.dbOpenError=R;try{S&&S.abort()}catch{}return u===r.openCanceller&&e._close(),se(R)}).finally(function(){r.openComplete=!0,y()}).then(function(){var R;return g&&(R={},e.tables.forEach(function(v){v.schema.indexes.forEach(function(C){C.name&&(R["idb://".concat(e.name,"/").concat(v.name,"/").concat(C.name)]=new me(-1/0,[[[]]]))}),R["idb://".concat(e.name,"/").concat(v.name,"/")]=R["idb://".concat(e.name,"/").concat(v.name,"/:dels")]=new me(-1/0,[[[]]])}),st(vn).fire(R),Li(R,!0)),e})}function Fi(e){function r(d){return e.next(d)}var s=c(r),u=c(function(d){return e.throw(d)});function c(d){return function(m){var p=d(m),m=p.value;return p.done?m:m&&typeof m.then=="function"?m.then(s,u):l(m)?Promise.all(m).then(s,u):s(m)}}return c(r)()}function Sr(e,r,s){for(var u=l(e)?e.slice():[e],c=0;c<s;++c)u.push(r);return u}var pc={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(e){return n(n({},e),{table:function(r){var s=e.table(r),u=s.schema,c={},d=[];function h(g,R,v){var C=bn(g),_=c[C]=c[C]||[],w=g==null?0:typeof g=="string"?1:g.length,E=0<R,E=n(n({},v),{name:E?"".concat(C,"(virtual-from:").concat(v.name,")"):v.name,lowLevelIndex:v,isVirtual:E,keyTail:R,keyLength:w,extractKey:xi(g),unique:!E&&v.unique});return _.push(E),E.isPrimaryKey||d.push(E),1<w&&h(w===2?g[0]:g.slice(0,w-1),R+1,v),_.sort(function(x,I){return x.keyTail-I.keyTail}),E}r=h(u.primaryKey.keyPath,0,u.primaryKey),c[":id"]=[r];for(var p=0,m=u.indexes;p<m.length;p++){var y=m[p];h(y.keyPath,0,y)}function S(g){var R,v=g.query.index;return v.isVirtual?n(n({},g),{query:{index:v.lowLevelIndex,range:(R=g.query.range,v=v.keyTail,{type:R.type===1?2:R.type,lower:Sr(R.lower,R.lowerOpen?e.MAX_KEY:e.MIN_KEY,v),lowerOpen:!0,upper:Sr(R.upper,R.upperOpen?e.MIN_KEY:e.MAX_KEY,v),upperOpen:!0})}}):g}return n(n({},s),{schema:n(n({},u),{primaryKey:r,indexes:d,getIndexByKeyPath:function(g){return(g=c[bn(g)])&&g[0]}}),count:function(g){return s.count(S(g))},query:function(g){return s.query(S(g))},openCursor:function(g){var R=g.query.index,v=R.keyTail,C=R.isVirtual,_=R.keyLength;return C?s.openCursor(S(g)).then(function(E){return E&&w(E)}):s.openCursor(g);function w(E){return Object.create(E,{continue:{value:function(x){x!=null?E.continue(Sr(x,g.reverse?e.MAX_KEY:e.MIN_KEY,v)):g.unique?E.continue(E.key.slice(0,_).concat(g.reverse?e.MIN_KEY:e.MAX_KEY,v)):E.continue()}},continuePrimaryKey:{value:function(x,I){E.continuePrimaryKey(Sr(x,e.MAX_KEY,v),I)}},primaryKey:{get:function(){return E.primaryKey}},key:{get:function(){var x=E.key;return _===1?x[0]:x.slice(0,_)}},value:{get:function(){return E.value}}})}}})}})}};function $i(e,r,s,u){return s=s||{},u=u||"",a(e).forEach(function(c){var d,h,p;A(r,c)?(d=e[c],h=r[c],typeof d=="object"&&typeof h=="object"&&d&&h?(p=si(d))!==si(h)?s[u+c]=r[c]:p==="Object"?$i(d,h,s,u+c+"."):d!==h&&(s[u+c]=r[c]):d!==h&&(s[u+c]=r[c])):s[u+c]=void 0}),a(r).forEach(function(c){A(e,c)||(s[u+c]=r[c])}),s}function Bi(e,r){return r.type==="delete"?r.keys:r.keys||r.values.map(e.extractKey)}var gc={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(e){return n(n({},e),{table:function(r){var s=e.table(r),u=s.schema.primaryKey;return n(n({},s),{mutate:function(c){var d=$.trans,h=d.table(r).hook,p=h.deleting,m=h.creating,y=h.updating;switch(c.type){case"add":if(m.fire===te)break;return d._promise("readwrite",function(){return S(c)},!0);case"put":if(m.fire===te&&y.fire===te)break;return d._promise("readwrite",function(){return S(c)},!0);case"delete":if(p.fire===te)break;return d._promise("readwrite",function(){return S(c)},!0);case"deleteRange":if(p.fire===te)break;return d._promise("readwrite",function(){return function g(R,v,C){return s.query({trans:R,values:!1,query:{index:u,range:v},limit:C}).then(function(_){var w=_.result;return S({type:"delete",keys:w,trans:R}).then(function(E){return 0<E.numFailures?Promise.reject(E.failures[0]):w.length<C?{failures:[],numFailures:0,lastResult:void 0}:g(R,n(n({},v),{lower:w[w.length-1],lowerOpen:!0}),C)})})}(c.trans,c.range,1e4)},!0)}return s.mutate(c);function S(g){var R,v,C,_=$.trans,w=g.keys||Bi(u,g);if(!w)throw new Error("Keys missing");return(g=g.type==="add"||g.type==="put"?n(n({},g),{keys:w}):n({},g)).type!=="delete"&&(g.values=t([],g.values,!0)),g.keys&&(g.keys=t([],g.keys,!0)),R=s,C=w,((v=g).type==="add"?Promise.resolve([]):R.getMany({trans:v.trans,keys:C,cache:"immutable"})).then(function(E){var x=w.map(function(I,O){var D,j,T,M=E[O],N={onerror:null,onsuccess:null};return g.type==="delete"?p.fire.call(N,I,M,_):g.type==="add"||M===void 0?(D=m.fire.call(N,I,g.values[O],_),I==null&&D!=null&&(g.keys[O]=I=D,u.outbound||Re(g.values[O],u.keyPath,I))):(D=$i(M,g.values[O]),(j=y.fire.call(N,D,I,M,_))&&(T=g.values[O],Object.keys(j).forEach(function(P){A(T,P)?T[P]=j[P]:Re(T,P,j[P])}))),N});return s.mutate(g).then(function(I){for(var O=I.failures,D=I.results,j=I.numFailures,I=I.lastResult,T=0;T<w.length;++T){var M=(D||w)[T],N=x[T];M==null?N.onerror&&N.onerror(O[T]):N.onsuccess&&N.onsuccess(g.type==="put"&&E[T]?g.values[T]:M)}return{failures:O,results:D,numFailures:j,lastResult:I}}).catch(function(I){return x.forEach(function(O){return O.onerror&&O.onerror(I)}),Promise.reject(I)})})}}})}})}};function Ws(e,r,s){try{if(!r||r.keys.length<e.length)return null;for(var u=[],c=0,d=0;c<r.keys.length&&d<e.length;++c)X(r.keys[c],e[d])===0&&(u.push(s?mt(r.values[c]):r.values[c]),++d);return u.length===e.length?u:null}catch{return null}}var mc={stack:"dbcore",level:-1,create:function(e){return{table:function(r){var s=e.table(r);return n(n({},s),{getMany:function(u){if(!u.cache)return s.getMany(u);var c=Ws(u.keys,u.trans._cache,u.cache==="clone");return c?U.resolve(c):s.getMany(u).then(function(d){return u.trans._cache={keys:u.keys,values:u.cache==="clone"?mt(d):d},d})},mutate:function(u){return u.type!=="add"&&(u.trans._cache=null),s.mutate(u)}})}}}};function Gs(e,r){return e.trans.mode==="readonly"&&!!e.subscr&&!e.trans.explicit&&e.trans.db._options.cache!=="disabled"&&!r.schema.primaryKey.outbound}function Ys(e,r){switch(e){case"query":return r.values&&!r.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var vc={stack:"dbcore",level:0,name:"Observability",create:function(e){var r=e.schema.name,s=new me(e.MIN_KEY,e.MAX_KEY);return n(n({},e),{transaction:function(u,c,d){if($.subscr&&c!=="readonly")throw new q.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat($.querier));return e.transaction(u,c,d)},table:function(u){var c=e.table(u),d=c.schema,h=d.primaryKey,g=d.indexes,p=h.extractKey,m=h.outbound,y=h.autoIncrement&&g.filter(function(v){return v.compound&&v.keyPath.includes(h.keyPath)}),S=n(n({},c),{mutate:function(v){function C(P){return P="idb://".concat(r,"/").concat(u,"/").concat(P),I[P]||(I[P]=new me)}var _,w,E,x=v.trans,I=v.mutatedParts||(v.mutatedParts={}),O=C(""),D=C(":dels"),j=v.type,N=v.type==="deleteRange"?[v.range]:v.type==="delete"?[v.keys]:v.values.length<50?[Bi(h,v).filter(function(P){return P}),v.values]:[],T=N[0],M=N[1],N=v.trans._cache;return l(T)?(O.addKeys(T),(N=j==="delete"||T.length===M.length?Ws(T,N):null)||D.addKeys(T),(N||M)&&(_=C,w=N,E=M,d.indexes.forEach(function(P){var L=_(P.name||"");function V(Z){return Z!=null?P.extractKey(Z):null}function Q(Z){return P.multiEntry&&l(Z)?Z.forEach(function(Ee){return L.addKey(Ee)}):L.addKey(Z)}(w||E).forEach(function(Z,ve){var z=w&&V(w[ve]),ve=E&&V(E[ve]);X(z,ve)!==0&&(z!=null&&Q(z),ve!=null&&Q(ve))})}))):T?(M={from:(M=T.lower)!==null&&M!==void 0?M:e.MIN_KEY,to:(M=T.upper)!==null&&M!==void 0?M:e.MAX_KEY},D.add(M),O.add(M)):(O.add(s),D.add(s),d.indexes.forEach(function(P){return C(P.name).add(s)})),c.mutate(v).then(function(P){return!T||v.type!=="add"&&v.type!=="put"||(O.addKeys(P.results),y&&y.forEach(function(L){for(var V=v.values.map(function(z){return L.extractKey(z)}),Q=L.keyPath.findIndex(function(z){return z===h.keyPath}),Z=0,Ee=P.results.length;Z<Ee;++Z)V[Z][Q]=P.results[Z];C(L.name).addKeys(V)})),x.mutatedParts=wr(x.mutatedParts||{},I),P})}}),g=function(C){var _=C.query,C=_.index,_=_.range;return[C,new me((C=_.lower)!==null&&C!==void 0?C:e.MIN_KEY,(_=_.upper)!==null&&_!==void 0?_:e.MAX_KEY)]},R={get:function(v){return[h,new me(v.key)]},getMany:function(v){return[h,new me().addKeys(v.keys)]},count:g,query:g,openCursor:g};return a(R).forEach(function(v){S[v]=function(C){var _=$.subscr,w=!!_,E=Gs($,c)&&Ys(v,C)?C.obsSet={}:_;if(w){var x=function(M){return M="idb://".concat(r,"/").concat(u,"/").concat(M),E[M]||(E[M]=new me)},I=x(""),O=x(":dels"),_=R[v](C),w=_[0],_=_[1];if((v==="query"&&w.isPrimaryKey&&!C.values?O:x(w.name||"")).add(_),!w.isPrimaryKey){if(v!=="count"){var D=v==="query"&&m&&C.values&&c.query(n(n({},C),{values:!1}));return c[v].apply(this,arguments).then(function(M){if(v==="query"){if(m&&C.values)return D.then(function(V){return V=V.result,I.addKeys(V),M});var N=C.values?M.result.map(p):M.result;(C.values?I:O).addKeys(N)}else if(v==="openCursor"){var P=M,L=C.values;return P&&Object.create(P,{key:{get:function(){return O.addKey(P.primaryKey),P.key}},primaryKey:{get:function(){var V=P.primaryKey;return O.addKey(V),V}},value:{get:function(){return L&&I.addKey(P.primaryKey),P.value}}})}return M})}O.add(s)}}return c[v].apply(this,arguments)}}),S}})}};function Qs(e,r,s){if(s.numFailures===0)return r;if(r.type==="deleteRange")return null;var u=r.keys?r.keys.length:"values"in r&&r.values?r.values.length:1;return s.numFailures===u?null:(r=n({},r),l(r.keys)&&(r.keys=r.keys.filter(function(c,d){return!(d in s.failures)})),"values"in r&&l(r.values)&&(r.values=r.values.filter(function(c,d){return!(d in s.failures)})),r)}function qi(e,r){return s=e,((u=r).lower===void 0||(u.lowerOpen?0<X(s,u.lower):0<=X(s,u.lower)))&&(e=e,(r=r).upper===void 0||(r.upperOpen?X(e,r.upper)<0:X(e,r.upper)<=0));var s,u}function Zs(e,r,R,u,c,d){if(!R||R.length===0)return e;var h=r.query.index,p=h.multiEntry,m=r.query.range,y=u.schema.primaryKey.extractKey,S=h.extractKey,g=(h.lowLevelIndex||h).extractKey,R=R.reduce(function(v,C){var _=v,w=[];if(C.type==="add"||C.type==="put")for(var E=new me,x=C.values.length-1;0<=x;--x){var I,O=C.values[x],D=y(O);E.hasKey(D)||(I=S(O),(p&&l(I)?I.some(function(P){return qi(P,m)}):qi(I,m))&&(E.addKey(D),w.push(O)))}switch(C.type){case"add":var j=new me().addKeys(r.values?v.map(function(L){return y(L)}):v),_=v.concat(r.values?w.filter(function(L){return L=y(L),!j.hasKey(L)&&(j.addKey(L),!0)}):w.map(function(L){return y(L)}).filter(function(L){return!j.hasKey(L)&&(j.addKey(L),!0)}));break;case"put":var T=new me().addKeys(C.values.map(function(L){return y(L)}));_=v.filter(function(L){return!T.hasKey(r.values?y(L):L)}).concat(r.values?w:w.map(function(L){return y(L)}));break;case"delete":var M=new me().addKeys(C.keys);_=v.filter(function(L){return!M.hasKey(r.values?y(L):L)});break;case"deleteRange":var N=C.range;_=v.filter(function(L){return!qi(y(L),N)})}return _},e);return R===e?e:(R.sort(function(v,C){return X(g(v),g(C))||X(y(v),y(C))}),r.limit&&r.limit<1/0&&(R.length>r.limit?R.length=r.limit:e.length===r.limit&&R.length<r.limit&&(c.dirty=!0)),d?Object.freeze(R):R)}function Xs(e,r){return X(e.lower,r.lower)===0&&X(e.upper,r.upper)===0&&!!e.lowerOpen==!!r.lowerOpen&&!!e.upperOpen==!!r.upperOpen}function yc(e,r){return function(s,u,c,d){if(s===void 0)return u!==void 0?-1:0;if(u===void 0)return 1;if((u=X(s,u))===0){if(c&&d)return 0;if(c)return 1;if(d)return-1}return u}(e.lower,r.lower,e.lowerOpen,r.lowerOpen)<=0&&0<=function(s,u,c,d){if(s===void 0)return u!==void 0?1:0;if(u===void 0)return-1;if((u=X(s,u))===0){if(c&&d)return 0;if(c)return-1;if(d)return 1}return u}(e.upper,r.upper,e.upperOpen,r.upperOpen)}function bc(e,r,s,u){e.subscribers.add(s),u.addEventListener("abort",function(){var c,d;e.subscribers.delete(s),e.subscribers.size===0&&(c=e,d=r,setTimeout(function(){c.subscribers.size===0&&vt(d,c)},3e3))})}var wc={stack:"dbcore",level:0,name:"Cache",create:function(e){var r=e.schema.name;return n(n({},e),{transaction:function(s,u,c){var d,h,p=e.transaction(s,u,c);return u==="readwrite"&&(h=(d=new AbortController).signal,c=function(m){return function(){if(d.abort(),u==="readwrite"){for(var y=new Set,S=0,g=s;S<g.length;S++){var R=g[S],v=kt["idb://".concat(r,"/").concat(R)];if(v){var C=e.table(R),_=v.optimisticOps.filter(function(L){return L.trans===p});if(p._explicit&&m&&p.mutatedParts)for(var w=0,E=Object.values(v.queries.query);w<E.length;w++)for(var x=0,I=(j=E[w]).slice();x<I.length;x++)ji((T=I[x]).obsSet,p.mutatedParts)&&(vt(j,T),T.subscribers.forEach(function(L){return y.add(L)}));else if(0<_.length){v.optimisticOps=v.optimisticOps.filter(function(L){return L.trans!==p});for(var O=0,D=Object.values(v.queries.query);O<D.length;O++)for(var j,T,M,N=0,P=(j=D[O]).slice();N<P.length;N++)(T=P[N]).res!=null&&p.mutatedParts&&(m&&!T.dirty?(M=Object.isFrozen(T.res),M=Zs(T.res,T.req,_,C,T,M),T.dirty?(vt(j,T),T.subscribers.forEach(function(L){return y.add(L)})):M!==T.res&&(T.res=M,T.promise=U.resolve({result:M}))):(T.dirty&&vt(j,T),T.subscribers.forEach(function(L){return y.add(L)})))}}}y.forEach(function(L){return L()})}}},p.addEventListener("abort",c(!1),{signal:h}),p.addEventListener("error",c(!1),{signal:h}),p.addEventListener("complete",c(!0),{signal:h})),p},table:function(s){var u=e.table(s),c=u.schema.primaryKey;return n(n({},u),{mutate:function(d){var h=$.trans;if(c.outbound||h.db._options.cache==="disabled"||h.explicit||h.idbtrans.mode!=="readwrite")return u.mutate(d);var p=kt["idb://".concat(r,"/").concat(s)];return p?(h=u.mutate(d),d.type!=="add"&&d.type!=="put"||!(50<=d.values.length||Bi(c,d).some(function(m){return m==null}))?(p.optimisticOps.push(d),d.mutatedParts&&Cr(d.mutatedParts),h.then(function(m){0<m.numFailures&&(vt(p.optimisticOps,d),(m=Qs(0,d,m))&&p.optimisticOps.push(m),d.mutatedParts&&Cr(d.mutatedParts))}),h.catch(function(){vt(p.optimisticOps,d),d.mutatedParts&&Cr(d.mutatedParts)})):h.then(function(m){var y=Qs(0,n(n({},d),{values:d.values.map(function(S,g){var R;return m.failures[g]?S:(S=(R=c.keyPath)!==null&&R!==void 0&&R.includes(".")?mt(S):n({},S),Re(S,c.keyPath,m.results[g]),S)})}),m);p.optimisticOps.push(y),queueMicrotask(function(){return d.mutatedParts&&Cr(d.mutatedParts)})}),h):u.mutate(d)},query:function(d){if(!Gs($,u)||!Ys("query",d))return u.query(d);var h=((y=$.trans)===null||y===void 0?void 0:y.db._options.cache)==="immutable",g=$,p=g.requery,m=g.signal,y=function(C,_,w,E){var x=kt["idb://".concat(C,"/").concat(_)];if(!x)return[];if(!(_=x.queries[w]))return[null,!1,x,null];var I=_[(E.query?E.query.index.name:null)||""];if(!I)return[null,!1,x,null];switch(w){case"query":var O=I.find(function(D){return D.req.limit===E.limit&&D.req.values===E.values&&Xs(D.req.query.range,E.query.range)});return O?[O,!0,x,I]:[I.find(function(D){return("limit"in D.req?D.req.limit:1/0)>=E.limit&&(!E.values||D.req.values)&&yc(D.req.query.range,E.query.range)}),!1,x,I];case"count":return O=I.find(function(D){return Xs(D.req.query.range,E.query.range)}),[O,!!O,x,I]}}(r,s,"query",d),S=y[0],g=y[1],R=y[2],v=y[3];return S&&g?S.obsSet=d.obsSet:(g=u.query(d).then(function(C){var _=C.result;if(S&&(S.res=_),h){for(var w=0,E=_.length;w<E;++w)Object.freeze(_[w]);Object.freeze(_)}else C.result=mt(_);return C}).catch(function(C){return v&&S&&vt(v,S),Promise.reject(C)}),S={obsSet:d.obsSet,promise:g,subscribers:new Set,type:"query",req:d,dirty:!1},v?v.push(S):(v=[S],(R=R||(kt["idb://".concat(r,"/").concat(s)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[d.query.index.name||""]=v)),bc(S,v,p,m),S.promise.then(function(C){return{result:Zs(C.result,d,R?.optimisticOps,u,S,h)}})}})}})}};function _r(e,r){return new Proxy(e,{get:function(s,u,c){return u==="db"?r:Reflect.get(s,u,c)}})}var Ye=(ae.prototype.version=function(e){if(isNaN(e)||e<.1)throw new q.Type("Given version is not a positive number");if(e=Math.round(10*e)/10,this.idbdb||this._state.isBeingOpened)throw new q.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,e);var r=this._versions,s=r.filter(function(u){return u._cfg.version===e})[0];return s||(s=new this.Version(e),r.push(s),r.sort(cc),s.stores({}),this._state.autoSchema=!1,s)},ae.prototype._whenReady=function(e){var r=this;return this.idbdb&&(this._state.openComplete||$.letThrough||this._vip)?e():new U(function(s,u){if(r._state.openComplete)return u(new q.DatabaseClosed(r._state.dbOpenError));if(!r._state.isBeingOpened){if(!r._state.autoOpen)return void u(new q.DatabaseClosed);r.open().catch(te)}r._state.dbReadyPromise.then(s,u)}).then(e)},ae.prototype.use=function(e){var r=e.stack,s=e.create,u=e.level,c=e.name;return c&&this.unuse({stack:r,name:c}),e=this._middlewares[r]||(this._middlewares[r]=[]),e.push({stack:r,create:s,level:u??10,name:c}),e.sort(function(d,h){return d.level-h.level}),this},ae.prototype.unuse=function(e){var r=e.stack,s=e.name,u=e.create;return r&&this._middlewares[r]&&(this._middlewares[r]=this._middlewares[r].filter(function(c){return u?c.create!==u:!!s&&c.name!==s})),this},ae.prototype.open=function(){var e=this;return St(tt,function(){return fc(e)})},ae.prototype._close=function(){var e=this._state,r=Bt.indexOf(this);if(0<=r&&Bt.splice(r,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}e.isBeingOpened||(e.dbReadyPromise=new U(function(s){e.dbReadyResolve=s}),e.openCanceller=new U(function(s,u){e.cancelOpen=u}))},ae.prototype.close=function(s){var r=(s===void 0?{disableAutoOpen:!0}:s).disableAutoOpen,s=this._state;r?(s.isBeingOpened&&s.cancelOpen(new q.DatabaseClosed),this._close(),s.autoOpen=!1,s.dbOpenError=new q.DatabaseClosed):(this._close(),s.autoOpen=this._options.autoOpen||s.isBeingOpened,s.openComplete=!1,s.dbOpenError=null)},ae.prototype.delete=function(e){var r=this;e===void 0&&(e={disableAutoOpen:!0});var s=0<arguments.length&&typeof arguments[0]!="object",u=this._state;return new U(function(c,d){function h(){r.close(e);var p=r._deps.indexedDB.deleteDatabase(r.name);p.onsuccess=oe(function(){var m,y,S;m=r._deps,y=r.name,S=m.indexedDB,m=m.IDBKeyRange,Ti(S)||y===ur||Di(S,m).delete(y).catch(te),c()}),p.onerror=$e(d),p.onblocked=r._fireOnBlocked}if(s)throw new q.InvalidArgument("Invalid closeOptions argument to db.delete()");u.isBeingOpened?u.dbReadyPromise.then(h):h()})},ae.prototype.backendDB=function(){return this.idbdb},ae.prototype.isOpen=function(){return this.idbdb!==null},ae.prototype.hasBeenClosed=function(){var e=this._state.dbOpenError;return e&&e.name==="DatabaseClosed"},ae.prototype.hasFailed=function(){return this._state.dbOpenError!==null},ae.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(ae.prototype,"tables",{get:function(){var e=this;return a(this._allTables).map(function(r){return e._allTables[r]})},enumerable:!1,configurable:!0}),ae.prototype.transaction=function(){var e=function(r,s,u){var c=arguments.length;if(c<2)throw new q.InvalidArgument("Too few arguments");for(var d=new Array(c-1);--c;)d[c-1]=arguments[c];return u=d.pop(),[r,ys(d),u]}.apply(this,arguments);return this._transaction.apply(this,e)},ae.prototype._transaction=function(e,r,s){var u=this,c=$.trans;c&&c.db===this&&e.indexOf("!")===-1||(c=null);var d,h,p=e.indexOf("?")!==-1;e=e.replace("!","").replace("?","");try{if(h=r.map(function(y){if(y=y instanceof u.Table?y.name:y,typeof y!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return y}),e=="r"||e===bi)d=bi;else{if(e!="rw"&&e!=wi)throw new q.InvalidArgument("Invalid transaction mode: "+e);d=wi}if(c){if(c.mode===bi&&d===wi){if(!p)throw new q.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");c=null}c&&h.forEach(function(y){if(c&&c.storeNames.indexOf(y)===-1){if(!p)throw new q.SubTransaction("Table "+y+" not included in parent transaction.");c=null}}),p&&c&&!c.active&&(c=null)}}catch(y){return c?c._promise(null,function(S,g){g(y)}):se(y)}var m=function y(S,g,R,v,C){return U.resolve().then(function(){var _=$.transless||$,w=S._createTransaction(g,R,S._dbSchema,v);if(w.explicit=!0,_={trans:w,transless:_},v)w.idbtrans=v.idbtrans;else try{w.create(),w.idbtrans._explicit=!0,S._state.PR1398_maxLoop=3}catch(I){return I.name===ci.InvalidState&&S.isOpen()&&0<--S._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),S.close({disableAutoOpen:!1}),S.open().then(function(){return y(S,g,R,null,C)})):se(I)}var E,x=ui(C);return x&&$t(),_=U.follow(function(){var I;(E=C.call(w,w))&&(x?(I=rt.bind(null,null),E.then(I,I)):typeof E.next=="function"&&typeof E.throw=="function"&&(E=Fi(E)))},_),(E&&typeof E.then=="function"?U.resolve(E).then(function(I){return w.active?I:se(new q.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):_.then(function(){return E})).then(function(I){return v&&w._resolve(),w._completion.then(function(){return I})}).catch(function(I){return w._reject(I),se(I)})})}.bind(null,this,d,h,c,s);return c?c._promise(d,m,"lock"):$.trans?St($.transless,function(){return u._whenReady(m)}):this._whenReady(m)},ae.prototype.table=function(e){if(!A(this._allTables,e))throw new q.InvalidTable("Table ".concat(e," does not exist"));return this._allTables[e]},ae);function ae(e,r){var s=this;this._middlewares={},this.verno=0;var u=ae.dependencies;this._options=r=n({addons:ae.addons,autoOpen:!0,indexedDB:u.indexedDB,IDBKeyRange:u.IDBKeyRange,cache:"cloned"},r),this._deps={indexedDB:r.indexedDB,IDBKeyRange:r.IDBKeyRange},u=r.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var c,d,h,p,m,y={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:te,dbReadyPromise:null,cancelOpen:te,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:r.autoOpen};y.dbReadyPromise=new U(function(g){y.dbReadyResolve=g}),y.openCanceller=new U(function(g,R){y.cancelOpen=R}),this._state=y,this.name=e,this.on=fn(this,"populate","blocked","versionchange","close",{ready:[li,te]}),this.on.ready.subscribe=et(this.on.ready.subscribe,function(g){return function(R,v){ae.vip(function(){var C,_=s._state;_.openComplete?(_.dbOpenError||U.resolve().then(R),v&&g(R)):_.onReadyBeingFired?(_.onReadyBeingFired.push(R),v&&g(R)):(g(R),C=s,v||g(function w(){C.on.ready.unsubscribe(R),C.on.ready.unsubscribe(w)}))})}}),this.Collection=(c=this,pn(nc.prototype,function(E,w){this.db=c;var v=Os,C=null;if(w)try{v=w()}catch(x){C=x}var _=E._ctx,w=_.table,E=w.hook.reading.fire;this._ctx={table:w,index:_.index,isPrimKey:!_.index||w.schema.primKey.keyPath&&_.index===w.schema.primKey.name,range:v,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:C,or:_.or,valueMapper:E!==un?E:null}})),this.Table=(d=this,pn(Ms.prototype,function(g,R,v){this.db=d,this._tx=v,this.name=g,this.schema=R,this.hook=d._allTables[g]?d._allTables[g].hook:fn(null,{creating:[Wu,te],reading:[Vu,un],updating:[Yu,te],deleting:[Gu,te]})})),this.Transaction=(h=this,pn(oc.prototype,function(g,R,v,C,_){var w=this;this.db=h,this.mode=g,this.storeNames=R,this.schema=v,this.chromeTransactionDurability=C,this.idbtrans=null,this.on=fn(this,"complete","error","abort"),this.parent=_||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new U(function(E,x){w._resolve=E,w._reject=x}),this._completion.then(function(){w.active=!1,w.on.complete.fire()},function(E){var x=w.active;return w.active=!1,w.on.error.fire(E),w.parent?w.parent._reject(E):x&&w.idbtrans&&w.idbtrans.abort(),se(E)})})),this.Version=(p=this,pn(hc.prototype,function(g){this.db=p,this._cfg={version:g,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(m=this,pn(Ls.prototype,function(g,R,v){if(this.db=m,this._ctx={table:g,index:R===":id"?null:R,or:v},this._cmp=this._ascending=X,this._descending=function(C,_){return X(_,C)},this._max=function(C,_){return 0<X(C,_)?C:_},this._min=function(C,_){return X(C,_)<0?C:_},this._IDBKeyRange=m._deps.IDBKeyRange,!this._IDBKeyRange)throw new q.MissingAPI})),this.on("versionchange",function(g){0<g.newVersion?console.warn("Another connection wants to upgrade database '".concat(s.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(s.name,"'. Closing db now to resume the delete request.")),s.close({disableAutoOpen:!1})}),this.on("blocked",function(g){!g.newVersion||g.newVersion<g.oldVersion?console.warn("Dexie.delete('".concat(s.name,"') was blocked")):console.warn("Upgrade '".concat(s.name,"' blocked by other connection holding version ").concat(g.oldVersion/10))}),this._maxKey=yn(r.IDBKeyRange),this._createTransaction=function(g,R,v,C){return new s.Transaction(g,R,v,s._options.chromeTransactionDurability,C)},this._fireOnBlocked=function(g){s.on("blocked").fire(g),Bt.filter(function(R){return R.name===s.name&&R!==s&&!R._state.vcFired}).map(function(R){return R.on("versionchange").fire(g)})},this.use(mc),this.use(wc),this.use(vc),this.use(pc),this.use(gc);var S=new Proxy(this,{get:function(g,R,v){if(R==="_vip")return!0;if(R==="table")return function(_){return _r(s.table(_),S)};var C=Reflect.get(g,R,v);return C instanceof Ms?_r(C,S):R==="tables"?C.map(function(_){return _r(_,S)}):R==="_createTransaction"?function(){return _r(C.apply(this,arguments),S)}:C}});this.vip=S,u.forEach(function(g){return g(s)})}var Rr,Oe=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",Cc=(Ki.prototype.subscribe=function(e,r,s){return this._subscribe(e&&typeof e!="function"?e:{next:e,error:r,complete:s})},Ki.prototype[Oe]=function(){return this},Ki);function Ki(e){this._subscribe=e}try{Rr={indexedDB:o.indexedDB||o.mozIndexedDB||o.webkitIndexedDB||o.msIndexedDB,IDBKeyRange:o.IDBKeyRange||o.webkitIDBKeyRange}}catch{Rr={indexedDB:null,IDBKeyRange:null}}function Js(e){var r,s=!1,u=new Cc(function(c){var d=ui(e),h,p=!1,m={},y={},S={get closed(){return p},unsubscribe:function(){p||(p=!0,h&&h.abort(),g&&st.storagemutated.unsubscribe(v))}};c.start&&c.start(S);var g=!1,R=function(){return yi(C)},v=function(_){wr(m,_),ji(y,m)&&R()},C=function(){var _,w,E;!p&&Rr.indexedDB&&(m={},_={},h&&h.abort(),h=new AbortController,E=function(x){var I=Lt();try{d&&$t();var O=nt(e,x);return O=d?O.finally(rt):O}finally{I&&Ft()}}(w={subscr:_,signal:h.signal,requery:R,querier:e,trans:null}),Promise.resolve(E).then(function(x){s=!0,r=x,p||w.signal.aborted||(m={},function(I){for(var O in I)if(A(I,O))return;return 1}(y=_)||g||(st(vn,v),g=!0),yi(function(){return!p&&c.next&&c.next(x)}))},function(x){s=!1,["DatabaseClosedError","AbortError"].includes(x?.name)||p||yi(function(){p||c.error&&c.error(x)})}))};return setTimeout(R,0),S});return u.hasValue=function(){return s},u.getValue=function(){return r},u}var Et=Ye;function zi(e){var r=at;try{at=!0,st.storagemutated.fire(e),Li(e,!0)}finally{at=r}}F(Et,n(n({},Jn),{delete:function(e){return new Et(e,{addons:[]}).delete()},exists:function(e){return new Et(e,{addons:[]}).open().then(function(r){return r.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(e){try{return r=Et.dependencies,s=r.indexedDB,r=r.IDBKeyRange,(Ti(s)?Promise.resolve(s.databases()).then(function(u){return u.map(function(c){return c.name}).filter(function(c){return c!==ur})}):Di(s,r).toCollection().primaryKeys()).then(e)}catch{return se(new q.MissingAPI)}var r,s},defineClass:function(){return function(e){f(this,e)}},ignoreTransaction:function(e){return $.trans?St($.transless,e):e()},vip:Mi,async:function(e){return function(){try{var r=Fi(e.apply(this,arguments));return r&&typeof r.then=="function"?r:U.resolve(r)}catch(s){return se(s)}}},spawn:function(e,r,s){try{var u=Fi(e.apply(s,r||[]));return u&&typeof u.then=="function"?u:U.resolve(u)}catch(c){return se(c)}},currentTransaction:{get:function(){return $.trans||null}},waitFor:function(e,r){return r=U.resolve(typeof e=="function"?Et.ignoreTransaction(e):e).timeout(r||6e4),$.trans?$.trans.waitFor(r):r},Promise:U,debug:{get:function(){return Fe},set:function(e){Ss(e)}},derive:he,extend:f,props:F,override:et,Events:fn,on:st,liveQuery:Js,extendObservabilitySet:wr,getByKeyPath:He,setByKeyPath:Re,delByKeyPath:function(e,r){typeof r=="string"?Re(e,r,void 0):"length"in r&&[].map.call(r,function(s){Re(e,s,void 0)})},shallowClone:vs,deepClone:mt,getObjectDiff:$i,cmp:X,asap:gt,minKey:-1/0,addons:[],connections:Bt,errnames:ci,dependencies:Rr,cache:kt,semVer:"4.0.10",version:"4.0.10".split(".").map(function(e){return parseInt(e)}).reduce(function(e,r,s){return e+r/Math.pow(10,2*s)})})),Et.maxKey=yn(Et.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(st(vn,function(e){at||(e=new CustomEvent(Ri,{detail:e}),at=!0,dispatchEvent(e),at=!1)}),addEventListener(Ri,function(e){e=e.detail,at||zi(e)}));var zt,at=!1,ea=function(){};return typeof BroadcastChannel<"u"&&((ea=function(){(zt=new BroadcastChannel(Ri)).onmessage=function(e){return e.data&&zi(e.data)}})(),typeof zt.unref=="function"&&zt.unref(),st(vn,function(e){at||zt.postMessage(e)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(e){if(!Ye.disableBfCache&&e.persisted){Fe&&console.debug("Dexie: handling persisted pagehide"),zt?.close();for(var r=0,s=Bt;r<s.length;r++)s[r].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(e){!Ye.disableBfCache&&e.persisted&&(Fe&&console.debug("Dexie: handling persisted pageshow"),ea(),zi({all:new me(-1/0,[[]])}))})),U.rejectionMapper=function(e,r){return!e||e instanceof Nt||e instanceof TypeError||e instanceof SyntaxError||!e.name||!Cs[e.name]?e:(r=new Cs[e.name](r||e.message,e),"stack"in e&&W(r,"stack",{get:function(){return this.inner.stack}}),r)},Ss(Fe),n(Ye,Object.freeze({__proto__:null,Dexie:Ye,liveQuery:Js,Entity:As,cmp:X,PropModSymbol:Ge,PropModification:gn,replacePrefix:function(e,r){return new gn({replacePrefix:[e,r]})},add:function(e){return new gn({add:e})},remove:function(e){return new gn({remove:e})},default:Ye,RangeSet:me,mergeRanges:Cn,rangesOverlap:Ks}),{default:Ye}),Ye})});var _o=class extends Pa{supportsDOMEvents=!0},Ro=class i extends _o{static makeCurrent(){Ma(new i)}onAndCancel(n,t,o){return n.addEventListener(t,o),()=>{n.removeEventListener(t,o)}}dispatchEvent(n,t){n.dispatchEvent(t)}remove(n){n.remove()}createElement(n,t){return t=t||this.getDefaultDocument(),t.createElement(n)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(n){return n.nodeType===Node.ELEMENT_NODE}isShadowRoot(n){return n instanceof DocumentFragment}getGlobalEventTarget(n,t){return t==="window"?window:t==="document"?n:t==="body"?n.body:null}getBaseHref(n){let t=Oc();return t==null?null:Ac(t)}resetBaseElement(){An=null}getUserAgent(){return window.navigator.userAgent}getCookie(n){return ja(document.cookie,n)}},An=null;function Oc(){return An=An||document.querySelector("base"),An?An.getAttribute("href"):null}function Ac(i){return new URL(i,document.baseURI).pathname}var Dc=(()=>{class i{build(){return new XMLHttpRequest}static \u0275fac=function(o){return new(o||i)};static \u0275prov=re({token:i,factory:i.\u0275fac})}return i})(),ko=new we(""),Ha=(()=>{class i{_zone;_plugins;_eventNameToPlugin=new Map;constructor(t,o){this._zone=o,t.forEach(a=>{a.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,o,a){return this._findPluginFor(o).addEventListener(t,o,a)}getZone(){return this._zone}_findPluginFor(t){let o=this._eventNameToPlugin.get(t);if(o)return o;if(o=this._plugins.find(l=>l.supports(t)),!o)throw new ce(5101,!1);return this._eventNameToPlugin.set(t,o),o}static \u0275fac=function(o){return new(o||i)(ue(ko),ue(lt))};static \u0275prov=re({token:i,factory:i.\u0275fac})}return i})(),jr=class{_doc;constructor(n){this._doc=n}manager},Pr="ng-app-id";function Ba(i){for(let n of i)n.remove()}function qa(i,n){let t=n.createElement("style");return t.textContent=i,t}function Tc(i,n,t,o){let a=i.head?.querySelectorAll(`style[${Pr}="${n}"],link[${Pr}="${n}"]`);if(a)for(let l of a)l.removeAttribute(Pr),l instanceof HTMLLinkElement?o.set(l.href.slice(l.href.lastIndexOf("/")+1),{usage:0,elements:[l]}):l.textContent&&t.set(l.textContent,{usage:0,elements:[l]})}function Eo(i,n){let t=n.createElement("link");return t.setAttribute("rel","stylesheet"),t.setAttribute("href",i),t}var Va=(()=>{class i{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;isServer;constructor(t,o,a,l={}){this.doc=t,this.appId=o,this.nonce=a,this.isServer=bo(l),Tc(t,o,this.inline,this.external),this.hosts.add(t.head)}addStyles(t,o){for(let a of t)this.addUsage(a,this.inline,qa);o?.forEach(a=>this.addUsage(a,this.external,Eo))}removeStyles(t,o){for(let a of t)this.removeUsage(a,this.inline);o?.forEach(a=>this.removeUsage(a,this.external))}addUsage(t,o,a){let l=o.get(t);l?l.usage++:o.set(t,{usage:1,elements:[...this.hosts].map(f=>this.addElement(f,a(t,this.doc)))})}removeUsage(t,o){let a=o.get(t);a&&(a.usage--,a.usage<=0&&(Ba(a.elements),o.delete(t)))}ngOnDestroy(){for(let[,{elements:t}]of[...this.inline,...this.external])Ba(t);this.hosts.clear()}addHost(t){this.hosts.add(t);for(let[o,{elements:a}]of this.inline)a.push(this.addElement(t,qa(o,this.doc)));for(let[o,{elements:a}]of this.external)a.push(this.addElement(t,Eo(o,this.doc)))}removeHost(t){this.hosts.delete(t)}addElement(t,o){return this.nonce&&o.setAttribute("nonce",this.nonce),this.isServer&&o.setAttribute(Pr,this.appId),t.appendChild(o)}static \u0275fac=function(o){return new(o||i)(ue(Me),ue(no),ue(ro,8),ue(xn))};static \u0275prov=re({token:i,factory:i.\u0275fac})}return i})(),So={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},Io=/%COMP%/g,Wa="%COMP%",Mc=`_nghost-${Wa}`,Pc=`_ngcontent-${Wa}`,jc=!0,Nc=new we("",{providedIn:"root",factory:()=>jc});function Uc(i){return Pc.replace(Io,i)}function Lc(i){return Mc.replace(Io,i)}function Ga(i,n){return n.map(t=>t.replace(Io,i))}var Nr=(()=>{class i{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;platformId;ngZone;nonce;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(t,o,a,l,f,k,b,A=null){this.eventManager=t,this.sharedStylesHost=o,this.appId=a,this.removeStylesOnCompDestroy=l,this.doc=f,this.platformId=k,this.ngZone=b,this.nonce=A,this.platformIsServer=bo(k),this.defaultRenderer=new Dn(t,f,b,this.platformIsServer)}createRenderer(t,o){if(!t||!o)return this.defaultRenderer;this.platformIsServer&&o.encapsulation===In.ShadowDom&&(o=Se(K({},o),{encapsulation:In.Emulated}));let a=this.getOrCreateRenderer(t,o);return a instanceof Ur?a.applyToHost(t):a instanceof Tn&&a.applyStyles(),a}getOrCreateRenderer(t,o){let a=this.rendererByCompId,l=a.get(o.id);if(!l){let f=this.doc,k=this.ngZone,b=this.eventManager,A=this.sharedStylesHost,F=this.removeStylesOnCompDestroy,B=this.platformIsServer;switch(o.encapsulation){case In.Emulated:l=new Ur(b,A,o,this.appId,F,f,k,B);break;case In.ShadowDom:return new xo(b,A,t,o,f,k,this.nonce,B);default:l=new Tn(b,A,o,F,f,k,B);break}a.set(o.id,l)}return l}ngOnDestroy(){this.rendererByCompId.clear()}static \u0275fac=function(o){return new(o||i)(ue(Ha),ue(Va),ue(no),ue(Nc),ue(Me),ue(xn),ue(lt),ue(ro))};static \u0275prov=re({token:i,factory:i.\u0275fac})}return i})(),Dn=class{eventManager;doc;ngZone;platformIsServer;data=Object.create(null);throwOnSyntheticProps=!0;constructor(n,t,o,a){this.eventManager=n,this.doc=t,this.ngZone=o,this.platformIsServer=a}destroy(){}destroyNode=null;createElement(n,t){return t?this.doc.createElementNS(So[t]||t,n):this.doc.createElement(n)}createComment(n){return this.doc.createComment(n)}createText(n){return this.doc.createTextNode(n)}appendChild(n,t){(Ka(n)?n.content:n).appendChild(t)}insertBefore(n,t,o){n&&(Ka(n)?n.content:n).insertBefore(t,o)}removeChild(n,t){t.remove()}selectRootElement(n,t){let o=typeof n=="string"?this.doc.querySelector(n):n;if(!o)throw new ce(-5104,!1);return t||(o.textContent=""),o}parentNode(n){return n.parentNode}nextSibling(n){return n.nextSibling}setAttribute(n,t,o,a){if(a){t=a+":"+t;let l=So[a];l?n.setAttributeNS(l,t,o):n.setAttribute(t,o)}else n.setAttribute(t,o)}removeAttribute(n,t,o){if(o){let a=So[o];a?n.removeAttributeNS(a,t):n.removeAttribute(`${o}:${t}`)}else n.removeAttribute(t)}addClass(n,t){n.classList.add(t)}removeClass(n,t){n.classList.remove(t)}setStyle(n,t,o,a){a&(On.DashCase|On.Important)?n.style.setProperty(t,o,a&On.Important?"important":""):n.style[t]=o}removeStyle(n,t,o){o&On.DashCase?n.style.removeProperty(t):n.style[t]=""}setProperty(n,t,o){n!=null&&(n[t]=o)}setValue(n,t){n.nodeValue=t}listen(n,t,o){if(typeof n=="string"&&(n=vo().getGlobalEventTarget(this.doc,n),!n))throw new Error(`Unsupported event target ${n} for event ${t}`);return this.eventManager.addEventListener(n,t,this.decoratePreventDefault(o))}decoratePreventDefault(n){return t=>{if(t==="__ngUnwrap__")return n;(this.platformIsServer?this.ngZone.runGuarded(()=>n(t)):n(t))===!1&&t.preventDefault()}}};function Ka(i){return i.tagName==="TEMPLATE"&&i.content!==void 0}var xo=class extends Dn{sharedStylesHost;hostEl;shadowRoot;constructor(n,t,o,a,l,f,k,b){super(n,l,f,b),this.sharedStylesHost=t,this.hostEl=o,this.shadowRoot=o.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let A=Ga(a.id,a.styles);for(let B of A){let W=document.createElement("style");k&&W.setAttribute("nonce",k),W.textContent=B,this.shadowRoot.appendChild(W)}let F=a.getExternalStyles?.();if(F)for(let B of F){let W=Eo(B,l);k&&W.setAttribute("nonce",k),this.shadowRoot.appendChild(W)}}nodeOrShadowRoot(n){return n===this.hostEl?this.shadowRoot:n}appendChild(n,t){return super.appendChild(this.nodeOrShadowRoot(n),t)}insertBefore(n,t,o){return super.insertBefore(this.nodeOrShadowRoot(n),t,o)}removeChild(n,t){return super.removeChild(null,t)}parentNode(n){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(n)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Tn=class extends Dn{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(n,t,o,a,l,f,k,b){super(n,l,f,k),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=a,this.styles=b?Ga(b,o.styles):o.styles,this.styleUrls=o.getExternalStyles?.(b)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},Ur=class extends Tn{contentAttr;hostAttr;constructor(n,t,o,a,l,f,k,b){let A=a+"-"+o.id;super(n,t,o,l,f,k,b,A),this.contentAttr=Uc(A),this.hostAttr=Lc(A)}applyToHost(n){this.applyStyles(),this.setAttribute(n,this.hostAttr,"")}createElement(n,t){let o=super.createElement(n,t);return super.setAttribute(o,this.contentAttr,""),o}},Fc=(()=>{class i extends jr{constructor(t){super(t)}supports(t){return!0}addEventListener(t,o,a){return t.addEventListener(o,a,!1),()=>this.removeEventListener(t,o,a)}removeEventListener(t,o,a){return t.removeEventListener(o,a)}static \u0275fac=function(o){return new(o||i)(ue(Me))};static \u0275prov=re({token:i,factory:i.\u0275fac})}return i})(),za=["alt","control","meta","shift"],$c={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Bc={alt:i=>i.altKey,control:i=>i.ctrlKey,meta:i=>i.metaKey,shift:i=>i.shiftKey},qc=(()=>{class i extends jr{constructor(t){super(t)}supports(t){return i.parseEventName(t)!=null}addEventListener(t,o,a){let l=i.parseEventName(o),f=i.eventCallback(l.fullKey,a,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>vo().onAndCancel(t,l.domEventName,f))}static parseEventName(t){let o=t.toLowerCase().split("."),a=o.shift();if(o.length===0||!(a==="keydown"||a==="keyup"))return null;let l=i._normalizeKey(o.pop()),f="",k=o.indexOf("code");if(k>-1&&(o.splice(k,1),f="code."),za.forEach(A=>{let F=o.indexOf(A);F>-1&&(o.splice(F,1),f+=A+".")}),f+=l,o.length!=0||l.length===0)return null;let b={};return b.domEventName=a,b.fullKey=f,b}static matchEventFullKeyCode(t,o){let a=$c[t.key]||t.key,l="";return o.indexOf("code.")>-1&&(a=t.code,l="code."),a==null||!a?!1:(a=a.toLowerCase(),a===" "?a="space":a==="."&&(a="dot"),za.forEach(f=>{if(f!==a){let k=Bc[f];k(t)&&(l+=f+".")}}),l+=a,l===o)}static eventCallback(t,o,a){return l=>{i.matchEventFullKeyCode(l,t)&&a.runGuarded(()=>o(l))}}static _normalizeKey(t){return t==="esc"?"escape":t}static \u0275fac=function(o){return new(o||i)(ue(Me))};static \u0275prov=re({token:i,factory:i.\u0275fac})}return i})();function Ya(i,n){return Ta(K({rootComponent:i},Kc(n)))}function Kc(i){return{appProviders:[...Gc,...i?.providers??[]],platformProviders:Wc}}function zc(){Ro.makeCurrent()}function Hc(){return new eo}function Vc(){return ya(document),document}var Wc=[{provide:xn,useValue:La},{provide:ba,useValue:zc,multi:!0},{provide:Me,useFactory:Vc,deps:[]}];var Gc=[{provide:ha,useValue:"root"},{provide:eo,useFactory:Hc,deps:[]},{provide:ko,useClass:Fc,multi:!0,deps:[Me,lt,xn]},{provide:ko,useClass:qc,multi:!0,deps:[Me]},Nr,Va,Ha,{provide:Ir,useExisting:Nr},{provide:Fa,useClass:Dc,deps:[]},[]];var Qa=(()=>{class i{_doc;constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static \u0275fac=function(o){return new(o||i)(ue(Me))};static \u0275prov=re({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();var Y="primary",Yn=Symbol("RouteTitle"),Mo=class{params;constructor(n){this.params=n||{}}has(n){return Object.prototype.hasOwnProperty.call(this.params,n)}get(n){if(this.has(n)){let t=this.params[n];return Array.isArray(t)?t[0]:t}return null}getAll(n){if(this.has(n)){let t=this.params[n];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function tn(i){return new Mo(i)}function Qc(i,n,t){let o=t.path.split("/");if(o.length>i.length||t.pathMatch==="full"&&(n.hasChildren()||o.length<i.length))return null;let a={};for(let l=0;l<o.length;l++){let f=o[l],k=i[l];if(f[0]===":")a[f.substring(1)]=k;else if(f!==k.path)return null}return{consumed:i.slice(0,o.length),posParams:a}}function Zc(i,n){if(i.length!==n.length)return!1;for(let t=0;t<i.length;++t)if(!ze(i[t],n[t]))return!1;return!0}function ze(i,n){let t=i?Po(i):void 0,o=n?Po(n):void 0;if(!t||!o||t.length!=o.length)return!1;let a;for(let l=0;l<t.length;l++)if(a=t[l],!iu(i[a],n[a]))return!1;return!0}function Po(i){return[...Object.keys(i),...Object.getOwnPropertySymbols(i)]}function iu(i,n){if(Array.isArray(i)&&Array.isArray(n)){if(i.length!==n.length)return!1;let t=[...i].sort(),o=[...n].sort();return t.every((a,l)=>o[l]===a)}else return i===n}function ou(i){return i.length>0?i[i.length-1]:null}function ft(i){return ra(i)?i:xa(i)?je(Promise.resolve(i)):G(i)}var Xc={exact:au,subset:uu},su={exact:Jc,subset:el,ignored:()=>!0};function Za(i,n,t){return Xc[t.paths](i.root,n.root,t.matrixParams)&&su[t.queryParams](i.queryParams,n.queryParams)&&!(t.fragment==="exact"&&i.fragment!==n.fragment)}function Jc(i,n){return ze(i,n)}function au(i,n,t){if(!Tt(i.segments,n.segments)||!$r(i.segments,n.segments,t)||i.numberOfChildren!==n.numberOfChildren)return!1;for(let o in n.children)if(!i.children[o]||!au(i.children[o],n.children[o],t))return!1;return!0}function el(i,n){return Object.keys(n).length<=Object.keys(i).length&&Object.keys(n).every(t=>iu(i[t],n[t]))}function uu(i,n,t){return cu(i,n,n.segments,t)}function cu(i,n,t,o){if(i.segments.length>t.length){let a=i.segments.slice(0,t.length);return!(!Tt(a,t)||n.hasChildren()||!$r(a,t,o))}else if(i.segments.length===t.length){if(!Tt(i.segments,t)||!$r(i.segments,t,o))return!1;for(let a in n.children)if(!i.children[a]||!uu(i.children[a],n.children[a],o))return!1;return!0}else{let a=t.slice(0,i.segments.length),l=t.slice(i.segments.length);return!Tt(i.segments,a)||!$r(i.segments,a,o)||!i.children[Y]?!1:cu(i.children[Y],n,l,o)}}function $r(i,n,t){return n.every((o,a)=>su[t](i[a].parameters,o.parameters))}var Je=class{root;queryParams;fragment;_queryParamMap;constructor(n=new ee([],{}),t={},o=null){this.root=n,this.queryParams=t,this.fragment=o}get queryParamMap(){return this._queryParamMap??=tn(this.queryParams),this._queryParamMap}toString(){return rl.serialize(this)}},ee=class{segments;children;parent=null;constructor(n,t){this.segments=n,this.children=t,Object.values(t).forEach(o=>o.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Br(this)}},Dt=class{path;parameters;_parameterMap;constructor(n,t){this.path=n,this.parameters=t}get parameterMap(){return this._parameterMap??=tn(this.parameters),this._parameterMap}toString(){return du(this)}};function tl(i,n){return Tt(i,n)&&i.every((t,o)=>ze(t.parameters,n[o].parameters))}function Tt(i,n){return i.length!==n.length?!1:i.every((t,o)=>t.path===n[o].path)}function nl(i,n){let t=[];return Object.entries(i.children).forEach(([o,a])=>{o===Y&&(t=t.concat(n(a,o)))}),Object.entries(i.children).forEach(([o,a])=>{o!==Y&&(t=t.concat(n(a,o)))}),t}var ss=(()=>{class i{static \u0275fac=function(o){return new(o||i)};static \u0275prov=re({token:i,factory:()=>new Fn,providedIn:"root"})}return i})(),Fn=class{parse(n){let t=new No(n);return new Je(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(n){let t=`/${Mn(n.root,!0)}`,o=sl(n.queryParams),a=typeof n.fragment=="string"?`#${il(n.fragment)}`:"";return`${t}${o}${a}`}},rl=new Fn;function Br(i){return i.segments.map(n=>du(n)).join("/")}function Mn(i,n){if(!i.hasChildren())return Br(i);if(n){let t=i.children[Y]?Mn(i.children[Y],!1):"",o=[];return Object.entries(i.children).forEach(([a,l])=>{a!==Y&&o.push(`${a}:${Mn(l,!1)}`)}),o.length>0?`${t}(${o.join("//")})`:t}else{let t=nl(i,(o,a)=>a===Y?[Mn(i.children[Y],!1)]:[`${a}:${Mn(o,!1)}`]);return Object.keys(i.children).length===1&&i.children[Y]!=null?`${Br(i)}/${t[0]}`:`${Br(i)}/(${t.join("//")})`}}function lu(i){return encodeURIComponent(i).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Lr(i){return lu(i).replace(/%3B/gi,";")}function il(i){return encodeURI(i)}function jo(i){return lu(i).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function qr(i){return decodeURIComponent(i)}function Xa(i){return qr(i.replace(/\+/g,"%20"))}function du(i){return`${jo(i.path)}${ol(i.parameters)}`}function ol(i){return Object.entries(i).map(([n,t])=>`;${jo(n)}=${jo(t)}`).join("")}function sl(i){let n=Object.entries(i).map(([t,o])=>Array.isArray(o)?o.map(a=>`${Lr(t)}=${Lr(a)}`).join("&"):`${Lr(t)}=${Lr(o)}`).filter(t=>t);return n.length?`?${n.join("&")}`:""}var al=/^[^\/()?;#]+/;function Oo(i){let n=i.match(al);return n?n[0]:""}var ul=/^[^\/()?;=#]+/;function cl(i){let n=i.match(ul);return n?n[0]:""}var ll=/^[^=?&#]+/;function dl(i){let n=i.match(ll);return n?n[0]:""}var hl=/^[^&#]+/;function fl(i){let n=i.match(hl);return n?n[0]:""}var No=class{url;remaining;constructor(n){this.url=n,this.remaining=n}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new ee([],{}):new ee([],this.parseChildren())}parseQueryParams(){let n={};if(this.consumeOptional("?"))do this.parseQueryParam(n);while(this.consumeOptional("&"));return n}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let n=[];for(this.peekStartsWith("(")||n.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),n.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let o={};return this.peekStartsWith("(")&&(o=this.parseParens(!1)),(n.length>0||Object.keys(t).length>0)&&(o[Y]=new ee(n,t)),o}parseSegment(){let n=Oo(this.remaining);if(n===""&&this.peekStartsWith(";"))throw new ce(4009,!1);return this.capture(n),new Dt(qr(n),this.parseMatrixParams())}parseMatrixParams(){let n={};for(;this.consumeOptional(";");)this.parseParam(n);return n}parseParam(n){let t=cl(this.remaining);if(!t)return;this.capture(t);let o="";if(this.consumeOptional("=")){let a=Oo(this.remaining);a&&(o=a,this.capture(o))}n[qr(t)]=qr(o)}parseQueryParam(n){let t=dl(this.remaining);if(!t)return;this.capture(t);let o="";if(this.consumeOptional("=")){let f=fl(this.remaining);f&&(o=f,this.capture(o))}let a=Xa(t),l=Xa(o);if(n.hasOwnProperty(a)){let f=n[a];Array.isArray(f)||(f=[f],n[a]=f),f.push(l)}else n[a]=l}parseParens(n){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let o=Oo(this.remaining),a=this.remaining[o.length];if(a!=="/"&&a!==")"&&a!==";")throw new ce(4010,!1);let l;o.indexOf(":")>-1?(l=o.slice(0,o.indexOf(":")),this.capture(l),this.capture(":")):n&&(l=Y);let f=this.parseChildren();t[l]=Object.keys(f).length===1?f[Y]:new ee([],f),this.consumeOptional("//")}return t}peekStartsWith(n){return this.remaining.startsWith(n)}consumeOptional(n){return this.peekStartsWith(n)?(this.remaining=this.remaining.substring(n.length),!0):!1}capture(n){if(!this.consumeOptional(n))throw new ce(4011,!1)}};function hu(i){return i.segments.length>0?new ee([],{[Y]:i}):i}function fu(i){let n={};for(let[o,a]of Object.entries(i.children)){let l=fu(a);if(o===Y&&l.segments.length===0&&l.hasChildren())for(let[f,k]of Object.entries(l.children))n[f]=k;else(l.segments.length>0||l.hasChildren())&&(n[o]=l)}let t=new ee(i.segments,n);return pl(t)}function pl(i){if(i.numberOfChildren===1&&i.children[Y]){let n=i.children[Y];return new ee(i.segments.concat(n.segments),n.children)}return i}function $n(i){return i instanceof Je}function gl(i,n,t=null,o=null){let a=pu(i);return gu(a,n,t,o)}function pu(i){let n;function t(l){let f={};for(let b of l.children){let A=t(b);f[b.outlet]=A}let k=new ee(l.url,f);return l===i&&(n=k),k}let o=t(i.root),a=hu(o);return n??a}function gu(i,n,t,o){let a=i;for(;a.parent;)a=a.parent;if(n.length===0)return Ao(a,a,a,t,o);let l=ml(n);if(l.toRoot())return Ao(a,a,new ee([],{}),t,o);let f=vl(l,a,i),k=f.processChildren?Nn(f.segmentGroup,f.index,l.commands):vu(f.segmentGroup,f.index,l.commands);return Ao(a,f.segmentGroup,k,t,o)}function Kr(i){return typeof i=="object"&&i!=null&&!i.outlets&&!i.segmentPath}function Bn(i){return typeof i=="object"&&i!=null&&i.outlets}function Ao(i,n,t,o,a){let l={};o&&Object.entries(o).forEach(([b,A])=>{l[b]=Array.isArray(A)?A.map(F=>`${F}`):`${A}`});let f;i===n?f=t:f=mu(i,n,t);let k=hu(fu(f));return new Je(k,l,a)}function mu(i,n,t){let o={};return Object.entries(i.children).forEach(([a,l])=>{l===n?o[a]=t:o[a]=mu(l,n,t)}),new ee(i.segments,o)}var zr=class{isAbsolute;numberOfDoubleDots;commands;constructor(n,t,o){if(this.isAbsolute=n,this.numberOfDoubleDots=t,this.commands=o,n&&o.length>0&&Kr(o[0]))throw new ce(4003,!1);let a=o.find(Bn);if(a&&a!==ou(o))throw new ce(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function ml(i){if(typeof i[0]=="string"&&i.length===1&&i[0]==="/")return new zr(!0,0,i);let n=0,t=!1,o=i.reduce((a,l,f)=>{if(typeof l=="object"&&l!=null){if(l.outlets){let k={};return Object.entries(l.outlets).forEach(([b,A])=>{k[b]=typeof A=="string"?A.split("/"):A}),[...a,{outlets:k}]}if(l.segmentPath)return[...a,l.segmentPath]}return typeof l!="string"?[...a,l]:f===0?(l.split("/").forEach((k,b)=>{b==0&&k==="."||(b==0&&k===""?t=!0:k===".."?n++:k!=""&&a.push(k))}),a):[...a,l]},[]);return new zr(t,n,o)}var Xt=class{segmentGroup;processChildren;index;constructor(n,t,o){this.segmentGroup=n,this.processChildren=t,this.index=o}};function vl(i,n,t){if(i.isAbsolute)return new Xt(n,!0,0);if(!t)return new Xt(n,!1,NaN);if(t.parent===null)return new Xt(t,!0,0);let o=Kr(i.commands[0])?0:1,a=t.segments.length-1+o;return yl(t,a,i.numberOfDoubleDots)}function yl(i,n,t){let o=i,a=n,l=t;for(;l>a;){if(l-=a,o=o.parent,!o)throw new ce(4005,!1);a=o.segments.length}return new Xt(o,!1,a-l)}function bl(i){return Bn(i[0])?i[0].outlets:{[Y]:i}}function vu(i,n,t){if(i??=new ee([],{}),i.segments.length===0&&i.hasChildren())return Nn(i,n,t);let o=wl(i,n,t),a=t.slice(o.commandIndex);if(o.match&&o.pathIndex<i.segments.length){let l=new ee(i.segments.slice(0,o.pathIndex),{});return l.children[Y]=new ee(i.segments.slice(o.pathIndex),i.children),Nn(l,0,a)}else return o.match&&a.length===0?new ee(i.segments,{}):o.match&&!i.hasChildren()?Uo(i,n,t):o.match?Nn(i,0,a):Uo(i,n,t)}function Nn(i,n,t){if(t.length===0)return new ee(i.segments,{});{let o=bl(t),a={};if(Object.keys(o).some(l=>l!==Y)&&i.children[Y]&&i.numberOfChildren===1&&i.children[Y].segments.length===0){let l=Nn(i.children[Y],n,t);return new ee(i.segments,l.children)}return Object.entries(o).forEach(([l,f])=>{typeof f=="string"&&(f=[f]),f!==null&&(a[l]=vu(i.children[l],n,f))}),Object.entries(i.children).forEach(([l,f])=>{o[l]===void 0&&(a[l]=f)}),new ee(i.segments,a)}}function wl(i,n,t){let o=0,a=n,l={match:!1,pathIndex:0,commandIndex:0};for(;a<i.segments.length;){if(o>=t.length)return l;let f=i.segments[a],k=t[o];if(Bn(k))break;let b=`${k}`,A=o<t.length-1?t[o+1]:null;if(a>0&&b===void 0)break;if(b&&A&&typeof A=="object"&&A.outlets===void 0){if(!eu(b,A,f))return l;o+=2}else{if(!eu(b,{},f))return l;o++}a++}return{match:!0,pathIndex:a,commandIndex:o}}function Uo(i,n,t){let o=i.segments.slice(0,n),a=0;for(;a<t.length;){let l=t[a];if(Bn(l)){let b=Cl(l.outlets);return new ee(o,b)}if(a===0&&Kr(t[0])){let b=i.segments[n];o.push(new Dt(b.path,Ja(t[0]))),a++;continue}let f=Bn(l)?l.outlets[Y]:`${l}`,k=a<t.length-1?t[a+1]:null;f&&k&&Kr(k)?(o.push(new Dt(f,Ja(k))),a+=2):(o.push(new Dt(f,{})),a++)}return new ee(o,{})}function Cl(i){let n={};return Object.entries(i).forEach(([t,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(n[t]=Uo(new ee([],{}),0,o))}),n}function Ja(i){let n={};return Object.entries(i).forEach(([t,o])=>n[t]=`${o}`),n}function eu(i,n,t){return i==t.path&&ze(n,t.parameters)}var Un="imperative",pe=function(i){return i[i.NavigationStart=0]="NavigationStart",i[i.NavigationEnd=1]="NavigationEnd",i[i.NavigationCancel=2]="NavigationCancel",i[i.NavigationError=3]="NavigationError",i[i.RoutesRecognized=4]="RoutesRecognized",i[i.ResolveStart=5]="ResolveStart",i[i.ResolveEnd=6]="ResolveEnd",i[i.GuardsCheckStart=7]="GuardsCheckStart",i[i.GuardsCheckEnd=8]="GuardsCheckEnd",i[i.RouteConfigLoadStart=9]="RouteConfigLoadStart",i[i.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",i[i.ChildActivationStart=11]="ChildActivationStart",i[i.ChildActivationEnd=12]="ChildActivationEnd",i[i.ActivationStart=13]="ActivationStart",i[i.ActivationEnd=14]="ActivationEnd",i[i.Scroll=15]="Scroll",i[i.NavigationSkipped=16]="NavigationSkipped",i}(pe||{}),Pe=class{id;url;constructor(n,t){this.id=n,this.url=t}},qn=class extends Pe{type=pe.NavigationStart;navigationTrigger;restoredState;constructor(n,t,o="imperative",a=null){super(n,t),this.navigationTrigger=o,this.restoredState=a}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Mt=class extends Pe{urlAfterRedirects;type=pe.NavigationEnd;constructor(n,t,o){super(n,t),this.urlAfterRedirects=o}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Ie=function(i){return i[i.Redirect=0]="Redirect",i[i.SupersededByNewNavigation=1]="SupersededByNewNavigation",i[i.NoDataFromResolver=2]="NoDataFromResolver",i[i.GuardRejected=3]="GuardRejected",i}(Ie||{}),Lo=function(i){return i[i.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",i[i.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",i}(Lo||{}),Xe=class extends Pe{reason;code;type=pe.NavigationCancel;constructor(n,t,o,a){super(n,t),this.reason=o,this.code=a}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Pt=class extends Pe{reason;code;type=pe.NavigationSkipped;constructor(n,t,o,a){super(n,t),this.reason=o,this.code=a}},Kn=class extends Pe{error;target;type=pe.NavigationError;constructor(n,t,o,a){super(n,t),this.error=o,this.target=a}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Hr=class extends Pe{urlAfterRedirects;state;type=pe.RoutesRecognized;constructor(n,t,o,a){super(n,t),this.urlAfterRedirects=o,this.state=a}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Fo=class extends Pe{urlAfterRedirects;state;type=pe.GuardsCheckStart;constructor(n,t,o,a){super(n,t),this.urlAfterRedirects=o,this.state=a}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},$o=class extends Pe{urlAfterRedirects;state;shouldActivate;type=pe.GuardsCheckEnd;constructor(n,t,o,a,l){super(n,t),this.urlAfterRedirects=o,this.state=a,this.shouldActivate=l}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Bo=class extends Pe{urlAfterRedirects;state;type=pe.ResolveStart;constructor(n,t,o,a){super(n,t),this.urlAfterRedirects=o,this.state=a}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},qo=class extends Pe{urlAfterRedirects;state;type=pe.ResolveEnd;constructor(n,t,o,a){super(n,t),this.urlAfterRedirects=o,this.state=a}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Ko=class{route;type=pe.RouteConfigLoadStart;constructor(n){this.route=n}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},zo=class{route;type=pe.RouteConfigLoadEnd;constructor(n){this.route=n}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Ho=class{snapshot;type=pe.ChildActivationStart;constructor(n){this.snapshot=n}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Vo=class{snapshot;type=pe.ChildActivationEnd;constructor(n){this.snapshot=n}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Wo=class{snapshot;type=pe.ActivationStart;constructor(n){this.snapshot=n}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Go=class{snapshot;type=pe.ActivationEnd;constructor(n){this.snapshot=n}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var zn=class{},nn=class{url;navigationBehaviorOptions;constructor(n,t){this.url=n,this.navigationBehaviorOptions=t}};function Sl(i,n){return i.providers&&!i._injector&&(i._injector=Ea(i.providers,n,`Route: ${i.path}`)),i._injector??n}function Ue(i){return i.outlet||Y}function _l(i,n){let t=i.filter(o=>Ue(o)===n);return t.push(...i.filter(o=>Ue(o)!==n)),t}function Qn(i){if(!i)return null;if(i.routeConfig?._injector)return i.routeConfig._injector;for(let n=i.parent;n;n=n.parent){let t=n.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var Yo=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return Qn(this.route?.snapshot)??this.rootInjector}constructor(n){this.rootInjector=n,this.children=new Xr(this.rootInjector)}},Xr=(()=>{class i{rootInjector;contexts=new Map;constructor(t){this.rootInjector=t}onChildOutletCreated(t,o){let a=this.getOrCreateContext(t);a.outlet=o,this.contexts.set(t,a)}onChildOutletDestroyed(t){let o=this.getContext(t);o&&(o.outlet=null,o.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let o=this.getContext(t);return o||(o=new Yo(this.rootInjector),this.contexts.set(t,o)),o}getContext(t){return this.contexts.get(t)||null}static \u0275fac=function(o){return new(o||i)(ue(xr))};static \u0275prov=re({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),Vr=class{_root;constructor(n){this._root=n}get root(){return this._root.value}parent(n){let t=this.pathFromRoot(n);return t.length>1?t[t.length-2]:null}children(n){let t=Qo(n,this._root);return t?t.children.map(o=>o.value):[]}firstChild(n){let t=Qo(n,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(n){let t=Zo(n,this._root);return t.length<2?[]:t[t.length-2].children.map(a=>a.value).filter(a=>a!==n)}pathFromRoot(n){return Zo(n,this._root).map(t=>t.value)}};function Qo(i,n){if(i===n.value)return n;for(let t of n.children){let o=Qo(i,t);if(o)return o}return null}function Zo(i,n){if(i===n.value)return[n];for(let t of n.children){let o=Zo(i,t);if(o.length)return o.unshift(n),o}return[]}var xe=class{value;children;constructor(n,t){this.value=n,this.children=t}toString(){return`TreeNode(${this.value})`}};function Zt(i){let n={};return i&&i.children.forEach(t=>n[t.value.outlet]=t),n}var Wr=class extends Vr{snapshot;constructor(n,t){super(n),this.snapshot=t,as(this,n)}toString(){return this.snapshot.toString()}};function yu(i){let n=Rl(i),t=new Ae([new Dt("",{})]),o=new Ae({}),a=new Ae({}),l=new Ae({}),f=new Ae(""),k=new rn(t,o,l,f,a,Y,i,n.root);return k.snapshot=n.root,new Wr(new xe(k,[]),n)}function Rl(i){let n={},t={},o={},a="",l=new Jt([],n,o,a,t,Y,i,null,{});return new Yr("",new xe(l,[]))}var rn=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(n,t,o,a,l,f,k,b){this.urlSubject=n,this.paramsSubject=t,this.queryParamsSubject=o,this.fragmentSubject=a,this.dataSubject=l,this.outlet=f,this.component=k,this._futureSnapshot=b,this.title=this.dataSubject?.pipe(ne(A=>A[Yn]))??G(void 0),this.url=n,this.params=t,this.queryParams=o,this.fragment=a,this.data=l}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(ne(n=>tn(n))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(ne(n=>tn(n))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Gr(i,n,t="emptyOnly"){let o,{routeConfig:a}=i;return n!==null&&(t==="always"||a?.path===""||!n.component&&!n.routeConfig?.loadComponent)?o={params:K(K({},n.params),i.params),data:K(K({},n.data),i.data),resolve:K(K(K(K({},i.data),n.data),a?.data),i._resolvedData)}:o={params:K({},i.params),data:K({},i.data),resolve:K(K({},i.data),i._resolvedData??{})},a&&wu(a)&&(o.resolve[Yn]=a.title),o}var Jt=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[Yn]}constructor(n,t,o,a,l,f,k,b,A){this.url=n,this.params=t,this.queryParams=o,this.fragment=a,this.data=l,this.outlet=f,this.component=k,this.routeConfig=b,this._resolve=A}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=tn(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=tn(this.queryParams),this._queryParamMap}toString(){let n=this.url.map(o=>o.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${n}', path:'${t}')`}},Yr=class extends Vr{url;constructor(n,t){super(t),this.url=n,as(this,t)}toString(){return bu(this._root)}};function as(i,n){n.value._routerState=i,n.children.forEach(t=>as(i,t))}function bu(i){let n=i.children.length>0?` { ${i.children.map(bu).join(", ")} } `:"";return`${i.value}${n}`}function Do(i){if(i.snapshot){let n=i.snapshot,t=i._futureSnapshot;i.snapshot=t,ze(n.queryParams,t.queryParams)||i.queryParamsSubject.next(t.queryParams),n.fragment!==t.fragment&&i.fragmentSubject.next(t.fragment),ze(n.params,t.params)||i.paramsSubject.next(t.params),Zc(n.url,t.url)||i.urlSubject.next(t.url),ze(n.data,t.data)||i.dataSubject.next(t.data)}else i.snapshot=i._futureSnapshot,i.dataSubject.next(i._futureSnapshot.data)}function Xo(i,n){let t=ze(i.params,n.params)&&tl(i.url,n.url),o=!i.parent!=!n.parent;return t&&!o&&(!i.parent||Xo(i.parent,n.parent))}function wu(i){return typeof i.title=="string"||i.title===null}var kl=new we(""),us=(()=>{class i{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=Y;activateEvents=new Ot;deactivateEvents=new Ot;attachEvents=new Ot;detachEvents=new Ot;routerOutletData=va(void 0);parentContexts=H(Xr);location=H(_a);changeDetector=H(mo);inputBinder=H(cs,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(t){if(t.name){let{firstChange:o,previousValue:a}=t.name;if(o)return;this.isTrackedInParentContexts(a)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(a)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new ce(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new ce(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new ce(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,o){this.activated=t,this._activatedRoute=o,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,o){if(this.isActivated)throw new ce(4013,!1);this._activatedRoute=t;let a=this.location,f=t.snapshot.component,k=this.parentContexts.getOrCreateContext(this.name).children,b=new Jo(t,k,a.injector,this.routerOutletData);this.activated=a.createComponent(f,{index:a.length,injector:b,environmentInjector:o}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(o){return new(o||i)};static \u0275dir=Or({type:i,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[fa]})}return i})(),Jo=class i{route;childContexts;parent;outletData;__ngOutletInjector(n){return new i(this.route,this.childContexts,n,this.outletData)}constructor(n,t,o,a){this.route=n,this.childContexts=t,this.parent=o,this.outletData=a}get(n,t){return n===rn?this.route:n===Xr?this.childContexts:n===kl?this.outletData:this.parent.get(n,t)}},cs=new we("");function El(i,n,t){let o=Hn(i,n._root,t?t._root:void 0);return new Wr(o,n)}function Hn(i,n,t){if(t&&i.shouldReuseRoute(n.value,t.value.snapshot)){let o=t.value;o._futureSnapshot=n.value;let a=xl(i,n,t);return new xe(o,a)}else{if(i.shouldAttach(n.value)){let l=i.retrieve(n.value);if(l!==null){let f=l.route;return f.value._futureSnapshot=n.value,f.children=n.children.map(k=>Hn(i,k)),f}}let o=Il(n.value),a=n.children.map(l=>Hn(i,l));return new xe(o,a)}}function xl(i,n,t){return n.children.map(o=>{for(let a of t.children)if(i.shouldReuseRoute(o.value,a.value.snapshot))return Hn(i,o,a);return Hn(i,o)})}function Il(i){return new rn(new Ae(i.url),new Ae(i.params),new Ae(i.queryParams),new Ae(i.fragment),new Ae(i.data),i.outlet,i.component,i)}var Vn=class{redirectTo;navigationBehaviorOptions;constructor(n,t){this.redirectTo=n,this.navigationBehaviorOptions=t}},Cu="ngNavigationCancelingError";function Qr(i,n){let{redirectTo:t,navigationBehaviorOptions:o}=$n(n)?{redirectTo:n,navigationBehaviorOptions:void 0}:n,a=Su(!1,Ie.Redirect);return a.url=t,a.navigationBehaviorOptions=o,a}function Su(i,n){let t=new Error(`NavigationCancelingError: ${i||""}`);return t[Cu]=!0,t.cancellationCode=n,t}function Ol(i){return _u(i)&&$n(i.url)}function _u(i){return!!i&&i[Cu]}var Al=(i,n,t,o)=>ne(a=>(new es(n,a.targetRouterState,a.currentRouterState,t,o).activate(i),a)),es=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(n,t,o,a,l){this.routeReuseStrategy=n,this.futureState=t,this.currState=o,this.forwardEvent=a,this.inputBindingEnabled=l}activate(n){let t=this.futureState._root,o=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,o,n),Do(this.futureState.root),this.activateChildRoutes(t,o,n)}deactivateChildRoutes(n,t,o){let a=Zt(t);n.children.forEach(l=>{let f=l.value.outlet;this.deactivateRoutes(l,a[f],o),delete a[f]}),Object.values(a).forEach(l=>{this.deactivateRouteAndItsChildren(l,o)})}deactivateRoutes(n,t,o){let a=n.value,l=t?t.value:null;if(a===l)if(a.component){let f=o.getContext(a.outlet);f&&this.deactivateChildRoutes(n,t,f.children)}else this.deactivateChildRoutes(n,t,o);else l&&this.deactivateRouteAndItsChildren(t,o)}deactivateRouteAndItsChildren(n,t){n.value.component&&this.routeReuseStrategy.shouldDetach(n.value.snapshot)?this.detachAndStoreRouteSubtree(n,t):this.deactivateRouteAndOutlet(n,t)}detachAndStoreRouteSubtree(n,t){let o=t.getContext(n.value.outlet),a=o&&n.value.component?o.children:t,l=Zt(n);for(let f of Object.values(l))this.deactivateRouteAndItsChildren(f,a);if(o&&o.outlet){let f=o.outlet.detach(),k=o.children.onOutletDeactivated();this.routeReuseStrategy.store(n.value.snapshot,{componentRef:f,route:n,contexts:k})}}deactivateRouteAndOutlet(n,t){let o=t.getContext(n.value.outlet),a=o&&n.value.component?o.children:t,l=Zt(n);for(let f of Object.values(l))this.deactivateRouteAndItsChildren(f,a);o&&(o.outlet&&(o.outlet.deactivate(),o.children.onOutletDeactivated()),o.attachRef=null,o.route=null)}activateChildRoutes(n,t,o){let a=Zt(t);n.children.forEach(l=>{this.activateRoutes(l,a[l.value.outlet],o),this.forwardEvent(new Go(l.value.snapshot))}),n.children.length&&this.forwardEvent(new Vo(n.value.snapshot))}activateRoutes(n,t,o){let a=n.value,l=t?t.value:null;if(Do(a),a===l)if(a.component){let f=o.getOrCreateContext(a.outlet);this.activateChildRoutes(n,t,f.children)}else this.activateChildRoutes(n,t,o);else if(a.component){let f=o.getOrCreateContext(a.outlet);if(this.routeReuseStrategy.shouldAttach(a.snapshot)){let k=this.routeReuseStrategy.retrieve(a.snapshot);this.routeReuseStrategy.store(a.snapshot,null),f.children.onOutletReAttached(k.contexts),f.attachRef=k.componentRef,f.route=k.route.value,f.outlet&&f.outlet.attach(k.componentRef,k.route.value),Do(k.route.value),this.activateChildRoutes(n,null,f.children)}else f.attachRef=null,f.route=a,f.outlet&&f.outlet.activateWith(a,f.injector),this.activateChildRoutes(n,null,f.children)}else this.activateChildRoutes(n,null,o)}},Zr=class{path;route;constructor(n){this.path=n,this.route=this.path[this.path.length-1]}},en=class{component;route;constructor(n,t){this.component=n,this.route=t}};function Dl(i,n,t){let o=i._root,a=n?n._root:null;return Pn(o,a,t,[o.value])}function Tl(i){let n=i.routeConfig?i.routeConfig.canActivateChild:null;return!n||n.length===0?null:{node:i,guards:n}}function sn(i,n){let t=Symbol(),o=n.get(i,t);return o===t?typeof i=="function"&&!da(i)?i:n.get(i):o}function Pn(i,n,t,o,a={canDeactivateChecks:[],canActivateChecks:[]}){let l=Zt(n);return i.children.forEach(f=>{Ml(f,l[f.value.outlet],t,o.concat([f.value]),a),delete l[f.value.outlet]}),Object.entries(l).forEach(([f,k])=>Ln(k,t.getContext(f),a)),a}function Ml(i,n,t,o,a={canDeactivateChecks:[],canActivateChecks:[]}){let l=i.value,f=n?n.value:null,k=t?t.getContext(i.value.outlet):null;if(f&&l.routeConfig===f.routeConfig){let b=Pl(f,l,l.routeConfig.runGuardsAndResolvers);b?a.canActivateChecks.push(new Zr(o)):(l.data=f.data,l._resolvedData=f._resolvedData),l.component?Pn(i,n,k?k.children:null,o,a):Pn(i,n,t,o,a),b&&k&&k.outlet&&k.outlet.isActivated&&a.canDeactivateChecks.push(new en(k.outlet.component,f))}else f&&Ln(n,k,a),a.canActivateChecks.push(new Zr(o)),l.component?Pn(i,null,k?k.children:null,o,a):Pn(i,null,t,o,a);return a}function Pl(i,n,t){if(typeof t=="function")return t(i,n);switch(t){case"pathParamsChange":return!Tt(i.url,n.url);case"pathParamsOrQueryParamsChange":return!Tt(i.url,n.url)||!ze(i.queryParams,n.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Xo(i,n)||!ze(i.queryParams,n.queryParams);case"paramsChange":default:return!Xo(i,n)}}function Ln(i,n,t){let o=Zt(i),a=i.value;Object.entries(o).forEach(([l,f])=>{a.component?n?Ln(f,n.children.getContext(l),t):Ln(f,null,t):Ln(f,n,t)}),a.component?n&&n.outlet&&n.outlet.isActivated?t.canDeactivateChecks.push(new en(n.outlet.component,a)):t.canDeactivateChecks.push(new en(null,a)):t.canDeactivateChecks.push(new en(null,a))}function Zn(i){return typeof i=="function"}function jl(i){return typeof i=="boolean"}function Nl(i){return i&&Zn(i.canLoad)}function Ul(i){return i&&Zn(i.canActivate)}function Ll(i){return i&&Zn(i.canActivateChild)}function Fl(i){return i&&Zn(i.canDeactivate)}function $l(i){return i&&Zn(i.canMatch)}function Ru(i){return i instanceof ia||i?.name==="EmptyError"}var Fr=Symbol("INITIAL_VALUE");function on(){return qe(i=>Gi(i.map(n=>n.pipe(Wt(1),ca(Fr)))).pipe(ne(n=>{for(let t of n)if(t!==!0){if(t===Fr)return Fr;if(t===!1||Bl(t))return t}return!0}),Ht(n=>n!==Fr),Wt(1)))}function Bl(i){return $n(i)||i instanceof Vn}function ql(i,n){return De(t=>{let{targetSnapshot:o,currentSnapshot:a,guards:{canActivateChecks:l,canDeactivateChecks:f}}=t;return f.length===0&&l.length===0?G(Se(K({},t),{guardsResult:!0})):Kl(f,o,a,i).pipe(De(k=>k&&jl(k)?zl(o,l,i,n):G(k)),ne(k=>Se(K({},t),{guardsResult:k})))})}function Kl(i,n,t,o){return je(i).pipe(De(a=>Yl(a.component,a.route,t,n,o)),ct(a=>a!==!0,!0))}function zl(i,n,t,o){return je(n).pipe(_n(a=>oa(Vl(a.route.parent,o),Hl(a.route,o),Gl(i,a.path,t),Wl(i,a.route,t))),ct(a=>a!==!0,!0))}function Hl(i,n){return i!==null&&n&&n(new Wo(i)),G(!0)}function Vl(i,n){return i!==null&&n&&n(new Ho(i)),G(!0)}function Wl(i,n,t){let o=n.routeConfig?n.routeConfig.canActivate:null;if(!o||o.length===0)return G(!0);let a=o.map(l=>Yi(()=>{let f=Qn(n)??t,k=sn(l,f),b=Ul(k)?k.canActivate(n,i):Ze(f,()=>k(n,i));return ft(b).pipe(ct())}));return G(a).pipe(on())}function Gl(i,n,t){let o=n[n.length-1],l=n.slice(0,n.length-1).reverse().map(f=>Tl(f)).filter(f=>f!==null).map(f=>Yi(()=>{let k=f.guards.map(b=>{let A=Qn(f.node)??t,F=sn(b,A),B=Ll(F)?F.canActivateChild(o,i):Ze(A,()=>F(o,i));return ft(B).pipe(ct())});return G(k).pipe(on())}));return G(l).pipe(on())}function Yl(i,n,t,o,a){let l=n&&n.routeConfig?n.routeConfig.canDeactivate:null;if(!l||l.length===0)return G(!0);let f=l.map(k=>{let b=Qn(n)??a,A=sn(k,b),F=Fl(A)?A.canDeactivate(i,n,t,o):Ze(b,()=>A(i,n,t,o));return ft(F).pipe(ct())});return G(f).pipe(on())}function Ql(i,n,t,o){let a=n.canLoad;if(a===void 0||a.length===0)return G(!0);let l=a.map(f=>{let k=sn(f,i),b=Nl(k)?k.canLoad(n,t):Ze(i,()=>k(n,t));return ft(b)});return G(l).pipe(on(),ku(o))}function ku(i){return na(be(n=>{if(typeof n!="boolean")throw Qr(i,n)}),ne(n=>n===!0))}function Zl(i,n,t,o){let a=n.canMatch;if(!a||a.length===0)return G(!0);let l=a.map(f=>{let k=sn(f,i),b=$l(k)?k.canMatch(n,t):Ze(i,()=>k(n,t));return ft(b)});return G(l).pipe(on(),ku(o))}var Wn=class{segmentGroup;constructor(n){this.segmentGroup=n||null}},Gn=class extends Error{urlTree;constructor(n){super(),this.urlTree=n}};function Qt(i){return Sn(new Wn(i))}function Xl(i){return Sn(new ce(4e3,!1))}function Jl(i){return Sn(Su(!1,Ie.GuardRejected))}var ts=class{urlSerializer;urlTree;constructor(n,t){this.urlSerializer=n,this.urlTree=t}lineralizeSegments(n,t){let o=[],a=t.root;for(;;){if(o=o.concat(a.segments),a.numberOfChildren===0)return G(o);if(a.numberOfChildren>1||!a.children[Y])return Xl(`${n.redirectTo}`);a=a.children[Y]}}applyRedirectCommands(n,t,o,a,l){if(typeof t!="string"){let k=t,{queryParams:b,fragment:A,routeConfig:F,url:B,outlet:W,params:he,data:fe,title:Le}=a,ge=Ze(l,()=>k({params:he,data:fe,queryParams:b,fragment:A,routeConfig:F,url:B,outlet:W,title:Le}));if(ge instanceof Je)throw new Gn(ge);t=ge}let f=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),n,o);if(t[0]==="/")throw new Gn(f);return f}applyRedirectCreateUrlTree(n,t,o,a){let l=this.createSegmentGroup(n,t.root,o,a);return new Je(l,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(n,t){let o={};return Object.entries(n).forEach(([a,l])=>{if(typeof l=="string"&&l[0]===":"){let k=l.substring(1);o[a]=t[k]}else o[a]=l}),o}createSegmentGroup(n,t,o,a){let l=this.createSegments(n,t.segments,o,a),f={};return Object.entries(t.children).forEach(([k,b])=>{f[k]=this.createSegmentGroup(n,b,o,a)}),new ee(l,f)}createSegments(n,t,o,a){return t.map(l=>l.path[0]===":"?this.findPosParam(n,l,a):this.findOrReturn(l,o))}findPosParam(n,t,o){let a=o[t.path.substring(1)];if(!a)throw new ce(4001,!1);return a}findOrReturn(n,t){let o=0;for(let a of t){if(a.path===n.path)return t.splice(o),a;o++}return n}},ns={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function ed(i,n,t,o,a){let l=Eu(i,n,t);return l.matched?(o=Sl(n,o),Zl(o,n,t,a).pipe(ne(f=>f===!0?l:K({},ns)))):G(l)}function Eu(i,n,t){if(n.path==="**")return td(t);if(n.path==="")return n.pathMatch==="full"&&(i.hasChildren()||t.length>0)?K({},ns):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let a=(n.matcher||Qc)(t,i,n);if(!a)return K({},ns);let l={};Object.entries(a.posParams??{}).forEach(([k,b])=>{l[k]=b.path});let f=a.consumed.length>0?K(K({},l),a.consumed[a.consumed.length-1].parameters):l;return{matched:!0,consumedSegments:a.consumed,remainingSegments:t.slice(a.consumed.length),parameters:f,positionalParamSegments:a.posParams??{}}}function td(i){return{matched:!0,parameters:i.length>0?ou(i).parameters:{},consumedSegments:i,remainingSegments:[],positionalParamSegments:{}}}function tu(i,n,t,o){return t.length>0&&id(i,t,o)?{segmentGroup:new ee(n,rd(o,new ee(t,i.children))),slicedSegments:[]}:t.length===0&&od(i,t,o)?{segmentGroup:new ee(i.segments,nd(i,t,o,i.children)),slicedSegments:t}:{segmentGroup:new ee(i.segments,i.children),slicedSegments:t}}function nd(i,n,t,o){let a={};for(let l of t)if(Jr(i,n,l)&&!o[Ue(l)]){let f=new ee([],{});a[Ue(l)]=f}return K(K({},o),a)}function rd(i,n){let t={};t[Y]=n;for(let o of i)if(o.path===""&&Ue(o)!==Y){let a=new ee([],{});t[Ue(o)]=a}return t}function id(i,n,t){return t.some(o=>Jr(i,n,o)&&Ue(o)!==Y)}function od(i,n,t){return t.some(o=>Jr(i,n,o))}function Jr(i,n,t){return(i.hasChildren()||n.length>0)&&t.pathMatch==="full"?!1:t.path===""}function sd(i,n,t){return n.length===0&&!i.children[t]}var rs=class{};function ad(i,n,t,o,a,l,f="emptyOnly"){return new is(i,n,t,o,a,f,l).recognize()}var ud=31,is=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(n,t,o,a,l,f,k){this.injector=n,this.configLoader=t,this.rootComponentType=o,this.config=a,this.urlTree=l,this.paramsInheritanceStrategy=f,this.urlSerializer=k,this.applyRedirects=new ts(this.urlSerializer,this.urlTree)}noMatchError(n){return new ce(4002,`'${n.segmentGroup}'`)}recognize(){let n=tu(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(n).pipe(ne(({children:t,rootSnapshot:o})=>{let a=new xe(o,t),l=new Yr("",a),f=gl(o,[],this.urlTree.queryParams,this.urlTree.fragment);return f.queryParams=this.urlTree.queryParams,l.url=this.urlSerializer.serialize(f),{state:l,tree:f}}))}match(n){let t=new Jt([],Object.freeze({}),Object.freeze(K({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),Y,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,n,Y,t).pipe(ne(o=>({children:o,rootSnapshot:t})),Vt(o=>{if(o instanceof Gn)return this.urlTree=o.urlTree,this.match(o.urlTree.root);throw o instanceof Wn?this.noMatchError(o):o}))}processSegmentGroup(n,t,o,a,l){return o.segments.length===0&&o.hasChildren()?this.processChildren(n,t,o,l):this.processSegment(n,t,o,o.segments,a,!0,l).pipe(ne(f=>f instanceof xe?[f]:[]))}processChildren(n,t,o,a){let l=[];for(let f of Object.keys(o.children))f==="primary"?l.unshift(f):l.push(f);return je(l).pipe(_n(f=>{let k=o.children[f],b=_l(t,f);return this.processSegmentGroup(n,b,k,f,a)}),ua((f,k)=>(f.push(...k),f)),Qi(null),aa(),De(f=>{if(f===null)return Qt(o);let k=xu(f);return cd(k),G(k)}))}processSegment(n,t,o,a,l,f,k){return je(t).pipe(_n(b=>this.processSegmentAgainstRoute(b._injector??n,t,b,o,a,l,f,k).pipe(Vt(A=>{if(A instanceof Wn)return G(null);throw A}))),ct(b=>!!b),Vt(b=>{if(Ru(b))return sd(o,a,l)?G(new rs):Qt(o);throw b}))}processSegmentAgainstRoute(n,t,o,a,l,f,k,b){return Ue(o)!==f&&(f===Y||!Jr(a,l,o))?Qt(a):o.redirectTo===void 0?this.matchSegmentAgainstRoute(n,a,o,l,f,b):this.allowRedirects&&k?this.expandSegmentAgainstRouteUsingRedirect(n,a,t,o,l,f,b):Qt(a)}expandSegmentAgainstRouteUsingRedirect(n,t,o,a,l,f,k){let{matched:b,parameters:A,consumedSegments:F,positionalParamSegments:B,remainingSegments:W}=Eu(t,a,l);if(!b)return Qt(t);typeof a.redirectTo=="string"&&a.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>ud&&(this.allowRedirects=!1));let he=new Jt(l,A,Object.freeze(K({},this.urlTree.queryParams)),this.urlTree.fragment,nu(a),Ue(a),a.component??a._loadedComponent??null,a,ru(a)),fe=Gr(he,k,this.paramsInheritanceStrategy);he.params=Object.freeze(fe.params),he.data=Object.freeze(fe.data);let Le=this.applyRedirects.applyRedirectCommands(F,a.redirectTo,B,he,n);return this.applyRedirects.lineralizeSegments(a,Le).pipe(De(ge=>this.processSegment(n,o,t,ge.concat(W),f,!1,k)))}matchSegmentAgainstRoute(n,t,o,a,l,f){let k=ed(t,o,a,n,this.urlSerializer);return o.path==="**"&&(t.children={}),k.pipe(qe(b=>b.matched?(n=o._injector??n,this.getChildConfig(n,o,a).pipe(qe(({routes:A})=>{let F=o._loadedInjector??n,{parameters:B,consumedSegments:W,remainingSegments:he}=b,fe=new Jt(W,B,Object.freeze(K({},this.urlTree.queryParams)),this.urlTree.fragment,nu(o),Ue(o),o.component??o._loadedComponent??null,o,ru(o)),Le=Gr(fe,f,this.paramsInheritanceStrategy);fe.params=Object.freeze(Le.params),fe.data=Object.freeze(Le.data);let{segmentGroup:ge,slicedSegments:et}=tu(t,W,he,A);if(et.length===0&&ge.hasChildren())return this.processChildren(F,A,ge,fe).pipe(ne(gt=>new xe(fe,gt)));if(A.length===0&&et.length===0)return G(new xe(fe,[]));let pt=Ue(o)===l;return this.processSegment(F,A,ge,et,pt?Y:l,!0,fe).pipe(ne(gt=>new xe(fe,gt instanceof xe?[gt]:[])))}))):Qt(t)))}getChildConfig(n,t,o){return t.children?G({routes:t.children,injector:n}):t.loadChildren?t._loadedRoutes!==void 0?G({routes:t._loadedRoutes,injector:t._loadedInjector}):Ql(n,t,o,this.urlSerializer).pipe(De(a=>a?this.configLoader.loadChildren(n,t).pipe(be(l=>{t._loadedRoutes=l.routes,t._loadedInjector=l.injector})):Jl(t))):G({routes:[],injector:n})}};function cd(i){i.sort((n,t)=>n.value.outlet===Y?-1:t.value.outlet===Y?1:n.value.outlet.localeCompare(t.value.outlet))}function ld(i){let n=i.value.routeConfig;return n&&n.path===""}function xu(i){let n=[],t=new Set;for(let o of i){if(!ld(o)){n.push(o);continue}let a=n.find(l=>o.value.routeConfig===l.value.routeConfig);a!==void 0?(a.children.push(...o.children),t.add(a)):n.push(o)}for(let o of t){let a=xu(o.children);n.push(new xe(o.value,a))}return n.filter(o=>!t.has(o))}function nu(i){return i.data||{}}function ru(i){return i.resolve||{}}function dd(i,n,t,o,a,l){return De(f=>ad(i,n,t,o,f.extractedUrl,a,l).pipe(ne(({state:k,tree:b})=>Se(K({},f),{targetSnapshot:k,urlAfterRedirects:b}))))}function hd(i,n){return De(t=>{let{targetSnapshot:o,guards:{canActivateChecks:a}}=t;if(!a.length)return G(t);let l=new Set(a.map(b=>b.route)),f=new Set;for(let b of l)if(!f.has(b))for(let A of Iu(b))f.add(A);let k=0;return je(f).pipe(_n(b=>l.has(b)?fd(b,o,i,n):(b.data=Gr(b,b.parent,i).resolve,G(void 0))),be(()=>k++),Zi(1),De(b=>k===f.size?G(t):ut))})}function Iu(i){let n=i.children.map(t=>Iu(t)).flat();return[i,...n]}function fd(i,n,t,o){let a=i.routeConfig,l=i._resolve;return a?.title!==void 0&&!wu(a)&&(l[Yn]=a.title),pd(l,i,n,o).pipe(ne(f=>(i._resolvedData=f,i.data=Gr(i,i.parent,t).resolve,null)))}function pd(i,n,t,o){let a=Po(i);if(a.length===0)return G({});let l={};return je(a).pipe(De(f=>gd(i[f],n,t,o).pipe(ct(),be(k=>{if(k instanceof Vn)throw Qr(new Fn,k);l[f]=k}))),Zi(1),sa(l),Vt(f=>Ru(f)?ut:Sn(f)))}function gd(i,n,t,o){let a=Qn(n)??o,l=sn(i,a),f=l.resolve?l.resolve(n,t):Ze(a,()=>l(n,t));return ft(f)}function To(i){return qe(n=>{let t=i(n);return t?je(t).pipe(ne(()=>n)):G(n)})}var Ou=(()=>{class i{buildTitle(t){let o,a=t.root;for(;a!==void 0;)o=this.getResolvedTitleForRoute(a)??o,a=a.children.find(l=>l.outlet===Y);return o}getResolvedTitleForRoute(t){return t.data[Yn]}static \u0275fac=function(o){return new(o||i)};static \u0275prov=re({token:i,factory:()=>H(md),providedIn:"root"})}return i})(),md=(()=>{class i extends Ou{title;constructor(t){super(),this.title=t}updateTitle(t){let o=this.buildTitle(t);o!==void 0&&this.title.setTitle(o)}static \u0275fac=function(o){return new(o||i)(ue(Qa))};static \u0275prov=re({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),ls=new we("",{providedIn:"root",factory:()=>({})}),vd=(()=>{class i{static \u0275fac=function(o){return new(o||i)};static \u0275cmp=Gt({type:i,selectors:[["ng-component"]],decls:1,vars:0,template:function(o,a){o&1&&Dr(0,"router-outlet")},dependencies:[us],encapsulation:2})}return i})();function ds(i){let n=i.children&&i.children.map(ds),t=n?Se(K({},i),{children:n}):K({},i);return!t.component&&!t.loadComponent&&(n||t.loadChildren)&&t.outlet&&t.outlet!==Y&&(t.component=vd),t}var hs=new we(""),yd=(()=>{class i{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=H(go);loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return G(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);let o=ft(t.loadComponent()).pipe(ne(Au),be(l=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=l}),Er(()=>{this.componentLoaders.delete(t)})),a=new Wi(o,()=>new It).pipe(Vi());return this.componentLoaders.set(t,a),a}loadChildren(t,o){if(this.childrenLoaders.get(o))return this.childrenLoaders.get(o);if(o._loadedRoutes)return G({routes:o._loadedRoutes,injector:o._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(o);let l=bd(o,this.compiler,t,this.onLoadEndListener).pipe(Er(()=>{this.childrenLoaders.delete(o)})),f=new Wi(l,()=>new It).pipe(Vi());return this.childrenLoaders.set(o,f),f}static \u0275fac=function(o){return new(o||i)};static \u0275prov=re({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();function bd(i,n,t,o){return ft(i.loadChildren()).pipe(ne(Au),De(a=>a instanceof ka||Array.isArray(a)?G(a):je(n.compileModuleAsync(a))),ne(a=>{o&&o(i);let l,f,k=!1;return Array.isArray(a)?(f=a,k=!0):(l=a.create(t).injector,f=l.get(hs,[],{optional:!0,self:!0}).flat()),{routes:f.map(ds),injector:l}}))}function wd(i){return i&&typeof i=="object"&&"default"in i}function Au(i){return wd(i)?i.default:i}var fs=(()=>{class i{static \u0275fac=function(o){return new(o||i)};static \u0275prov=re({token:i,factory:()=>H(Cd),providedIn:"root"})}return i})(),Cd=(()=>{class i{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,o){return t}static \u0275fac=function(o){return new(o||i)};static \u0275prov=re({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),Sd=new we("");var _d=new we(""),Rd=(()=>{class i{currentNavigation=null;currentTransition=null;lastSuccessfulNavigation=null;events=new It;transitionAbortSubject=new It;configLoader=H(yd);environmentInjector=H(xr);urlSerializer=H(ss);rootContexts=H(Xr);location=H(Tr);inputBindingEnabled=H(cs,{optional:!0})!==null;titleStrategy=H(Ou);options=H(ls,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=H(fs);createViewTransition=H(Sd,{optional:!0});navigationErrorHandler=H(_d,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>G(void 0);rootComponentType=null;constructor(){let t=a=>this.events.next(new Ko(a)),o=a=>this.events.next(new zo(a));this.configLoader.onLoadEndListener=o,this.configLoader.onLoadStartListener=t}complete(){this.transitions?.complete()}handleNavigationRequest(t){let o=++this.navigationId;this.transitions?.next(Se(K(K({},this.transitions.value),t),{id:o}))}setupNavigations(t,o,a){return this.transitions=new Ae({id:0,currentUrlTree:o,currentRawUrl:o,extractedUrl:this.urlHandlingStrategy.extract(o),urlAfterRedirects:this.urlHandlingStrategy.extract(o),rawUrl:o,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:Un,restoredState:null,currentSnapshot:a.snapshot,targetSnapshot:null,currentRouterState:a,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Ht(l=>l.id!==0),ne(l=>Se(K({},l),{extractedUrl:this.urlHandlingStrategy.extract(l.rawUrl)})),qe(l=>{let f=!1,k=!1;return G(l).pipe(qe(b=>{if(this.navigationId>l.id)return this.cancelNavigationTransition(l,"",Ie.SupersededByNewNavigation),ut;this.currentTransition=l,this.currentNavigation={id:b.id,initialUrl:b.rawUrl,extractedUrl:b.extractedUrl,targetBrowserUrl:typeof b.extras.browserUrl=="string"?this.urlSerializer.parse(b.extras.browserUrl):b.extras.browserUrl,trigger:b.source,extras:b.extras,previousNavigation:this.lastSuccessfulNavigation?Se(K({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let A=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),F=b.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!A&&F!=="reload"){let B="";return this.events.next(new Pt(b.id,this.urlSerializer.serialize(b.rawUrl),B,Lo.IgnoredSameUrlNavigation)),b.resolve(!1),ut}if(this.urlHandlingStrategy.shouldProcessUrl(b.rawUrl))return G(b).pipe(qe(B=>{let W=this.transitions?.getValue();return this.events.next(new qn(B.id,this.urlSerializer.serialize(B.extractedUrl),B.source,B.restoredState)),W!==this.transitions?.getValue()?ut:Promise.resolve(B)}),dd(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),be(B=>{l.targetSnapshot=B.targetSnapshot,l.urlAfterRedirects=B.urlAfterRedirects,this.currentNavigation=Se(K({},this.currentNavigation),{finalUrl:B.urlAfterRedirects});let W=new Hr(B.id,this.urlSerializer.serialize(B.extractedUrl),this.urlSerializer.serialize(B.urlAfterRedirects),B.targetSnapshot);this.events.next(W)}));if(A&&this.urlHandlingStrategy.shouldProcessUrl(b.currentRawUrl)){let{id:B,extractedUrl:W,source:he,restoredState:fe,extras:Le}=b,ge=new qn(B,this.urlSerializer.serialize(W),he,fe);this.events.next(ge);let et=yu(this.rootComponentType).snapshot;return this.currentTransition=l=Se(K({},b),{targetSnapshot:et,urlAfterRedirects:W,extras:Se(K({},Le),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=W,G(l)}else{let B="";return this.events.next(new Pt(b.id,this.urlSerializer.serialize(b.extractedUrl),B,Lo.IgnoredByUrlHandlingStrategy)),b.resolve(!1),ut}}),be(b=>{let A=new Fo(b.id,this.urlSerializer.serialize(b.extractedUrl),this.urlSerializer.serialize(b.urlAfterRedirects),b.targetSnapshot);this.events.next(A)}),ne(b=>(this.currentTransition=l=Se(K({},b),{guards:Dl(b.targetSnapshot,b.currentSnapshot,this.rootContexts)}),l)),ql(this.environmentInjector,b=>this.events.next(b)),be(b=>{if(l.guardsResult=b.guardsResult,b.guardsResult&&typeof b.guardsResult!="boolean")throw Qr(this.urlSerializer,b.guardsResult);let A=new $o(b.id,this.urlSerializer.serialize(b.extractedUrl),this.urlSerializer.serialize(b.urlAfterRedirects),b.targetSnapshot,!!b.guardsResult);this.events.next(A)}),Ht(b=>b.guardsResult?!0:(this.cancelNavigationTransition(b,"",Ie.GuardRejected),!1)),To(b=>{if(b.guards.canActivateChecks.length)return G(b).pipe(be(A=>{let F=new Bo(A.id,this.urlSerializer.serialize(A.extractedUrl),this.urlSerializer.serialize(A.urlAfterRedirects),A.targetSnapshot);this.events.next(F)}),qe(A=>{let F=!1;return G(A).pipe(hd(this.paramsInheritanceStrategy,this.environmentInjector),be({next:()=>F=!0,complete:()=>{F||this.cancelNavigationTransition(A,"",Ie.NoDataFromResolver)}}))}),be(A=>{let F=new qo(A.id,this.urlSerializer.serialize(A.extractedUrl),this.urlSerializer.serialize(A.urlAfterRedirects),A.targetSnapshot);this.events.next(F)}))}),To(b=>{let A=F=>{let B=[];F.routeConfig?.loadComponent&&!F.routeConfig._loadedComponent&&B.push(this.configLoader.loadComponent(F.routeConfig).pipe(be(W=>{F.component=W}),ne(()=>{})));for(let W of F.children)B.push(...A(W));return B};return Gi(A(b.targetSnapshot.root)).pipe(Qi(null),Wt(1))}),To(()=>this.afterPreactivation()),qe(()=>{let{currentSnapshot:b,targetSnapshot:A}=l,F=this.createViewTransition?.(this.environmentInjector,b.root,A.root);return F?je(F).pipe(ne(()=>l)):G(l)}),ne(b=>{let A=El(t.routeReuseStrategy,b.targetSnapshot,b.currentRouterState);return this.currentTransition=l=Se(K({},b),{targetRouterState:A}),this.currentNavigation.targetRouterState=A,l}),be(()=>{this.events.next(new zn)}),Al(this.rootContexts,t.routeReuseStrategy,b=>this.events.next(b),this.inputBindingEnabled),Wt(1),be({next:b=>{f=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Mt(b.id,this.urlSerializer.serialize(b.extractedUrl),this.urlSerializer.serialize(b.urlAfterRedirects))),this.titleStrategy?.updateTitle(b.targetRouterState.snapshot),b.resolve(!0)},complete:()=>{f=!0}}),la(this.transitionAbortSubject.pipe(be(b=>{throw b}))),Er(()=>{!f&&!k&&this.cancelNavigationTransition(l,"",Ie.SupersededByNewNavigation),this.currentTransition?.id===l.id&&(this.currentNavigation=null,this.currentTransition=null)}),Vt(b=>{if(k=!0,_u(b))this.events.next(new Xe(l.id,this.urlSerializer.serialize(l.extractedUrl),b.message,b.cancellationCode)),Ol(b)?this.events.next(new nn(b.url,b.navigationBehaviorOptions)):l.resolve(!1);else{let A=new Kn(l.id,this.urlSerializer.serialize(l.extractedUrl),b,l.targetSnapshot??void 0);try{let F=Ze(this.environmentInjector,()=>this.navigationErrorHandler?.(A));if(F instanceof Vn){let{message:B,cancellationCode:W}=Qr(this.urlSerializer,F);this.events.next(new Xe(l.id,this.urlSerializer.serialize(l.extractedUrl),B,W)),this.events.next(new nn(F.redirectTo,F.navigationBehaviorOptions))}else throw this.events.next(A),b}catch(F){this.options.resolveNavigationPromiseOnError?l.resolve(!1):l.reject(F)}}return ut}))}))}cancelNavigationTransition(t,o,a){let l=new Xe(t.id,this.urlSerializer.serialize(t.extractedUrl),o,a);this.events.next(l),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),o=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return t.toString()!==o?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static \u0275fac=function(o){return new(o||i)};static \u0275prov=re({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();function kd(i){return i!==Un}var Ed=(()=>{class i{static \u0275fac=function(o){return new(o||i)};static \u0275prov=re({token:i,factory:()=>H(xd),providedIn:"root"})}return i})(),os=class{shouldDetach(n){return!1}store(n,t){}shouldAttach(n){return!1}retrieve(n){return null}shouldReuseRoute(n,t){return n.routeConfig===t.routeConfig}},xd=(()=>{class i extends os{static \u0275fac=(()=>{let t;return function(a){return(t||(t=Ji(i)))(a||i)}})();static \u0275prov=re({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),Du=(()=>{class i{static \u0275fac=function(o){return new(o||i)};static \u0275prov=re({token:i,factory:()=>H(Id),providedIn:"root"})}return i})(),Id=(()=>{class i extends Du{location=H(Tr);urlSerializer=H(ss);options=H(ls,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";urlHandlingStrategy=H(fs);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new Je;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}routerState=yu(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(o=>{o.type==="popstate"&&t(o.url,o.state)})}handleRouterEvent(t,o){if(t instanceof qn)this.stateMemento=this.createStateMemento();else if(t instanceof Pt)this.rawUrlTree=o.initialUrl;else if(t instanceof Hr){if(this.urlUpdateStrategy==="eager"&&!o.extras.skipLocationChange){let a=this.urlHandlingStrategy.merge(o.finalUrl,o.initialUrl);this.setBrowserUrl(o.targetBrowserUrl??a,o)}}else t instanceof zn?(this.currentUrlTree=o.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(o.finalUrl,o.initialUrl),this.routerState=o.targetRouterState,this.urlUpdateStrategy==="deferred"&&!o.extras.skipLocationChange&&this.setBrowserUrl(o.targetBrowserUrl??this.rawUrlTree,o)):t instanceof Xe&&(t.code===Ie.GuardRejected||t.code===Ie.NoDataFromResolver)?this.restoreHistory(o):t instanceof Kn?this.restoreHistory(o,!0):t instanceof Mt&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,o){let a=t instanceof Je?this.urlSerializer.serialize(t):t;if(this.location.isCurrentPathEqualTo(a)||o.extras.replaceUrl){let l=this.browserPageId,f=K(K({},o.extras.state),this.generateNgRouterState(o.id,l));this.location.replaceState(a,"",f)}else{let l=K(K({},o.extras.state),this.generateNgRouterState(o.id,this.browserPageId+1));this.location.go(a,"",l)}}restoreHistory(t,o=!1){if(this.canceledNavigationResolution==="computed"){let a=this.browserPageId,l=this.currentPageId-a;l!==0?this.location.historyGo(l):this.currentUrlTree===t.finalUrl&&l===0&&(this.resetState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(o&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,o){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:o}:{navigationId:t}}static \u0275fac=(()=>{let t;return function(a){return(t||(t=Ji(i)))(a||i)}})();static \u0275prov=re({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),jn=function(i){return i[i.COMPLETE=0]="COMPLETE",i[i.FAILED=1]="FAILED",i[i.REDIRECTING=2]="REDIRECTING",i}(jn||{});function Od(i,n){i.events.pipe(Ht(t=>t instanceof Mt||t instanceof Xe||t instanceof Kn||t instanceof Pt),ne(t=>t instanceof Mt||t instanceof Pt?jn.COMPLETE:(t instanceof Xe?t.code===Ie.Redirect||t.code===Ie.SupersededByNewNavigation:!1)?jn.REDIRECTING:jn.FAILED),Ht(t=>t!==jn.REDIRECTING),Wt(1)).subscribe(()=>{n()})}var Ad={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Dd={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Tu=(()=>{class i{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=H(Ar);stateManager=H(Du);options=H(ls,{optional:!0})||{};pendingTasks=H(ma);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=H(Rd);urlSerializer=H(ss);location=H(Tr);urlHandlingStrategy=H(fs);_events=new It;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=H(Ed);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=H(hs,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!H(cs,{optional:!0});constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}eventsSubscription=new ta;subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(o=>{try{let a=this.navigationTransitions.currentTransition,l=this.navigationTransitions.currentNavigation;if(a!==null&&l!==null){if(this.stateManager.handleRouterEvent(o,l),o instanceof Xe&&o.code!==Ie.Redirect&&o.code!==Ie.SupersededByNewNavigation)this.navigated=!0;else if(o instanceof Mt)this.navigated=!0;else if(o instanceof nn){let f=o.navigationBehaviorOptions,k=this.urlHandlingStrategy.merge(o.url,a.currentRawUrl),b=K({browserUrl:a.extras.browserUrl,info:a.extras.info,skipLocationChange:a.extras.skipLocationChange,replaceUrl:a.extras.replaceUrl||this.urlUpdateStrategy==="eager"||kd(a.source)},f);this.scheduleNavigation(k,Un,null,b,{resolve:a.resolve,reject:a.reject,promise:a.promise})}}Md(o)&&this._events.next(o)}catch(a){this.navigationTransitions.transitionAbortSubject.next(a)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Un,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,o)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(t,"popstate",o)},0)})}navigateToSyncWithBrowser(t,o,a){let l={replaceUrl:!0},f=a?.navigationId?a:null;if(a){let b=K({},a);delete b.navigationId,delete b.\u0275routerPageId,Object.keys(b).length!==0&&(l.state=b)}let k=this.parseUrl(t);this.scheduleNavigation(k,o,f,l)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(ds),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,o={}){let{relativeTo:a,queryParams:l,fragment:f,queryParamsHandling:k,preserveFragment:b}=o,A=b?this.currentUrlTree.fragment:f,F=null;switch(k??this.options.defaultQueryParamsHandling){case"merge":F=K(K({},this.currentUrlTree.queryParams),l);break;case"preserve":F=this.currentUrlTree.queryParams;break;default:F=l||null}F!==null&&(F=this.removeEmptyProps(F));let B;try{let W=a?a.snapshot:this.routerState.snapshot.root;B=pu(W)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),B=this.currentUrlTree.root}return gu(B,t,F,A??null)}navigateByUrl(t,o={skipLocationChange:!1}){let a=$n(t)?t:this.parseUrl(t),l=this.urlHandlingStrategy.merge(a,this.rawUrlTree);return this.scheduleNavigation(l,Un,null,o)}navigate(t,o={skipLocationChange:!1}){return Td(t),this.navigateByUrl(this.createUrlTree(t,o),o)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,o){let a;if(o===!0?a=K({},Ad):o===!1?a=K({},Dd):a=o,$n(t))return Za(this.currentUrlTree,t,a);let l=this.parseUrl(t);return Za(this.currentUrlTree,l,a)}removeEmptyProps(t){return Object.entries(t).reduce((o,[a,l])=>(l!=null&&(o[a]=l),o),{})}scheduleNavigation(t,o,a,l,f){if(this.disposed)return Promise.resolve(!1);let k,b,A;f?(k=f.resolve,b=f.reject,A=f.promise):A=new Promise((B,W)=>{k=B,b=W});let F=this.pendingTasks.add();return Od(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(F))}),this.navigationTransitions.handleNavigationRequest({source:o,restoredState:a,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:l,resolve:k,reject:b,promise:A,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),A.catch(B=>Promise.reject(B))}static \u0275fac=function(o){return new(o||i)};static \u0275prov=re({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();function Td(i){for(let n=0;n<i.length;n++)if(i[n]==null)throw new ce(4008,!1)}function Md(i){return!(i instanceof zn)&&!(i instanceof nn)}var Pd=new we("");function Mu(i,...n){return Rn([{provide:hs,multi:!0,useValue:i},[],{provide:rn,useFactory:jd,deps:[Tu]},{provide:Ia,multi:!0,useFactory:Nd},n.map(t=>t.\u0275providers)])}function jd(i){return i.routerState.root}function Nd(){let i=H(pa);return n=>{let t=i.get(ao);if(n!==t.components[0])return;let o=i.get(Tu),a=i.get(Ud);i.get(Ld)===1&&o.initialNavigation(),i.get(Fd,null,Xi.Optional)?.setUpPreloading(),i.get(Pd,null,Xi.Optional)?.init(),o.resetRootComponentType(t.componentTypes[0]),a.closed||(a.next(),a.complete(),a.unsubscribe())}}var Ud=new we("",{factory:()=>new It}),Ld=new we("",{providedIn:"root",factory:()=>1});var Fd=new we("");var ei=class i{constructor(n){this.elementRef=n}clickOutside=new Ot;onClick(n){this.elementRef.nativeElement.contains(n.target)||this.clickOutside.emit()}static \u0275fac=function(t){return new(t||i)(io(to))};static \u0275dir=Or({type:i,selectors:[["","appClickOutside",""]],hostBindings:function(t,o){t&1&&Ke("click",function(l){return o.onClick(l)},!1,Sa)},outputs:{clickOutside:"clickOutside"}})};var ti=_c(Pu(),1),ju=Symbol.for("Dexie"),ni=globalThis[ju]||(globalThis[ju]=ti.default);if(ti.default.semVer!==ni.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${ti.default.semVer} and ${ni.semVer}`);var{liveQuery:Sf,mergeRanges:_f,rangesOverlap:Rf,RangeSet:kf,cmp:Ef,Entity:xf,PropModSymbol:If,PropModification:Of,replacePrefix:Af,add:Df,remove:Tf}=ni;var Nu=ni;var ri=class i extends Nu{selectedState;constructor(){super("ChecklistDB"),this.version(1).stores({selectedState:"id"})}saveState(n){return Qe(this,null,function*(){yield this.selectedState.put({id:1,state:n})})}getState(){return Qe(this,null,function*(){return(yield this.selectedState.get(1))?.state})}deleteState(){return Qe(this,null,function*(){yield this.selectedState.delete(1)})}hasState(){return Qe(this,null,function*(){return!!(yield this.selectedState.get(1))})}static \u0275fac=function(t){return new(t||i)};static \u0275prov=re({token:i,factory:i.\u0275fac,providedIn:"root"})};var Uu=(i,n)=>n.id,Bd=(i,n)=>({black:i,gray:n}),qd=i=>({shadow:i}),Kd=i=>({"background-color":i});function zd(i,n){if(i&1){let t=ho();_e(0,"li",9)(1,"input",10),Ke("change",function(){kn(t);let a=ht().$implicit,l=ht(3);return En(l.toggleSubcategoryChecked(a))}),Te(),At(2),Te()}if(i&2){let t=ht().$implicit;dt("ngStyle",po(4,Kd,t.color))("@toggleHeight",void 0),Ne(),dt("checked",t.checked),Ne(),fo(" ",t.name," ")}}function Hd(i,n){if(i&1&&so(0,zd,3,6,"li",9),i&2){let t=ht().$implicit;uo(t.open?0:-1)}}function Vd(i,n){if(i&1){let t=ho();_e(0,"ul",5)(1,"li",6)(2,"div",7),Ke("click",function(){let a=kn(t).$implicit,l=ht(2);return En(l.toggleCategoryOpen(a))}),_e(3,"input",2),Ke("change",function(){let a=kn(t).$implicit,l=ht(2);return En(l.toggleCategoryChecked(a))})("click",function(a){return kn(t),En(a.stopPropagation())}),Te(),_e(4,"span",8),At(5),Te()(),_e(6,"ul"),co(7,Hd,1,1,null,null,Uu),Te()()()}if(i&2){let t=n.$implicit;dt("ngClass",po(4,qd,t.open)),Ne(3),dt("checked",t.checked)("indeterminate",t.categoryIndeterminate),Ne(2),Oa(t.name),Ne(2),lo(t.subcategories)}}function Wd(i,n){if(i&1&&(_e(0,"div",4),co(1,Vd,9,6,"ul",5,Uu),Te()),i&2){let t=ht();dt("@toggleHeight",void 0),Ne(),lo(t.categories)}}var ii=class i{allChecked=!1;allIndeterminate=!1;openChecklist=!1;subcategoryIdCounter=1;categoryIdCounter=1;checklistInfo=Ra("");indexeddbService=H(ri);subcategories=[{name:"\u041D\u0435\u0440\u0430\u0437\u043E\u0431\u0440\u0430\u043D\u043D\u043E\u0435",checked:!1,color:"#99CCFD"},{name:"\u041F\u0435\u0440\u0435\u0433\u043E\u0432\u043E\u0440\u044B",checked:!1,color:"#FFFF99"},{name:"\u041F\u0440\u0438\u043D\u0438\u043C\u0430\u044E\u0442 \u0440\u0435\u0448\u0435\u043D\u0438\u0435",checked:!1,color:"#FFCC66"},{name:"\u0423\u0441\u043F\u0435\u0448\u043D\u043E",checked:!1,color:"#CCFF66"}];categories=[{id:this.categoryIdCounter++,name:"\u041F\u0440\u043E\u0434\u0430\u0436\u0438",checked:!1,categoryIndeterminate:!1,open:!1,subcategories:this.createSubcategories()},{id:this.categoryIdCounter++,name:"\u0421\u043E\u0442\u0440\u0443\u0434\u043D\u0438\u043A\u0438",checked:!1,categoryIndeterminate:!1,open:!1,subcategories:this.createSubcategories()},{id:this.categoryIdCounter++,name:"\u041F\u0430\u0440\u0442\u043D\u0451\u0440\u044B",checked:!1,categoryIndeterminate:!1,open:!1,subcategories:this.createSubcategories()},{id:this.categoryIdCounter++,name:"\u0418\u0432\u0435\u043D\u0442",checked:!1,categoryIndeterminate:!1,open:!1,subcategories:this.createSubcategories()},{id:this.categoryIdCounter++,name:"\u0412\u0445\u043E\u0434\u044F\u0449\u0438\u0435 \u043E\u0431\u0440\u0430\u0449\u0435\u043D\u0438\u044F",checked:!1,categoryIndeterminate:!1,open:!1,subcategories:this.createSubcategories()}];ngOnInit(){return Qe(this,null,function*(){yield this.loadChecklistState()})}loadChecklistState(){return Qe(this,null,function*(){let n=yield this.indexeddbService.getState();n&&(this.allChecked=n.allChecked,this.allIndeterminate=n.allIndeterminate,this.categories=n.categories,this.checklistInfo.set(this.getSelectedChecklistInfo()))})}saveChecklistState(){return Qe(this,null,function*(){let n={allChecked:this.allChecked,allIndeterminate:this.allIndeterminate,categories:this.categories};yield this.indexeddbService.saveState(n);let t=yield this.indexeddbService.getState();this.checklistInfo.set(this.getSelectedChecklistInfo())})}createSubcategories(){return this.subcategories.map(n=>({id:this.subcategoryIdCounter++,name:n.name,checked:!1,color:n.color}))}toggleAllChecked(){this.allChecked=!this.allChecked,this.allIndeterminate=!1,this.categories.forEach(n=>{n.checked=this.allChecked,n.subcategories.forEach(t=>t.checked=this.allChecked),n.categoryIndeterminate=!1}),this.updateIndeterminateState(),this.saveChecklistState()}toggleCategoryChecked(n){n.checked=!n.checked,n.subcategories.forEach(t=>t.checked=n.checked),this.updateCategoryIndeterminateState(n),this.updateIndeterminateState(),this.saveChecklistState()}toggleCategoryOpen(n){this.categories.forEach(t=>{t!==n&&(t.open=!1)}),n.open=!n.open,this.saveChecklistState()}toggleSubcategoryChecked(n){n.checked=!n.checked,this.categories.forEach(t=>{this.updateCategoryIndeterminateState(t)}),this.updateIndeterminateState(),this.saveChecklistState()}updateIndeterminateState(){let n=this.categories.every(o=>o.checked&&o.subcategories.every(a=>a.checked)),t=this.categories.some(o=>o.checked||o.subcategories.some(a=>a.checked));this.allChecked=n,this.allIndeterminate=t&&!n,this.saveChecklistState()}updateCategoryIndeterminateState(n){let t=n.subcategories.every(a=>a.checked),o=n.subcategories.some(a=>a.checked);n.checked=t,n.categoryIndeterminate=o&&!t,this.saveChecklistState()}closeChecklist(){this.openChecklist=!1,this.closeAllSubcategories()}checklistToggle(){this.openChecklist=!this.openChecklist,this.closeAllSubcategories()}closeAllSubcategories(){this.categories.map(n=>{n.open=!1}),this.saveChecklistState()}getSelectedChecklistInfo(){if(this.openChecklist&&this.allChecked)return"\u0421\u043D\u044F\u0442\u044C \u0432\u044B\u0434\u0435\u043B\u0435\u043D\u0438\u0435";if(this.openChecklist&&!this.allChecked)return"\u0412\u044B\u0431\u0440\u0430\u0442\u044C \u0432\u0441\u0451";let n=this.categories.filter(a=>a.checked).length,t=this.categories.reduce((a,l)=>a+l.subcategories.filter(f=>f.checked).length,0);return`${n} \u0432\u043E\u0440\u043E\u043D\u043A\u0438, ${t} \u044D\u0442\u0430\u043F\u0430`}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=Gt({type:i,selectors:[["app-checklist"]],decls:6,vars:8,consts:[["appClickOutside","",1,"checklist",3,"clickOutside"],[1,"checklist_header",3,"click"],["type","checkbox",3,"change","click","checked","indeterminate"],[3,"ngClass"],[1,"checklist_body"],[1,"checklist_item",3,"ngClass"],[1,"category"],[1,"category_header",3,"click"],[1,"gray"],[1,"subcategory",3,"ngStyle"],["type","checkbox",3,"change","checked"]],template:function(t,o){t&1&&(_e(0,"div",0),Ke("clickOutside",function(){return o.closeChecklist()}),_e(1,"div",1),Ke("click",function(){return o.checklistToggle()}),_e(2,"input",2),Ke("change",function(){return o.toggleAllChecked()})("click",function(l){return l.stopPropagation()}),Te(),_e(3,"span",3),At(4),Te()(),so(5,Wd,3,1,"div",4),Te()),t&2&&(Ne(2),dt("checked",o.allChecked)("indeterminate",o.allIndeterminate),Ne(),dt("ngClass",Aa(5,Bd,!o.openChecklist,o.openChecklist)),Ne(),fo(" ",o.checklistInfo()," "),Ne(),uo(o.openChecklist?5:-1))},dependencies:[Ua,ei,yo,Na],styles:["[_nghost-%COMP%]{display:block}.checklist[_ngcontent-%COMP%]{max-width:300px;width:100%;margin:0 auto;position:absolute;top:50px;left:50%;transform:translate(-50%)}.checklist_header[_ngcontent-%COMP%]{border:1px solid #dadedf;border-radius:2px;padding:2px 7px;width:300px;height:34px;display:flex;align-items:center;gap:8px;cursor:pointer;margin-bottom:1px}.checklist_body[_ngcontent-%COMP%]   .checklist_item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;border:1px solid #d3d5d6;border-radius:3px;margin-bottom:5px;transition:all .5s ease}.checklist_body[_ngcontent-%COMP%]   .checklist_item[_ngcontent-%COMP%]   .category[_ngcontent-%COMP%]{border-radius:2px;width:300px;display:flex;flex-direction:column}.checklist_body[_ngcontent-%COMP%]   .checklist_item[_ngcontent-%COMP%]   .category_header[_ngcontent-%COMP%]{padding:2px 7px;display:flex;align-items:center;gap:8px;height:30px;cursor:pointer}.checklist_body[_ngcontent-%COMP%]   .checklist_item[_ngcontent-%COMP%]   .category[_ngcontent-%COMP%]   .subcategory[_ngcontent-%COMP%]{padding:2px 7px;max-width:300px;height:27px;font-weight:400;font-size:14px;color:#000;display:flex;align-items:center;gap:8px}.gray[_ngcontent-%COMP%]{color:#92989b}.black[_ngcontent-%COMP%]{color:#2e3640}.shadow[_ngcontent-%COMP%]{box-shadow:0 4px 4px #00000017}"],data:{animation:[$a("toggleHeight",[Co(":enter",[Mr({height:"0px",opacity:0}),wo("300ms ease-out",Mr({height:"*",opacity:1}))]),Co(":leave",[wo("300ms ease-in",Mr({height:"0px",opacity:0}))])])]},changeDetection:0})};var Lu=[{path:"checklist",component:ii},{path:"**",redirectTo:"checklist",pathMatch:"full"}];var Gd="@",Yd=(()=>{class i{doc;delegate;zone;animationType;moduleImpl;_rendererFactoryPromise=null;scheduler=H(ga,{optional:!0});loadingSchedulerFn=H(Qd,{optional:!0});_engine;constructor(t,o,a,l,f){this.doc=t,this.delegate=o,this.zone=a,this.animationType=l,this.moduleImpl=f}ngOnDestroy(){this._engine?.flush()}loadImpl(){let t=()=>this.moduleImpl??import("./chunk-4PPP2GHW.js").then(a=>a),o;return this.loadingSchedulerFn?o=this.loadingSchedulerFn(t):o=t(),o.catch(a=>{throw new ce(5300,!1)}).then(({\u0275createEngine:a,\u0275AnimationRendererFactory:l})=>{this._engine=a(this.animationType,this.doc);let f=new l(this.delegate,this._engine,this.zone);return this.delegate=f,f})}createRenderer(t,o){let a=this.delegate.createRenderer(t,o);if(a.\u0275type===0)return a;typeof a.throwOnSyntheticProps=="boolean"&&(a.throwOnSyntheticProps=!1);let l=new ms(a);return o?.data?.animation&&!this._rendererFactoryPromise&&(this._rendererFactoryPromise=this.loadImpl()),this._rendererFactoryPromise?.then(f=>{let k=f.createRenderer(t,o);l.use(k),this.scheduler?.notify(11)}).catch(f=>{l.use(a)}),l}begin(){this.delegate.begin?.()}end(){this.delegate.end?.()}whenRenderingDone(){return this.delegate.whenRenderingDone?.()??Promise.resolve()}static \u0275fac=function(o){oo()};static \u0275prov=re({token:i,factory:i.\u0275fac})}return i})(),ms=class{delegate;replay=[];\u0275type=1;constructor(n){this.delegate=n}use(n){if(this.delegate=n,this.replay!==null){for(let t of this.replay)t(n);this.replay=null}}get data(){return this.delegate.data}destroy(){this.replay=null,this.delegate.destroy()}createElement(n,t){return this.delegate.createElement(n,t)}createComment(n){return this.delegate.createComment(n)}createText(n){return this.delegate.createText(n)}get destroyNode(){return this.delegate.destroyNode}appendChild(n,t){this.delegate.appendChild(n,t)}insertBefore(n,t,o,a){this.delegate.insertBefore(n,t,o,a)}removeChild(n,t,o){this.delegate.removeChild(n,t,o)}selectRootElement(n,t){return this.delegate.selectRootElement(n,t)}parentNode(n){return this.delegate.parentNode(n)}nextSibling(n){return this.delegate.nextSibling(n)}setAttribute(n,t,o,a){this.delegate.setAttribute(n,t,o,a)}removeAttribute(n,t,o){this.delegate.removeAttribute(n,t,o)}addClass(n,t){this.delegate.addClass(n,t)}removeClass(n,t){this.delegate.removeClass(n,t)}setStyle(n,t,o,a){this.delegate.setStyle(n,t,o,a)}removeStyle(n,t,o){this.delegate.removeStyle(n,t,o)}setProperty(n,t,o){this.shouldReplay(t)&&this.replay.push(a=>a.setProperty(n,t,o)),this.delegate.setProperty(n,t,o)}setValue(n,t){this.delegate.setValue(n,t)}listen(n,t,o){return this.shouldReplay(t)&&this.replay.push(a=>a.listen(n,t,o)),this.delegate.listen(n,t,o)}shouldReplay(n){return this.replay!==null&&n.startsWith(Gd)}},Qd=new we("");function Fu(i="animations"){return Ca("NgAsyncAnimations"),Rn([{provide:Ir,useFactory:(n,t,o)=>new Yd(n,t,o,i),deps:[Me,Nr,lt]},{provide:wa,useValue:i==="noop"?"NoopAnimations":"BrowserAnimations"}])}var $u={providers:[Da({eventCoalescing:!0}),Mu(Lu),Fu()]};var oi=class i{title="checklist-app";static \u0275fac=function(t){return new(t||i)};static \u0275cmp=Gt({type:i,selectors:[["app-root"]],decls:5,vars:0,consts:[[2,"padding","20px","text-align","center"],["href","https://azatfarmanyan.netlify.app/","target","_blank","onmouseover","this.style.textDecoration='underline'; this.style.color='#1abc9c';","onmouseout","this.style.textDecoration='none'; this.style.color='#3498db';","title","\u041F\u0435\u0440\u0435\u0439\u0442\u0438 \u043D\u0430 \u0441\u0430\u0439\u0442 \u0410\u0437\u0430\u0442\u0430 \u0424\u0430\u0440\u043C\u0430\u043D\u044F\u043D\u0430",2,"color","#3498db","text-decoration","none","font-weight","bold","transition","color 0.3s ease, text-decoration 0.3s ease"]],template:function(t,o){t&1&&(_e(0,"h1",0),At(1," \u041F\u0440\u0438\u043B\u043E\u0436\u0435\u043D\u0438\u0435 Checklist \u043E\u0442 "),_e(2,"a",1),At(3," \u0410\u0437\u0430\u0442 \u0424\u0430\u0440\u043C\u0430\u043D\u044F\u043D "),Te()(),Dr(4,"router-outlet"))},dependencies:[us],encapsulation:2})};Ya(oi,$u).catch(i=>console.error(i));
